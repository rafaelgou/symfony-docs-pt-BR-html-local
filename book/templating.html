<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Criando e usando Templates &mdash; Symfony2.4Docs 2.4 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Symfony2.4Docs 2.4 documentation" href="../index.html" />
    <link rel="up" title="Livro" href="index.html" />
    <link rel="next" title="Bancos de Dados e Doctrine" href="doctrine.html" />
    <link rel="prev" title="Roteamento" href="routing.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="doctrine.html" title="Bancos de Dados e Doctrine"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="routing.html" title="Roteamento"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Symfony2.4Docs 2.4 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Livro</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="criando-e-usando-templates">
<span id="index-0"></span><h1>Criando e usando Templates<a class="headerlink" href="#criando-e-usando-templates" title="Permalink to this headline">¶</a></h1>
<p>Como você sabe o <a class="reference internal" href="controller.html"><em>controller</em></a> é responsável por
controlar cada requisição que venha de uma aplicação Symfony2. Na realidade,
o controller delega muito do trabalho pesado para outros lugares então aquele
código pode ser testado e reusado. Quando um controller precisa gerar HTML,
CSS e qualquer outro conteúdo, ele entrega o trabalho para o engine de template.
Nesse capítulo, você irá aprender como escrever templates poderosas que podem ser
usada para retornar conteúdo para o usuário, preencher corpo de e-mail, e mais. Você
irá aprender atalhos, maneiras espertas de extender templates e como reusar código
de template.</p>
<div class="section" id="templates">
<span id="index-1"></span><h2>Templates<a class="headerlink" href="#templates" title="Permalink to this headline">¶</a></h2>
<p>Um template é simplesmente um arquivo de texto que pode gerar qualquer formato baseado em texto
(HTML, XML, CSV, LaTeX ...). O tipo mais familiar de template é um
template em <em>PHP</em> - um arquivo de texto analisado pelo PHP que contém uma mistura de texto e código PHP:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Welcome to Symfony!&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;&lt;?php echo $page_title ?&gt;&lt;/h1&gt;

        &lt;ul id=&quot;navigation&quot;&gt;
            &lt;?php foreach ($navigation as $item): ?&gt;
                &lt;li&gt;
                    &lt;a href=&quot;&lt;?php echo $item-&gt;getHref() ?&gt;&quot;&gt;
                        &lt;?php echo $item-&gt;getCaption() ?&gt;
                    &lt;/a&gt;
                &lt;/li&gt;
            &lt;?php endforeach; ?&gt;
        &lt;/ul&gt;
    &lt;/body&gt;
&lt;/html&gt;
</pre></div>
</div>
<p id="index-2">Mas Symfony2 empacota até mesmo uma linguagem muito poderosa de template chamada <a class="reference external" href="http://twig.sensiolabs.org">Twig</a>.
Twig permite a você escrever templates concisos e legíveis que são mais amigáveis
para web designers e, de certa forma, mais poderosos que templates de PHP:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;title&gt;</span>Welcome to Symfony!<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;h1&gt;</span><span class="cp">{{</span> <span class="nv">page_title</span> <span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>

        <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;navigation&quot;</span><span class="nt">&gt;</span>
            <span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="k">in</span> <span class="nv">navigation</span> <span class="cp">%}</span>
                <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">item.href</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">item.caption</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
            <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
        <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>Twig define dois tipos de sintaxe especiais:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">{{</span> <span class="pre">...</span> <span class="pre">}}</span></tt>: &#8220;Diga algo&#8221;: exibe uma variável ou o resultado de uma
expressão para o template;</li>
<li><tt class="docutils literal"><span class="pre">{%</span> <span class="pre">...</span> <span class="pre">%}</span></tt>: &#8220;Faça algo&#8221;: uma <strong>tag</strong> que controla a lógica do
template; ela é usada para executar certas sentenças como for-loops por exemplo.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Há uma terceira sintaxe usada para criar comentários <tt class="docutils literal"><span class="pre">{#</span> <span class="pre">this</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">comment</span> <span class="pre">#}</span></tt>.
Essa sintaxe pode ser usada através de múltiplas linhas, parecidas com a sintaxe
equivalente em PHP <tt class="docutils literal"><span class="pre">/*</span> <span class="pre">comment</span> <span class="pre">*/</span></tt>.</p>
</div>
<p>Twig também contém <strong>filtros</strong>, que modificam conteúdo antes de serem interpretados.
O seguinte filtro transforma a variável <tt class="docutils literal"><span class="pre">title</span></tt> toda em letra maiúscula antes de interpretá-la:</p>
<div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="nv">title</span> <span class="o">|</span> <span class="nf">upper</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
<p>Twig vem com uma longa lista de <a class="reference external" href="http://twig.sensiolabs.org/doc/tags/index.html">tags</a> e <a href="#id3"><span class="problematic" id="id4">`filtros`_</span></a> que estão disponíveis
por padrão. Você pode até mesmo <a href="#id5"><span class="problematic" id="id6">`adicionar suas próprias extensões`_</span></a> para o Twig quando precisar.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Registrar uma extensão Twig é tão fácil quanto criar um novo serviço e atribuir tag
nele com <tt class="docutils literal"><span class="pre">twig.extension</span></tt> <em class="xref std std-ref">tag</em>.</p>
</div>
<p>Como você verá através da documentação, Twig também suporta funções
e nova funções podem ser facilmente adicionadas. Por exemplo, a seguinte função usa
uma tag padrão <tt class="docutils literal"><span class="pre">for</span></tt>  e a função <tt class="docutils literal"><span class="pre">cycle</span></tt> para então imprimir dez tags div, alternando
entre classes <tt class="docutils literal"><span class="pre">odd</span></tt> e <tt class="docutils literal"><span class="pre">even</span></tt>:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">for</span> <span class="nv">i</span> <span class="k">in</span> <span class="m">0.</span><span class="nv">.10</span> <span class="cp">%}</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">cycle</span><span class="o">([</span><span class="s1">&#39;odd&#39;</span><span class="o">,</span> <span class="s1">&#39;even&#39;</span><span class="o">],</span> <span class="nv">i</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- some HTML here --&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Durante este capítulo, exemplos de template serão mostrados tanto em Twig como PHP.</p>
<div class="sidebar">
<p class="first sidebar-title">Por que Twig?</p>
<p>Templates Twig são feitas para serem simples e não irão processar tags PHP. Isto
é pelo design: o sistema de template do Twig é feito para expressar apresentação,
não lógica de programa. Quanto mais você usa Twig, mais você irá apreciar e beneficiar
desta distinção. E claro, você será amado por web designers de todos os lugares.</p>
<p>Twig pode também fazer coisas que PHP não pode, como por exemplo herança verdadeira de template
(Templates do Twig compilam classes PHP que herdam uma da outra),
controle de espaço em branco, caixa de areia, e a inclusão de funções personalizadas
e filtros que somente afetam templates. Twig contém pequenos recursos
que fazem escrita de templates mais fácil e mais concisa. Considere o seguinte
exemplo, que combina um loop com uma sentença lógia <tt class="docutils literal"><span class="pre">if</span></tt>:</p>
<div class="last highlight-html+jinja"><div class="highlight"><pre><span class="nt">&lt;ul&gt;</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">user</span> <span class="k">in</span> <span class="nv">users</span> <span class="cp">%}</span>
        <span class="nt">&lt;li&gt;</span><span class="cp">{{</span> <span class="nv">user.username</span> <span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
    <span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
        <span class="nt">&lt;li&gt;</span>No users found<span class="nt">&lt;/li&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="cache-do-template-twig">
<span id="index-3"></span><h3>Cache do Template Twig<a class="headerlink" href="#cache-do-template-twig" title="Permalink to this headline">¶</a></h3>
<p>Twig é rápido. Cada template Twig é compilado para uma classe nativa PHP
que é processada na execução. As classes compiladas são localizadas no
diretório <tt class="docutils literal"><span class="pre">app/cache/{environment}/twig</span></tt> (onde <tt class="docutils literal"><span class="pre">{environment}</span></tt> é o
ambiente, como <tt class="docutils literal"><span class="pre">dev</span></tt> ou <tt class="docutils literal"><span class="pre">prod</span></tt>), e em alguns casos pode ser útil durante
a depuração. Veja <em class="xref std std-ref">environments-summary</em> para mais informações de
ambientes.</p>
<p>Quando o modo <tt class="docutils literal"><span class="pre">debug</span></tt> é habilitado (comum no ambiente <tt class="docutils literal"><span class="pre">dev</span></tt>), um template
Twig será automaticamente recompilado quando mudanças são feitas nele. Isso
significa que durante o desenvolvimento você pode alegremente fazer mudanças para um template Twig
e imediatamente ver as mudanças sem precisar se preocupar sobre limpar qualquer
cache.</p>
<p>Quando o modo <tt class="docutils literal"><span class="pre">debug</span></tt> é desabilitado (comum no ambiente <tt class="docutils literal"><span class="pre">prod</span></tt>), entretanto,
você deve limpar o cache do diretório Twig para que então os templates Twig
se regenerem. Lembre de fazer isso quando distribuir sua aplicação.</p>
</div>
</div>
<div class="section" id="heranca-e-layouts-de-template">
<span id="index-4"></span><h2>Herança e Layouts de Template<a class="headerlink" href="#heranca-e-layouts-de-template" title="Permalink to this headline">¶</a></h2>
<p>Mais frequentemente que não, templates compartilham elementos comuns em um projeto, como o
header, footer, sidebar ou outros. Em Symfony2,  nós gostamos de pensar sobre esse
problema de forma diferente: um template pode ser decorado por outro. Isso funciona
exatemente da mesma forma como classes PHP: herança de template permite você construir
um &#8220;layout&#8221; de template base que contenha todos os elementos comuns de seu site
definidos como <strong>blocos</strong> (pense em &#8220;classe PHP com métodos base&#8221;). Um template filho
pode extender o layout base e sobrepor os blocos (pense &#8220;subclasse PHP
que sobreponha certos métodos de sua classe pai&#8221;).</p>
<p>Primeiro, construa um arquivo de layout de base:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# app/Resources/views/base.html.twig #}</span>
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;Content-Type&quot;</span> <span class="na">content=</span><span class="s">&quot;text/html; charset=utf-8&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;title&gt;</span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span>Test Application<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;sidebar&quot;</span><span class="nt">&gt;</span>
            <span class="cp">{%</span> <span class="k">block</span> <span class="nv">sidebar</span> <span class="cp">%}</span>
            <span class="nt">&lt;ul&gt;</span>
                <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;/&quot;</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
                <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;/blog&quot;</span><span class="nt">&gt;</span>Blog<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
            <span class="nt">&lt;/ul&gt;</span>
            <span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
        <span class="nt">&lt;/div&gt;</span>

        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;content&quot;</span><span class="nt">&gt;</span>
            <span class="cp">{%</span> <span class="k">block</span> <span class="nv">body</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;!--</span> <span class="nx">app</span><span class="o">/</span><span class="nx">Resources</span><span class="o">/</span><span class="nx">views</span><span class="o">/</span><span class="nx">base</span><span class="o">.</span><span class="nx">html</span><span class="o">.</span><span class="nx">php</span> <span class="o">--&gt;</span>
<span class="o">&lt;!</span><span class="nx">DOCTYPE</span> <span class="nx">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">html</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">head</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">meta</span> <span class="nx">http</span><span class="o">-</span><span class="nx">equiv</span><span class="o">=</span><span class="s2">&quot;Content-Type&quot;</span> <span class="nx">content</span><span class="o">=</span><span class="s2">&quot;text/html; charset=utf-8&quot;</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="nx">title</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;slots&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;Test Application&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x">&lt;/title&gt;</span>
<span class="x">    &lt;/head&gt;</span>
<span class="x">    &lt;body&gt;</span>
<span class="x">        &lt;div id=&quot;sidebar&quot;&gt;</span>
<span class="x">            </span><span class="cp">&lt;?php</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;slots&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">has</span><span class="p">(</span><span class="s1">&#39;sidebar&#39;</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">                </span><span class="cp">&lt;?php</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;slots&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">(</span><span class="s1">&#39;sidebar&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">            </span><span class="cp">&lt;?php</span> <span class="k">else</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">                &lt;ul&gt;</span>
<span class="x">                    &lt;li&gt;&lt;a href=&quot;/&quot;&gt;Home&lt;/a&gt;&lt;/li&gt;</span>
<span class="x">                    &lt;li&gt;&lt;a href=&quot;/blog&quot;&gt;Blog&lt;/a&gt;&lt;/li&gt;</span>
<span class="x">                &lt;/ul&gt;</span>
<span class="x">            </span><span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">        &lt;/div&gt;</span>

<span class="x">        &lt;div id=&quot;content&quot;&gt;</span>
<span class="x">            </span><span class="cp">&lt;?php</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;slots&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">    &lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Apesar da discussão sobre herança de template ser em termos do Twig,
a filosofia é a mesma entre templates Twig e PHP.</p>
</div>
<p>Este template define o esqueleto do documento base HTML de um página simples
de duas colunas. Neste exemplo, três áreas <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">block</span> <span class="pre">%}</span></tt> são definidas (<tt class="docutils literal"><span class="pre">title</span></tt>,
<tt class="docutils literal"><span class="pre">sidebar</span></tt> e <tt class="docutils literal"><span class="pre">body</span></tt>). Cada bloco pode ser sobreposto por um template filho
ou largado com sua implementação padrão. Esse template poderia também ser processado
diretamente. Neste caso os blocos <tt class="docutils literal"><span class="pre">title</span></tt>, <tt class="docutils literal"><span class="pre">sidebar</span></tt> e <tt class="docutils literal"><span class="pre">body</span></tt> blocks deveriam
simplesmente reter os valores padrão neste template.</p>
<p>Um template filho poderia ser como este:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# src/Acme/BlogBundle/Resources/views/Blog/index.html.twig #}</span>
<span class="cp">{%</span> <span class="k">extends</span> <span class="s1">&#39;::base.html.twig&#39;</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span>My cool blog posts<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">body</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">entry</span> <span class="k">in</span> <span class="nv">blog_entries</span> <span class="cp">%}</span>
        <span class="nt">&lt;h2&gt;</span><span class="cp">{{</span> <span class="nv">entry.title</span> <span class="cp">}}</span><span class="nt">&lt;/h2&gt;</span>
        <span class="nt">&lt;p&gt;</span><span class="cp">{{</span> <span class="nv">entry.body</span> <span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;!--</span> <span class="nx">src</span><span class="o">/</span><span class="nx">Acme</span><span class="o">/</span><span class="nx">BlogBundle</span><span class="o">/</span><span class="nx">Resources</span><span class="o">/</span><span class="nx">views</span><span class="o">/</span><span class="nx">Blog</span><span class="o">/</span><span class="nx">index</span><span class="o">.</span><span class="nx">html</span><span class="o">.</span><span class="nx">php</span> <span class="o">--&gt;</span>
<span class="o">&lt;?</span><span class="nx">php</span> <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">extend</span><span class="p">(</span><span class="s1">&#39;::base.html.php&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>

<span class="cp">&lt;?php</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;slots&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;My cool blog posts&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>

<span class="cp">&lt;?php</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;slots&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">start</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$blog_entries</span> <span class="k">as</span> <span class="nv">$entry</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">        &lt;h2&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$entry</span><span class="o">-&gt;</span><span class="na">getTitle</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x">&lt;/h2&gt;</span>
<span class="x">        &lt;p&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$entry</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x">&lt;/p&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="cp">&lt;?php</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;slots&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">stop</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">O template pai é idenficado por uma sintaxe especial de string
(<tt class="docutils literal"><span class="pre">::base.html.twig</span></tt>) que indica que o template reside no diretório
<tt class="docutils literal"><span class="pre">app/Resources/views</span></tt> do projeto. Essa convenção de nomeamento é
explicada inteiramente em <a class="reference internal" href="#template-naming-locations"><em>Nomeação de Template e Localizações</em></a>.</p>
</div>
<p>A chave para herança template é a tag  <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">extends</span> <span class="pre">%}</span></tt>. Ela avisa
o engine de template para primeiro avaliar o template base, que configura
o layout e define vários blocos. O template filho é então processado,
ao ponto que os blocos  <tt class="docutils literal"><span class="pre">title</span></tt> e <tt class="docutils literal"><span class="pre">body</span></tt> do template pai sejam substituídos
por aqueles do filho. Dependendo do valor de <tt class="docutils literal"><span class="pre">blog_entries</span></tt>, a
saída poderia parecer com isso:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;
        &lt;title&gt;My cool blog posts&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div id=&quot;sidebar&quot;&gt;
            &lt;ul&gt;
                &lt;li&gt;&lt;a href=&quot;/&quot;&gt;Home&lt;/a&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href=&quot;/blog&quot;&gt;Blog&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt;
        &lt;/div&gt;

        &lt;div id=&quot;content&quot;&gt;
            &lt;h2&gt;My first post&lt;/h2&gt;
            &lt;p&gt;The body of the first post.&lt;/p&gt;

            &lt;h2&gt;Another post&lt;/h2&gt;
            &lt;p&gt;The body of the second post.&lt;/p&gt;
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;
</pre></div>
</div>
<p>Perceba que como o template filho não definiu um bloco <tt class="docutils literal"><span class="pre">sidebar</span></tt>, o
valor do template pai é usado no lugar. Conteúdo dentro de uma tag  <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">block</span> <span class="pre">%}</span></tt>
em um template pai é sempre usado por padrão.</p>
<p>Você pode usar muitos níveis de herança quanto quiser. Na próxima sessão,
um modelo comum de herança de três níveis será explicado assim como os templates
são organizados dentro de um projeto Symfony2.</p>
<p>Quando trabalhar com herança de template, aqui estão algumas dicas para guardar na cabeça:</p>
<ul>
<li><p class="first">Se você usa <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">extends</span> <span class="pre">%}</span></tt> em um template, ele deve ser a primeira tag
naquele template.</p>
</li>
<li><p class="first">Quanto mais tags <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">block</span> <span class="pre">%}</span></tt> você tiver no template base, melhor.
Lembre, templates filhos não precisam definir todos os blocos do pai, então
criar tantos blocos em seus templates base quanto você quiser e dar a cada um
padrão sensato. Quanto mais blocos seus templates base tiverem, mais flexível
seu layout será.</p>
</li>
<li><p class="first">Se você achar você mesmo duplicando conteúdo em um determinado número de templates, isto provavelmente
significa que você deveria mover aquele conteúdo para um <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">block</span> <span class="pre">%}</span></tt> no template pai.
Em alguns casos, uma solução melhor pode ser mover o conteúdo para um novo template
e <tt class="docutils literal"><span class="pre">incluir</span></tt> ele (veja <a class="reference internal" href="#including-templates"><em>Incluir outras Templates</em></a>).</p>
</li>
<li><p class="first">Se você precisa obter o conteúdo de um bloco do template pai, você
pode usar a função <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">parent()</span> <span class="pre">}}</span></tt>. Isso é útil se você quiser adicionar
ao conteúdo de um bloco pai ao invés de sobrepor ele:</p>
<div class="highlight-python"><div class="highlight"><pre>.. code-block:: html+jinja

    {% block sidebar %}
        &lt;h3&gt;Table of Contents&lt;/h3&gt;
        ...
        {{ parent() }}
    {% endblock %}
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="nomeacao-de-template-e-localizacoes">
<span id="template-naming-locations"></span><span id="index-5"></span><h2>Nomeação de Template e Localizações<a class="headerlink" href="#nomeacao-de-template-e-localizacoes" title="Permalink to this headline">¶</a></h2>
<p>Por padrão, templates podem residir em duas localizações diferentes:</p>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">app/Resources/views/</span></tt>: O diretório de aplicação de <tt class="docutils literal"><span class="pre">views</span></tt> pode abrigar
templates bases para toda a aplicação(ex: os layout de sua aplicação) assim como
os tempates que sobrepõem templates de pacote (veja <a class="reference internal" href="#overriding-bundle-templates"><em>Sobrepondo Templates de Pacote</em></a>);</p>
<p>application-wide base templates (i.e. your application&#8217;s layouts) as well as
templates that override bundle templates (see
<a class="reference internal" href="#overriding-bundle-templates"><em>Sobrepondo Templates de Pacote</em></a>);</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">path/to/bundle/Resources/views/</span></tt>: Cada pacote abriga as templates dele no diretório
<tt class="docutils literal"><span class="pre">Resources/views</span></tt> (e sub-diretórios). A maioria dos templates irá residir dentro de
um pacote.</p>
</li>
</ul>
<p>Symfony2 usa a sintaxe de string <strong>bundle</strong>:<strong>controller</strong>:<strong>template</strong> para
templates. Isso permite vários tipos diferente de template, cada um residindo
em uma localização especifica:</p>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">AcmeBlogBundle:Blog:index.html.twig</span></tt>: Esta sintaxe é usada para especificar um
template para uma página específica. As três partes do string, cada uma separada
por dois pontos, (<tt class="docutils literal"><span class="pre">:</span></tt>), signitca o seguinte:</p>
<blockquote>
<div><ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">AcmeBlogBundle</span></tt>: (<em>bundle</em>) o template reside entro de
<tt class="docutils literal"><span class="pre">AcmeBlogBundle</span></tt> (e.g. <tt class="docutils literal"><span class="pre">src/Acme/BlogBundle</span></tt>);</p>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">Blog</span></tt>: (<em>controller</em>) indica que o template reside dentro do</dt>
<dd><p class="first last">sub-diretório <tt class="docutils literal"><span class="pre">Blog</span></tt> de <tt class="docutils literal"><span class="pre">Resources/views</span></tt>;</p>
</dd>
</dl>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">index.html.twig</span></tt>: (<em>template</em>) o verdadeiro nome do arquivo é
<tt class="docutils literal"><span class="pre">index.html.twig</span></tt>.</p>
</li>
</ul>
</div></blockquote>
<p>Assumindo que o <tt class="docutils literal"><span class="pre">AcmeBlogBundle</span></tt> reside em <tt class="docutils literal"><span class="pre">src/Acme/BlogBundle</span></tt>, o
atalho final para o layout seria <tt class="docutils literal"><span class="pre">src/Acme/BlogBundle/Resources/views/Blog/index.html.twig</span></tt>.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">AcmeBlogBundle::layout.html.twig</span></tt>: Essa sintaxe refere ao template base que
é específica para <tt class="docutils literal"><span class="pre">AcmeBlogBundle</span></tt>. Since the middle, &#8220;controller&#8221;,
portion is missing (e.g. <tt class="docutils literal"><span class="pre">Blog</span></tt>), the template lives at
<tt class="docutils literal"><span class="pre">Resources/views/layout.html.twig</span></tt> inside <tt class="docutils literal"><span class="pre">AcmeBlogBundle</span></tt>.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">::base.html.twig</span></tt>: Esta sintaxe refere a uma template base para toda a aplicação ou
layout. Perceba que a string começa com dois sinais de dois pontos (<tt class="docutils literal"><span class="pre">::</span></tt>), significando
que ambas as partes <em>bundle</em>  <em>controller</em> estão faltando. Isto significa
que o template não é localizado em qualquer pacote, mas sim na raiz do
diretório <tt class="docutils literal"><span class="pre">app/Resources/views/</span></tt>.</p>
</li>
</ul>
<p>Na seção <a class="reference internal" href="#overriding-bundle-templates"><em>Sobrepondo Templates de Pacote</em></a>, você irá descobrir como cada
template reside dentro do <tt class="docutils literal"><span class="pre">AcmeBlogBundle</span></tt>, por exemplo, pode ser sobreposto
ao colocar um template de mesmo nome no diretório
<tt class="docutils literal"><span class="pre">app/Resources/AcmeBlogBundle/views/</span></tt>. Isso dá o poder de sobrepor templates de qualquer pacote pago.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Esperançosamente, a sintaxe de nomeação de template parece familiar - é a mesma convenção
para nomeação usada para referir para <a class="reference internal" href="routing.html#controller-string-syntax"><em>Padrão de nomeação do Controlador</em></a>.</p>
</div>
<div class="section" id="sufixo-de-template">
<h3>Sufixo de Template<a class="headerlink" href="#sufixo-de-template" title="Permalink to this headline">¶</a></h3>
<p>O formato <strong>bundle</strong>:<strong>controller</strong>:<strong>template</strong> de cada template especifica
<em>onde</em> o arquivo de template está localizado. Cada nome de template também tem duas expressões
que especificam o <em>formato</em> e <em>engine</em> para aquela template.</p>
<ul class="simple">
<li><strong>AcmeBlogBundle:Blog:index.html.twig</strong> - formato HTML, engine Twig</li>
<li><strong>AcmeBlogBundle:Blog:index.html.php</strong> - formato HTML, engine PHP</li>
<li><strong>AcmeBlogBundle:Blog:index.css.twig</strong> - formato CSS, engine Twig</li>
</ul>
<p>Por padrão, qualquer template Symfony2 ou pode ser escrito em Twig ou em PHP, e
a última  parte da extensão (ex: <tt class="docutils literal"><span class="pre">.twig</span></tt> ou <tt class="docutils literal"><span class="pre">.php</span></tt>) especifica qual
dessas duas <em>engines</em> deveria ser usada. A primeira parte da extensão,
(ex: <tt class="docutils literal"><span class="pre">.html</span></tt>, <tt class="docutils literal"><span class="pre">.css</span></tt>, etc) é o formato final que o template irá
gerar. Ao contrário de engine, que determina como Symfony2 analisa o template,
isso é simplesmente uma tática organizacional em caso do mesmo recurso precisar
ser transformado como HTML(<tt class="docutils literal"><span class="pre">index.html.twig</span></tt>), XML (<tt class="docutils literal"><span class="pre">index.xml.twig</span></tt>),
ou qualquer outro formato. Para mais informaçõess, leia a seção <a class="reference internal" href="#template-formats"><em>Debugging</em></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As &#8220;engines&#8221; disponíveis podem ser configurados e até mesmo ter novas engines adicionadas.
Veja <a class="reference internal" href="#template-configuration"><em>Configuração de Template</em></a> para mais detalhes.</p>
</div>
</div>
</div>
<div class="section" id="tags-e-helpers">
<span id="index-6"></span><h2>Tags e Helpers<a class="headerlink" href="#tags-e-helpers" title="Permalink to this headline">¶</a></h2>
<p>Você já entende as bases do templates, como eles são chamados e como usar
herança de template. As partes mais difíceis estão realmente atrás de você. Nesta
seção, você irá aprender sobre um grande grande grupo de ferramentas disponíveis para ajudar
a desempenhar as tarefas de template mais comuns como incluir outras templates,
vincular páginas e incluir imagens.</p>
<p>Symfony2 vem acompanhado com várias tags Twig especializadas e funções que
facilitam o trabalho do designer de template. Em PHP, o sistema de template providencia
um sistema extenso de <em>helper</em> que providencia funcionalidades úteis no contexto
de template.</p>
<p>Nós realmente vimos umas poucas tags Twig construídas (<tt class="docutils literal"><span class="pre">{%</span> <span class="pre">block</span> <span class="pre">%}</span></tt> e <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">extends</span> <span class="pre">%}</span></tt>)
como exemplo de um helper PHP (<tt class="docutils literal"><span class="pre">$view['slots']</span></tt>). Vamos aprender um
pouco mais.</p>
<div class="section" id="incluir-outras-templates">
<span id="including-templates"></span><span id="index-7"></span><h3>Incluir outras Templates<a class="headerlink" href="#incluir-outras-templates" title="Permalink to this headline">¶</a></h3>
<p>Você irá frequntemente querer incluir a mesma template ou fragmento de código em várias
páginas diferentes. Por exemplo, em uma aplicação com &#8220;artigos de notícias&#8221;, a exibição
do artigo no código do template poderia ser usada numa página de detalhes do artigo,
num a página exibindo os artigos mais populares, ou em uma lista dos últimos
artigos.</p>
<p>Quando você precisa reutilizar um pedaço de um código PHP, você tipicamente move o código
para uma nova classe ou função PHP. O mesmo é verdade para template. Ao mover o
código do template reutilizado em um template próprio, ele pode ser incluído em qualquer outro
template. Primeiro, crie o template que você precisará reutilizar.</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# src/Acme/ArticleBundle/Resources/views/Article/articleDetails.html.twig #}</span>
<span class="nt">&lt;h2&gt;</span><span class="cp">{{</span> <span class="nv">article.title</span> <span class="cp">}}</span><span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;h3</span> <span class="na">class=</span><span class="s">&quot;byline&quot;</span><span class="nt">&gt;</span>by <span class="cp">{{</span> <span class="nv">article.authorName</span> <span class="cp">}}</span><span class="nt">&lt;/h3&gt;</span>

<span class="nt">&lt;p&gt;</span>
  <span class="cp">{{</span> <span class="nv">article.body</span> <span class="cp">}}</span>
<span class="nt">&lt;/p&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;!--</span> <span class="nx">src</span><span class="o">/</span><span class="nx">Acme</span><span class="o">/</span><span class="nx">ArticleBundle</span><span class="o">/</span><span class="nx">Resources</span><span class="o">/</span><span class="nx">views</span><span class="o">/</span><span class="nx">Article</span><span class="o">/</span><span class="nx">articleDetails</span><span class="o">.</span><span class="nx">html</span><span class="o">.</span><span class="nx">php</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nv">$article</span><span class="o">-&gt;</span><span class="na">getTitle</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x">&lt;/h2&gt;</span>
<span class="x">&lt;h3 class=&quot;byline&quot;&gt;by </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$article</span><span class="o">-&gt;</span><span class="na">getAuthorName</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x">&lt;/h3&gt;</span>

<span class="x">&lt;p&gt;</span>
<span class="x">  </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$article</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;/p&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Incluir este template de qualquer outro template é fácil:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# src/Acme/ArticleBundle/Resources/Article/list.html.twig #}</span>
<span class="cp">{%</span> <span class="k">extends</span> <span class="s1">&#39;AcmeArticleBundle::layout.html.twig&#39;</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">body</span> <span class="cp">%}</span>
    <span class="nt">&lt;h1&gt;</span>Recent Articles<span class="nt">&lt;h1&gt;</span>

    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">article</span> <span class="k">in</span> <span class="nv">articles</span> <span class="cp">%}</span>
        <span class="cp">{%</span> <span class="k">include</span> <span class="s1">&#39;AcmeArticleBundle:Article:articleDetails.html.twig&#39;</span> <span class="k">with</span> <span class="o">{</span><span class="s1">&#39;article&#39;</span><span class="o">:</span> <span class="nv">article</span><span class="o">}</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;!--</span> <span class="nx">src</span><span class="o">/</span><span class="nx">Acme</span><span class="o">/</span><span class="nx">ArticleBundle</span><span class="o">/</span><span class="nx">Resources</span><span class="o">/</span><span class="nx">Article</span><span class="o">/</span><span class="k">list</span><span class="o">.</span><span class="nx">html</span><span class="o">.</span><span class="nx">php</span> <span class="o">--&gt;</span>
<span class="o">&lt;?</span><span class="nx">php</span> <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">extend</span><span class="p">(</span><span class="s1">&#39;AcmeArticleBundle::layout.html.php&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>

<span class="cp">&lt;?php</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;slots&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">start</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;h1&gt;Recent Articles&lt;/h1&gt;</span>

<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$articles</span> <span class="k">as</span> <span class="nv">$article</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;AcmeArticleBundle:Article:articleDetails.html.php&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;article&#39;</span> <span class="o">=&gt;</span> <span class="nv">$article</span><span class="p">))</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="cp">&lt;?php</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;slots&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">stop</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>O template é incluído usando a tag <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">include</span> <span class="pre">%}</span></tt>. Perceba que o
nome do template segue a mesma convenção típica. O template <tt class="docutils literal"><span class="pre">articleDetails.html.twig</span></tt>
usa uma variável <tt class="docutils literal"><span class="pre">article</span></tt>. Isso é passado por um template <tt class="docutils literal"><span class="pre">list.html.twig</span></tt>
usando o comando <tt class="docutils literal"><span class="pre">with</span></tt>.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">A sintaxe <tt class="docutils literal"><span class="pre">{'article':</span> <span class="pre">article}</span></tt> é a sintaxe Twig padrão para hash
maps (ex:  um array com chaves nomeadas). Se nós precisarmos passá-lo em elementos
múltiplos, ele poderia ser algo como: <tt class="docutils literal"><span class="pre">{'foo':</span> <span class="pre">foo,</span> <span class="pre">'bar':</span> <span class="pre">bar}</span></tt>.</p>
</div>
</div>
<div class="section" id="incorporacao-de-controllers">
<span id="templating-embedding-controller"></span><span id="index-8"></span><h3>Incorporação de Controllers<a class="headerlink" href="#incorporacao-de-controllers" title="Permalink to this headline">¶</a></h3>
<p>Em alguns casos, você precisa fazer mais do que incluir um template simples. Suponha
que você tenha uma barra lateral no seu layout que contenha os três artigos mais recentes.
Recuperar os três artigos podem incluir consultar a base de dados ou desempenhar
outra lógica pesada que não pode ser a partir de um template.</p>
<p>A solução é simplesmnte incorporar o resultado de um controller inteiro para
seu template. Primeiro, crie o controller que retorne um certo número de artigos
recentes :</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/Acme/ArticleBundle/Controller/ArticleController.php</span>

<span class="k">class</span> <span class="nc">ArticleController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">recentArticlesAction</span><span class="p">(</span><span class="nv">$max</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// make a database call or other logic to get the &quot;$max&quot; most recent articles</span>
        <span class="nv">$articles</span> <span class="o">=</span> <span class="o">...</span><span class="p">;</span>

        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;AcmeArticleBundle:Article:recentList.html.twig&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;articles&#39;</span> <span class="o">=&gt;</span> <span class="nv">$articles</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A template <tt class="docutils literal"><span class="pre">recentList</span></tt> é perfeitamente straightforward:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# src/Acme/ArticleBundle/Resources/views/Article/recentList.html.twig #}</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">article</span> <span class="k">in</span> <span class="nv">articles</span> <span class="cp">%}</span>
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/article/</span><span class="cp">{{</span> <span class="nv">article.slug</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
      <span class="cp">{{</span> <span class="nv">article.title</span> <span class="cp">}}</span>
  <span class="nt">&lt;/a&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;!--</span> <span class="nx">src</span><span class="o">/</span><span class="nx">Acme</span><span class="o">/</span><span class="nx">ArticleBundle</span><span class="o">/</span><span class="nx">Resources</span><span class="o">/</span><span class="nx">views</span><span class="o">/</span><span class="nx">Article</span><span class="o">/</span><span class="nx">recentList</span><span class="o">.</span><span class="nx">html</span><span class="o">.</span><span class="nx">php</span> <span class="o">--&gt;</span>
<span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$articles</span> <span class="k">as</span> <span class="nv">$article</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;a href=&quot;/article/</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$article</span><span class="o">-&gt;</span><span class="na">getSlug</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x">&quot;&gt;</span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$article</span><span class="o">-&gt;</span><span class="na">getTitle</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;/a&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Perceba que nós fizemos uma gambiarra e fizemos um hardcode no artigo URL desse exemplo
(ex: <tt class="docutils literal"><span class="pre">/article/*slug*</span></tt>). Isso é uma prática ruim. Na próxima seção,
você irá aprender como fazer isso corretamente.</p>
</div>
<p>Para incluir um controller, você irá precisar referir a ela usando a sintaxe de string
padrão para controllers (isto é, <strong>bundle</strong>:<strong>controller</strong>:<strong>action</strong>):</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# app/Resources/views/base.html.twig #}</span>
...

<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;sidebar&quot;</span><span class="nt">&gt;</span>
    <span class="cp">{%</span> <span class="k">render</span> <span class="s2">&quot;AcmeArticleBundle:Article:recentArticles&quot;</span> <span class="k">with</span> <span class="o">{</span><span class="s1">&#39;max&#39;</span><span class="o">:</span> <span class="m">3</span><span class="o">}</span> <span class="cp">%}</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;!--</span> <span class="nx">app</span><span class="o">/</span><span class="nx">Resources</span><span class="o">/</span><span class="nx">views</span><span class="o">/</span><span class="nx">base</span><span class="o">.</span><span class="nx">html</span><span class="o">.</span><span class="nx">php</span> <span class="o">--&gt;</span>
<span class="o">...</span>

<span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;sidebar&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;actions&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;AcmeArticleBundle:Article:recentArticles&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;max&#39;</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">))</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;/div&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Sempre quando você pensar que você precisa de uma variável ou uma peça de informação que
você não tenha acesso em um template, considere transformar o controller.
Controllers são rápidos para executar e promovem uma boa organização e utilização do código.</p>
</div>
<div class="section" id="conteudo-assincrono-com-hinclude-js">
<h3>Conteúdo Assíncrono com hinclude.js<a class="headerlink" href="#conteudo-assincrono-com-hinclude-js" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.1: </span>suporte ao hinclude.js foi adicionado no Symfony 2.1</p>
</div>
<p>Os controladores podem ser incorporados assíncronamente usando a biblioteca javascript <a href="#id7"><span class="problematic" id="id8">hinclude.js_</span></a>.
Como o conteúdo incorporado vêm de outra página (ou controlador, neste assunto), o Symfony2 usa o
helper padrão <tt class="docutils literal"><span class="pre">render</span></tt> para configurar tags <tt class="docutils literal"><span class="pre">hinclude</span></tt>:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">render</span> <span class="s1">&#39;...:news&#39;</span> <span class="k">with</span> <span class="o">{},</span> <span class="o">{</span><span class="s1">&#39;standalone&#39;</span><span class="o">:</span> <span class="s1">&#39;js&#39;</span><span class="o">}</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;actions&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;...:news&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(),</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;standalone&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;js&#39;</span><span class="p">))</span> <span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><a href="#id9"><span class="problematic" id="id10">hinclude.js_</span></a>  nprecisa ser incluído em sua página para funcionar.</p>
</div>
<p>Conteúdo padrão (enquanto carregar ou se o javascript está desabilitado) pode ser definido globalmente
na configuração da sua aplicação:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">framework</span><span class="p-Indicator">:</span>
    <span class="c1"># ...</span>
    <span class="l-Scalar-Plain">templating</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">hinclude_default_template</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">AcmeDemoBundle::hinclude.html.twig</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/config.xml --&gt;</span>
<span class="nt">&lt;framework:config&gt;</span>
    <span class="nt">&lt;framework:templating</span> <span class="na">hinclude-default-template=</span><span class="s">&quot;AcmeDemoBundle::hinclude.html.twig&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/framework:config&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// app/config/config.php</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;framework&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="c1">// ...</span>
    <span class="s1">&#39;templating&#39;</span>      <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;hinclude_default_template&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;AcmeDemoBundle::hinclude.html.twig&#39;</span><span class="p">),</span>
    <span class="p">),</span>
<span class="p">));</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="vinculacao-as-paginas">
<span id="index-9"></span><h3>Vinculação às Páginas<a class="headerlink" href="#vinculacao-as-paginas" title="Permalink to this headline">¶</a></h3>
<p>Criar links para outras página em sua aplicação é uma das tarefas mais
comuns para um template. Ao invés de fazer um hardcode nas URLs nos templates, use a
função do Twig <tt class="docutils literal"><span class="pre">path</span></tt> (ou o helper <tt class="docutils literal"><span class="pre">router</span></tt> no PHP) para gerar URLs baseadas na
configuração de roteamento. Mais tarde, se você quiser modificar a URL de uma página
particular, tudo que você precisará fazer é mudar as configurações de roteamento; os
templates irão automatricamente gerar a nova URL.</p>
<p>Primeiro, vincule a página &#8220;_welcome&#8221; , que é acessível pela seguinte configuração de
roteamento:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">_welcome</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">/</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeDemoBundle</span><span class="p-Indicator">:</span><span class="nv">Welcome</span><span class="p-Indicator">:</span><span class="nv">index</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;_welcome&quot;</span> <span class="na">pattern=</span><span class="s">&quot;/&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_controller&quot;</span><span class="nt">&gt;</span>AcmeDemoBundle:Welcome:index<span class="nt">&lt;/default&gt;</span>
<span class="nt">&lt;/route&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="nv">$collection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RouteCollection</span><span class="p">();</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;_welcome&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AcmeDemoBundle:Welcome:index&#39;</span><span class="p">,</span>
<span class="p">)));</span>

<span class="k">return</span> <span class="nv">$collection</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Para vincular à página, apenas use a função Twig <tt class="docutils literal"><span class="pre">path</span></tt> e refira para a rota:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">path</span><span class="o">(</span><span class="s1">&#39;_welcome&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo </span><span class="si">$view[&#39;router&#39;]</span><span class="s2">-&gt;generate(&#39;_welcome&#39;) ?&gt;&quot;</span><span class="o">&gt;</span><span class="nx">Home</span><span class="o">&lt;/</span><span class="nx">a</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Como esperado, isso irá gerar a URL <tt class="docutils literal"><span class="pre">/</span></tt>. Vamos ver como isso irá funcionar com
uma rota mais complicada:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">article_show</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">/article/{slug}</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeArticleBundle</span><span class="p-Indicator">:</span><span class="nv">Article</span><span class="p-Indicator">:</span><span class="nv">show</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;article_show&quot;</span> <span class="na">pattern=</span><span class="s">&quot;/article/{slug}&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_controller&quot;</span><span class="nt">&gt;</span>AcmeArticleBundle:Article:show<span class="nt">&lt;/default&gt;</span>
<span class="nt">&lt;/route&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="nv">$collection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RouteCollection</span><span class="p">();</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;article_show&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span><span class="s1">&#39;/article/{slug}&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AcmeArticleBundle:Article:show&#39;</span><span class="p">,</span>
<span class="p">)));</span>

<span class="k">return</span> <span class="nv">$collection</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Neste caso, você precisa especificar tanto o nome da rota (<tt class="docutils literal"><span class="pre">article_show</span></tt>) como
um valor para o parâmetro <tt class="docutils literal"><span class="pre">{slug}</span></tt>. Usando esta rota, vamos revisitar o
template <tt class="docutils literal"><span class="pre">recentList</span></tt> da sessão anterior e vincular aos artigos
corretamente:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# src/Acme/ArticleBundle/Resources/views/Article/recentList.html.twig #}</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">article</span> <span class="k">in</span> <span class="nv">articles</span> <span class="cp">%}</span>
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">path</span><span class="o">(</span><span class="s1">&#39;article_show&#39;</span><span class="o">,</span> <span class="o">{</span> <span class="s1">&#39;slug&#39;</span><span class="o">:</span> <span class="nv">article.slug</span> <span class="o">})</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
      <span class="cp">{{</span> <span class="nv">article.title</span> <span class="cp">}}</span>
  <span class="nt">&lt;/a&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;!--</span> <span class="nx">src</span><span class="o">/</span><span class="nx">Acme</span><span class="o">/</span><span class="nx">ArticleBundle</span><span class="o">/</span><span class="nx">Resources</span><span class="o">/</span><span class="nx">views</span><span class="o">/</span><span class="nx">Article</span><span class="o">/</span><span class="nx">recentList</span><span class="o">.</span><span class="nx">html</span><span class="o">.</span><span class="nx">php</span> <span class="o">--&gt;</span>
<span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$articles</span> <span class="nx">in</span> <span class="nv">$article</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;a href=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;router&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="s1">&#39;article_show&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;slug&#39;</span> <span class="o">=&gt;</span> <span class="nv">$article</span><span class="o">-&gt;</span><span class="na">getSlug</span><span class="p">())</span> <span class="cp">?&gt;</span><span class="x">&quot;&gt;</span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$article</span><span class="o">-&gt;</span><span class="na">getTitle</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;/a&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>Você também pode gerar uma URL absoluta ao usar a função <tt class="docutils literal"><span class="pre">url</span></tt> do Twig:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">url</span><span class="o">(</span><span class="s1">&#39;_welcome&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;</span>
</pre></div>
</div>
<p>O mesmo pode ser feito em templates PHP ao passar um terceiro argumento ao
método <tt class="docutils literal"><span class="pre">generate()</span></tt>:</p>
<div class="last highlight-php"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo </span><span class="si">$view[&#39;router&#39;]</span><span class="s2">-&gt;generate(&#39;_welcome&#39;, array(), true) ?&gt;&quot;</span><span class="o">&gt;</span><span class="nx">Home</span><span class="o">&lt;/</span><span class="nx">a</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="vinculando-os-assets">
<span id="index-10"></span><h3>Vinculando os Assets<a class="headerlink" href="#vinculando-os-assets" title="Permalink to this headline">¶</a></h3>
<p>Templates podem frequentemente referir a imagens, Javascript, folhas de estilo e outros
recursos. Claro você poderia fazer um hardcode do atalho desses assets (ex: <tt class="docutils literal"><span class="pre">/images/logo.png</span></tt>),
mas Symfony2 providencia uma opção mais dinâmica via função <tt class="docutils literal"><span class="pre">assets</span></tt> do Twig:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">asset</span><span class="o">(</span><span class="s1">&#39;images/logo.png&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">alt=</span><span class="s">&quot;Symfony!&quot;</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">asset</span><span class="o">(</span><span class="s1">&#39;css/blog.css&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">img</span> <span class="nx">src</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo </span><span class="si">$view[&#39;assets&#39;]</span><span class="s2">-&gt;getUrl(&#39;images/logo.png&#39;) ?&gt;&quot;</span> <span class="nx">alt</span><span class="o">=</span><span class="s2">&quot;Symfony!&quot;</span> <span class="o">/&gt;</span>

<span class="o">&lt;</span><span class="nb">link</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo </span><span class="si">$view[&#39;assets&#39;]</span><span class="s2">-&gt;getUrl(&#39;css/blog.css&#39;) ?&gt;&quot;</span> <span class="nx">rel</span><span class="o">=</span><span class="s2">&quot;stylesheet&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text/css&quot;</span> <span class="o">/&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>O principal propósito da função <tt class="docutils literal"><span class="pre">asset</span></tt> é tornar sua aplicação mais portátil.
Se sua aplicação reside na raiz do seu host (ex: <a class="reference external" href="http://example.com">http://example.com</a>),
então os atalhos interpretados deveriam ser <tt class="docutils literal"><span class="pre">/images/logo.png</span></tt>. Mas se sua aplicação
reside em um sub-diretório (ex: <a class="reference external" href="http://example.com/my_app">http://example.com/my_app</a>), cada caminho do asset
deveria interpretar com o diretório (e.g. <tt class="docutils literal"><span class="pre">/my_app/images/logo.png</span></tt>). A função
<tt class="docutils literal"><span class="pre">asset</span></tt> toma conta disto ao determinar como sua aplicação está
sendo usada e gerando os atalhos de acordo com o correto.</p>
<p>Adicionalmente, se você usar função asset, Symfony pode automaticamente
anexar uma string de consulta para asset, em detrimento de garantir que assets
estáticos atualizados não serão armazenados quando distribuídos. Por exemplo, <tt class="docutils literal"><span class="pre">/images/logo.png</span></tt> poderia
parecer como <tt class="docutils literal"><span class="pre">/images/logo.png?v2</span></tt>. Para mais informações, veja a opção de configuração
<em class="xref std std-ref">ref-framework-assets-version</em>.</p>
</div>
</div>
<div class="section" id="incluindo-folhas-de-estilo-e-javascript-no-twig">
<span id="index-11"></span><h2>Incluindo Folhas de Estilo e Javascript no Twig<a class="headerlink" href="#incluindo-folhas-de-estilo-e-javascript-no-twig" title="Permalink to this headline">¶</a></h2>
<p>Nenhum site seria completo sem incluir arquivos Javascript e folhas de estilo.
Em Symfony, a inclusão desses assets é elegantemente manipulada ao tirar
vantagem das heranças de template do Symfony.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Esta seção irá ensinar você a filosofia por trás disto, incluindo folha de estilo
e asset Javascript em Symfony. Symfony também engloba outra biblioteca,
chamada Assetic, que segue essa filosofia mas também permite você fazer mais coisas
muito interessantes com esses assets. Para mais informações sobre
usar Assetic veja <a class="reference internal" href="../cookbook/assetic/asset_management.html"><em>Como usar o Assetic para o Gerenciamento de Assets</em></a>.</p>
</div>
<p>Comece adicionando dois blocos a seu template base que irá abrigar seus assets:
uma chamada  <tt class="docutils literal"><span class="pre">stylesheets</span></tt> dentro da tag <tt class="docutils literal"><span class="pre">head</span></tt> e outra chamada <tt class="docutils literal"><span class="pre">javascripts</span></tt>
justamente acima do fechamento da tag <tt class="docutils literal"><span class="pre">body</span></tt>. Esses blocos irão conter todas as
folhas de estilo e Javascripts que você irá precisar através do seu site:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# &#39;app/Resources/views/base.html.twig&#39; #}</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="c">{# ... #}</span>

        <span class="cp">{%</span> <span class="k">block</span> <span class="nv">stylesheets</span> <span class="cp">%}</span>
            <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">asset</span><span class="o">(</span><span class="s1">&#39;/css/main.css&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="nt">/&gt;</span>
        <span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="c">{# ... #}</span>

        <span class="cp">{%</span> <span class="k">block</span> <span class="nv">javascripts</span> <span class="cp">%}</span>
            <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">asset</span><span class="o">(</span><span class="s1">&#39;/js/main.js&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>Isso é fácil o bastante ! Mas e se você precisar incluir uma folha de estilo ou
Javascript de um template filho ? Por exemplo, suponha que você tenha uma página
de contatos e você precise incluir uma folha de estilo <tt class="docutils literal"><span class="pre">contact.css</span></tt> <em>bem</em> naquela
página. Dentro do template da página de contatos, faça o seguinte:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# src/Acme/DemoBundle/Resources/views/Contact/contact.html.twig #}</span>
<span class="c">{# extends &#39;::base.html.twig&#39; #}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">stylesheets</span> <span class="cp">%}</span>
    <span class="cp">{{</span> <span class="nv">parent</span><span class="o">()</span> <span class="cp">}}</span>

    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">asset</span><span class="o">(</span><span class="s1">&#39;/css/contact.css&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="nt">/&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>

<span class="c">{# ... #}</span>
</pre></div>
</div>
<p>No template filho, você simplesmente sobrepõe o bloco <tt class="docutils literal"><span class="pre">stylesheets</span></tt> e
coloca sua nova tag de folha de estilo dentro daquele bloco. Claro, desde que você queira
adicionar ao conteúdo do bloco pai (e realmente não irá <a href="#id1"><span class="problematic" id="id2">*</span></a>substituí-lo), você
deveria usar a função <tt class="docutils literal"><span class="pre">parent()</span></tt> do Twig function para incluir tudo do bloco <tt class="docutils literal"><span class="pre">stylesheets</span></tt>
do template base.</p>
<p>Você pode também incluir assets localizados em seus arquivos de pacotes <tt class="docutils literal"><span class="pre">Resources/public</span></tt>.
Você precisará executar o comando``php app/console assets:install target [&#8211;symlink]`` ,
que move (ou symlinks) arquivos dentro da localização correta.
(target é sempre por padrão &#8220;web).</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">asset</span><span class="o">(</span><span class="s1">&#39;bundles/acmedemo/css/contact.css&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p>O resultado final é uma página que inclui ambas as folhas de estilo
<tt class="docutils literal"><span class="pre">main.css</span></tt> e <tt class="docutils literal"><span class="pre">contact.css</span></tt>.</p>
</div>
<div class="section" id="configurando-e-usando-o-servico-templating">
<span id="index-12"></span><h2>Configurando e usando o Serviço <tt class="docutils literal"><span class="pre">templating</span></tt><a class="headerlink" href="#configurando-e-usando-o-servico-templating" title="Permalink to this headline">¶</a></h2>
<p>O coração do sistema de template em Symfony2 é o template <tt class="docutils literal"><span class="pre">Engine</span></tt>.
Este objeto especial é responsável por manipular templates e retornar
o conteúdo deles. Quando você manipula um template em um controller, por exemplo,
você está na verdade usando o serviço do template engine. Por exemplo:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;AcmeArticleBundle:Article:index.html.twig&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>é equivalente a:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$engine</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">container</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;templating&#39;</span><span class="p">);</span>
<span class="nv">$content</span> <span class="o">=</span> <span class="nv">$engine</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;AcmeArticleBundle:Article:index.html.twig&#39;</span><span class="p">);</span>

<span class="k">return</span> <span class="nv">$response</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="nv">$content</span><span class="p">);</span>
</pre></div>
</div>
<p id="template-configuration">O engine de template (ou &#8220;serviço&#8221;) é pré-configurada para trabalhar automaticamente
dentro de Symfony2. Ele pode, claro, ser configurado mais adiante no arquivo
de configuração da aplicação:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">framework</span><span class="p-Indicator">:</span>
    <span class="c1"># ...</span>
    <span class="l-Scalar-Plain">templating</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">engines</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="s">&#39;twig&#39;</span><span class="p-Indicator">]</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/config.xml --&gt;</span>
<span class="nt">&lt;framework:templating&gt;</span>
    <span class="nt">&lt;framework:engine</span> <span class="na">id=</span><span class="s">&quot;twig&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/framework:templating&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// app/config/config.php</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;framework&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="c1">// ...</span>
    <span class="s1">&#39;templating&#39;</span>      <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;engines&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;twig&#39;</span><span class="p">),</span>
    <span class="p">),</span>
<span class="p">));</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Várias opções de configuração estão disponíveis e estão cobertos em
<tt class="xref doc docutils literal"><span class="pre">Configuration</span> <span class="pre">Appendix</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">O engine <tt class="docutils literal"><span class="pre">twig</span></tt> é obrigatório para usar o webprofiler (bem como outros
pacotes de terceiros).</p>
</div>
</div>
<div class="section" id="sobrepondo-templates-de-pacote">
<span id="overriding-bundle-templates"></span><span id="index-13"></span><h2>Sobrepondo Templates de Pacote<a class="headerlink" href="#sobrepondo-templates-de-pacote" title="Permalink to this headline">¶</a></h2>
<p>A comunidade Symfony2 orgulha-se de si própria em criar e manter pacotes
de alta qualidade (veja <a class="reference external" href="http://symfony2bundles.org">Symfony2Bundles.org</a>) para um grande número de funcionalidades diferentes.
Uma vez que você use um pacote de terceiros, você irá certamente precisar sobrepor e personalizar
um ou mais de seus templates.</p>
<p>Suponha que você incluiu o imaginário open-source <tt class="docutils literal"><span class="pre">AcmeBlogBundle</span></tt> em seu
projeto (ex: no diretório <tt class="docutils literal"><span class="pre">src/Acme/BlogBundle</span></tt>). E enquanto você estiver
realmente feliz com tudo, você quer sobrepor  a página de &#8220;lista&#8221; do blog para
personalizar a marcação especificamente para sua aplicação. Ao se aprofundar no
controller <tt class="docutils literal"><span class="pre">Blog</span></tt> eo <tt class="docutils literal"><span class="pre">AcmeBlogBundle</span></tt>, você encontrará o seguinte:</p>
<div class="highlight-python"><div class="highlight"><pre>public function indexAction()
{
    $blogs = // some logic to retrieve the blogs

    $this-&gt;render(&#39;AcmeBlogBundle:Blog:index.html.twig&#39;, array(&#39;blogs&#39; =&gt; $blogs));
}
</pre></div>
</div>
<p>Quando <tt class="docutils literal"><span class="pre">AcmeBlogBundle:Blog:index.html.twig</span></tt> é manipulado, Symfony2 realmente
observa duas diferentes localizações para o template:</p>
<ol class="arabic simple">
<li><tt class="docutils literal"><span class="pre">app/Resources/AcmeBlogBundle/views/Blog/index.html.twig</span></tt></li>
<li><tt class="docutils literal"><span class="pre">src/Acme/BlogBundle/Resources/views/Blog/index.html.twig</span></tt></li>
</ol>
<p>Para sobrepor o template de pacote, só copie o template <tt class="docutils literal"><span class="pre">index.html.twig</span></tt>
do pacote para  <tt class="docutils literal"><span class="pre">app/Resources/AcmeBlogBundle/views/Blog/index.html.twig</span></tt>
(o diretório <tt class="docutils literal"><span class="pre">app/Resources/AcmeBlogBundle</span></tt> não existirão, então você precisará
criá-lo). Você está livre agora para personalizar o template.</p>
<p>Esta lógica também se aplica a templates de pacote base. Suponha também que cada
template em  <tt class="docutils literal"><span class="pre">AcmeBlogBundle</span></tt> herda de um template base chamado
<tt class="docutils literal"><span class="pre">AcmeBlogBundle::layout.html.twig</span></tt>. Justo como antes, Symfony2 irá observar os
seguintes dois lugares para o template:</p>
<ol class="arabic simple">
<li><tt class="docutils literal"><span class="pre">app/Resources/AcmeBlogBundle/views/layout.html.twig</span></tt></li>
<li><tt class="docutils literal"><span class="pre">src/Acme/BlogBundle/Resources/views/layout.html.twig</span></tt></li>
</ol>
<p>Uma vez novamente, para sobrepor o template, apenas copie ele para
<tt class="docutils literal"><span class="pre">app/Resources/AcmeBlogBundle/views/layout.html.twig</span></tt>. Você agora está livre para
personalizar esta cópia como você quiser.</p>
<p>Se você voltar um passo atrás, verá que Symfony2 sempre começa a observar no
diretório <tt class="docutils literal"><span class="pre">app/Resources/{BUNDLE_NAME}/views/</span></tt> por um template. Se o
template não existe aqui, ele continua checando dentro do diretório
<tt class="docutils literal"><span class="pre">Resources/views</span></tt> do próprio pacote. Isso significa que todos os templates
do pacote podem ser sobrepostos ao colocá-los no sub-diretório correto
<tt class="docutils literal"><span class="pre">app/Resources</span></tt>.</p>
<span class="target" id="templating-overriding-core-templates"></span><div class="section" id="sobrepondo-templates-centrais">
<span id="index-14"></span><h3>Sobrepondo Templates Centrais<a class="headerlink" href="#sobrepondo-templates-centrais" title="Permalink to this headline">¶</a></h3>
<p>Como o framework Symfony é um pacote por si só, templates centrais podem ser
sobrepostos da mesma forma. Por exemplo, o núcleo <tt class="docutils literal"><span class="pre">TwigBundle</span></tt> contém
um númeto de diferentes templates &#8220;exception&#8221; e &#8220;error&#8221; que podem ser sobrepostas
ao copiar cada uma do diretório <tt class="docutils literal"><span class="pre">Resources/views/Exception</span></tt> do <tt class="docutils literal"><span class="pre">TwigBundle</span></tt>
para, você adivinhou, o diretório
<tt class="docutils literal"><span class="pre">app/Resources/TwigBundle/views/Exception</span></tt> .</p>
</div>
</div>
<div class="section" id="heranca-de-tres-niveis">
<span id="index-15"></span><h2>Herança de Três Níveis<a class="headerlink" href="#heranca-de-tres-niveis" title="Permalink to this headline">¶</a></h2>
<p>Um modo comum de usar herança é usar uma aproximação em três níveis. Este
método trabalha perfeitamente com três tipos diferentes de templates que nós
certamente cobrimos:</p>
<ul>
<li><p class="first">Criar um arquivo <tt class="docutils literal"><span class="pre">app/Resources/views/base.html.twig</span></tt> que contém o layout
principal para sua aplicação (como nos exemplos anteriores). Internamente, este
template é chamado <tt class="docutils literal"><span class="pre">::base.html.twig</span></tt>;</p>
</li>
<li><p class="first">Cria um template para cada &#8220;seção&#8221; do seu site. Por exemplo, um <tt class="docutils literal"><span class="pre">AcmeBlogBundle</span></tt>,
teria um template chamado <tt class="docutils literal"><span class="pre">AcmeBlogBundle::layout.html.twig</span></tt> que contém somente
elementos específicos para a sessão no blog:</p>
<blockquote>
<div><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# src/Acme/BlogBundle/Resources/views/layout.html.twig #}</span>
<span class="cp">{%</span> <span class="k">extends</span> <span class="s1">&#39;::base.html.twig&#39;</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">body</span> <span class="cp">%}</span>
    <span class="nt">&lt;h1&gt;</span>Blog Application<span class="nt">&lt;/h1&gt;</span>

    <span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Criar templates individuais para cada página e fazer cada um estender a template
de sessão apropriada. Por exemplo, a página &#8220;index&#8221; deveria ser chamada de algo
próximo a <tt class="docutils literal"><span class="pre">AcmeBlogBundle:Blog:index.html.twig</span></tt> e listar os blogs de posts reais.</p>
<blockquote>
<div><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# src/Acme/BlogBundle/Resources/views/Blog/index.html.twig #}</span>
<span class="cp">{%</span> <span class="k">extends</span> <span class="s1">&#39;AcmeBlogBundle::layout.html.twig&#39;</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">entry</span> <span class="k">in</span> <span class="nv">blog_entries</span> <span class="cp">%}</span>
        <span class="nt">&lt;h2&gt;</span><span class="cp">{{</span> <span class="nv">entry.title</span> <span class="cp">}}</span><span class="nt">&lt;/h2&gt;</span>
        <span class="nt">&lt;p&gt;</span><span class="cp">{{</span> <span class="nv">entry.body</span> <span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<p>Perceba que este template estende a template de sessão - (<tt class="docutils literal"><span class="pre">AcmeBlogBundle::layout.html.twig</span></tt>)
que por sua vez estende o layout de aplicação base (<tt class="docutils literal"><span class="pre">::base.html.twig</span></tt>).
Isso é o modelo comum de herança de três níveis.</p>
<p>Quando construir sua aplicação, você pode escolher seguir esse método ou simplesmente
tornar cada template de página estender a template de aplicação base diretamente
(ex: <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">extends</span> <span class="pre">'::base.html.twig'</span> <span class="pre">%}</span></tt>). O modelo de três templates é
o método de melhor prática usado por vendor bundles então aquele template
base para um pacote pode ser facilmente sobreposto para propriamente estender seu
layout base de aplicação.</p>
</div>
<div class="section" id="saida-para-escape">
<span id="index-16"></span><h2>Saída para escape<a class="headerlink" href="#saida-para-escape" title="Permalink to this headline">¶</a></h2>
<p>Quando gerar HTML de um template, sempre há um risco que uma variável de
template pode gerar HTML involutário ou codigo do lado cliente perigoso. O resultado
é que o conteúdo dinâmico poderia quebrar o HTML de uma página de resultados ou
permitir um usuário maldoso realizar um ataque <a class="reference external" href="http://en.wikipedia.org/wiki/Cross-site_scripting">Cross Site Scripting</a> (XSS). Considere
esse exemplo clássico:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-jinja"><div class="highlight"><pre><span class="x">Hello </span><span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="nx">Hello</span> <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nv">$name</span> <span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Imagine que o usuário entre o seguinte código como o nome dele/dela:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;script&gt;alert(&#39;hello!&#39;)&lt;/script&gt;
</pre></div>
</div>
<p>Sem qualquer outra saída de escape, o resultado da template irá causar uma caixa de alerta
em JavaScript para saltar na tela:</p>
<div class="highlight-python"><div class="highlight"><pre>Hello &lt;script&gt;alert(&#39;hello!&#39;)&lt;/script&gt;
</pre></div>
</div>
<p>E enquanto isso parece inofensivo, se um usuário pode chegar tão longe, o
mesmo usuário deveria também ser capaz de escrever Javascript que realiza
ações maliciosas dentro de uma área segura de um usuário legítimo e desconhecido.</p>
<p>A resposta para o problema é saída para escape. Sem a saída para escape ativa,
o mesmo template irá manipular inofensivamente, e literalmente imprimir a tag
<tt class="docutils literal"><span class="pre">script</span></tt> na tela:</p>
<div class="highlight-python"><div class="highlight"><pre>Hello &amp;lt;script&amp;gt;alert(&amp;#39;helloe&amp;#39;)&amp;lt;/script&amp;gt;
</pre></div>
</div>
<p>Os sistemas de templating Twig e PHP aproximam-se do problema de formas diferentes.
Se você está usando Twig, saída para escape é ativado por padrão e você está protegido.
Em PHP, saída para escape não é automático, significando que você precisará manualmente
fazer o escape quando necessário.</p>
<div class="section" id="saida-para-escape-em-twig">
<h3>Saída para escape em Twig<a class="headerlink" href="#saida-para-escape-em-twig" title="Permalink to this headline">¶</a></h3>
<p>Se você está usando templates Twig, então saída para escape é ativado por padrão. Isto
significa que você está protegido externamente de consequencias acidentais por código
submetido por usuário. Por padrão, a saída para escape assume que o conteúdo está
sendo escapado pela saída HTML.</p>
<p>Em alguns casos, você precisará desabilitar saída para escape quando você está manipulando
uma variável que é confiável e contém marcação que não poderia ter escape.
Suponha que usuários administrativos são capazes de escrever artigos que contenham
código HTML. Por padrão, Twig irá escapar o corpo do artigo. Para fazê-lo normalamente,
adicione o filtro <tt class="docutils literal"><span class="pre">raw</span></tt>: <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">article.body</span> <span class="pre">|</span> <span class="pre">raw</span> <span class="pre">}}</span></tt>.</p>
<p>Você pode também desabilitar saída para escape dentro de uma área <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">block</span> <span class="pre">%}</span></tt> ou
para um template inteiro. Para mais informações, veja <a class="reference external" href="http://twig.sensiolabs.org">Output Escaping</a> na
documentação do Twig.</p>
</div>
<div class="section" id="saida-para-escape-em-php">
<h3>Saída para escape em PHP<a class="headerlink" href="#saida-para-escape-em-php" title="Permalink to this headline">¶</a></h3>
<p>Saída para escape não é automática quando usamos templates PHP. Isso significa
que a menos que você escolha escapar uma variável explicitamente, você não está
protegido. Para usar saída para escape use o método de view <tt class="docutils literal"><span class="pre">escape()</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>Hello &lt;?php echo $view-&gt;escape($name) ?&gt;
</pre></div>
</div>
<p>Por padrão, o método <tt class="docutils literal"><span class="pre">escape()</span></tt> assume que a variável está sendo manipulada
dentro de um contexto HTML (e assim a variável escapa e está segura para o HTML).
O segundo argumento deixa você mudar o contexto. Por exemplo, para gerar algo
em uma string Javascript, use o contexto <tt class="docutils literal"><span class="pre">js</span></tt> :</p>
<div class="highlight-js"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">myMsg</span> <span class="o">=</span> <span class="s1">&#39;Hello &lt;?php echo $view-&gt;escape($name, &#39;</span><span class="nx">js</span><span class="s1">&#39;) ?&gt;&#39;</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="debugging">
<span id="template-formats"></span><span id="index-17"></span><h2>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.9: </span>Esta funcionalidade está disponível no Twig <tt class="docutils literal"><span class="pre">1.5.x</span></tt>, e foi adicionada primeiramente
no Symfony 2.0.9.</p>
</div>
<p>Ao utilizar o PHP, você pode usar o <tt class="docutils literal"><span class="pre">var_dump()</span></tt> se precisa encontrar rapidamente
o valor de uma variável passada. Isso é útil, por exemplo, dentro de seu controlador.
O mesmo pode ser conseguido ao usar o Twig com a extensão de depuração. Esta extensão
precisa ser ativada na configuração:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">services</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">acme_hello.twig.extension.debug</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">class</span><span class="p-Indicator">:</span>        <span class="l-Scalar-Plain">Twig_Extension_Debug</span>
        <span class="l-Scalar-Plain">tags</span><span class="p-Indicator">:</span>
             <span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">name</span><span class="p-Indicator">:</span> <span class="s">&#39;twig.extension&#39;</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/config.xml --&gt;</span>
<span class="nt">&lt;services&gt;</span>
    <span class="nt">&lt;service</span> <span class="na">id=</span><span class="s">&quot;acme_hello.twig.extension.debug&quot;</span> <span class="na">class=</span><span class="s">&quot;Twig_Extension_Debug&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;tag</span> <span class="na">name=</span><span class="s">&quot;twig.extension&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/service&gt;</span>
<span class="nt">&lt;/services&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// app/config/config.php</span>
<span class="k">use</span> <span class="nx">Symfony\Component\DependencyInjection\Definition</span><span class="p">;</span>

<span class="nv">$definition</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Definition</span><span class="p">(</span><span class="s1">&#39;Twig_Extension_Debug&#39;</span><span class="p">);</span>
<span class="nv">$definition</span><span class="o">-&gt;</span><span class="na">addTag</span><span class="p">(</span><span class="s1">&#39;twig.extension&#39;</span><span class="p">);</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">setDefinition</span><span class="p">(</span><span class="s1">&#39;acme_hello.twig.extension.debug&#39;</span><span class="p">,</span> <span class="nv">$definition</span><span class="p">);</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>O dump dos parâmetros do template pode ser feito usando a função <tt class="docutils literal"><span class="pre">dump</span></tt>:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# src/Acme/ArticleBundle/Resources/views/Article/recentList.html.twig #}</span>
<span class="cp">{{</span> <span class="nv">dump</span><span class="o">(</span><span class="nv">articles</span><span class="o">)</span> <span class="cp">}}</span>

<span class="cp">{%</span> <span class="k">for</span> <span class="nv">article</span> <span class="k">in</span> <span class="nv">articles</span> <span class="cp">%}</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/article/</span><span class="cp">{{</span> <span class="nv">article.slug</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
        <span class="cp">{{</span> <span class="nv">article.title</span> <span class="cp">}}</span>
    <span class="nt">&lt;/a&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>O dump das variáveis somente será realizado se a definição <tt class="docutils literal"><span class="pre">debug</span></tt> do Twig (no <tt class="docutils literal"><span class="pre">config.yml</span></tt>)
for <tt class="docutils literal"><span class="pre">true</span></tt>. Por padrão, isto signifca que será feito o dump das variáveis no ambiente <tt class="docutils literal"><span class="pre">dev</span></tt>
mas não no <tt class="docutils literal"><span class="pre">prod</span></tt>.</p>
</div>
<div class="section" id="verificacao-de-sintaxe">
<h2>Verificação de Sintaxe<a class="headerlink" href="#verificacao-de-sintaxe" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.1: </span>O comando <tt class="docutils literal"><span class="pre">twig:lint</span></tt> foi adicionado no Symfony 2.1</p>
</div>
<p>Você pode verificar erros de sintaxe nos templates do Twig usando o
comando de console <tt class="docutils literal"><span class="pre">twig:lint</span></tt>:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c"># You can check by filename:</span>
<span class="nv">$ </span>php app/console twig:lint src/Acme/ArticleBundle/Resources/views/Article/recentList.html.twig

<span class="c"># or by directory:</span>
<span class="nv">$ </span>php app/console twig:lint src/Acme/ArticleBundle/Resources/views

<span class="c"># or using the bundle name:</span>
<span class="nv">$ </span>php app/console twig:lint @AcmeArticleBundle
</pre></div>
</div>
</div>
<div class="section" id="formatos-de-template">
<h2>Formatos de Template<a class="headerlink" href="#formatos-de-template" title="Permalink to this headline">¶</a></h2>
<p>Templates são uma forma genérica de modificar conteúdo em <em>qualquer</em> formato. E enquanto
em muitos casos você irá usar templates para modificar conteúdo HTML, um template pode
tão fácil como certo gerar JavaScript, CSS, XML ou qualquer outro formato que você possa sonhar.</p>
<p>Por exemplo, o mesmo &#8220;recurso&#8221; é sempre modificado em diversos formatos diferentes.
Para modificar uma página inicial de um artigo XML, simplesmente inclua o formato no
nome do template:</p>
<ul class="simple">
<li><em>nome do template XML</em>: <tt class="docutils literal"><span class="pre">AcmeArticleBundle:Article:index.xml.twig</span></tt></li>
<li><em>nome do arquivo do template XML</em>: <tt class="docutils literal"><span class="pre">index.xml.twig</span></tt></li>
</ul>
<p>Na realidade, isso é nada mais que uma convenção de nomeação e o template
não é realmente modificado de forma diferente ao baseado no formato dele.</p>
<p>Em muitos casos, você pode querer permitir um controller unitário para modificar
múltiplos formatos diferentes baseado no &#8220;formato de requisição&#8221;. Por aquela razão,
um padrão comum é fazer o seguinte:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$format</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getRequest</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getRequestFormat</span><span class="p">();</span>

    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;AcmeBlogBundle:Blog:index.&#39;</span><span class="o">.</span><span class="nv">$format</span><span class="o">.</span><span class="s1">&#39;.twig&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>O <tt class="docutils literal"><span class="pre">getRequestFormat</span></tt> no objeto <tt class="docutils literal"><span class="pre">Request</span></tt> padroniza para <tt class="docutils literal"><span class="pre">html</span></tt>,
mas pode retornar qualquer outro formato baseado no formato solicitado pelo usuário.
O formato solicitado é frequentemente mais gerenciado pelo roteamento, onde uma rota
pode ser configurada para que <tt class="docutils literal"><span class="pre">/contact</span></tt>  configure o formato requisitado <tt class="docutils literal"><span class="pre">html</span></tt> enquanto
<tt class="docutils literal"><span class="pre">/contact.xml</span></tt> configure o formato para <tt class="docutils literal"><span class="pre">xml</span></tt>. Para mais informações, veja
<a class="reference internal" href="routing.html#advanced-routing-example"><em>Advanced Example in the Routing chapter</em></a>.</p>
<p>Para criar links que incluam o parâmetro de formato, inclua uma chave <tt class="docutils literal"><span class="pre">_format</span></tt>
no detalhe do parâmetro:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">path</span><span class="o">(</span><span class="s1">&#39;article_show&#39;</span><span class="o">,</span> <span class="o">{</span><span class="s1">&#39;id&#39;</span><span class="o">:</span> <span class="m">123</span><span class="o">,</span> <span class="s1">&#39;_format&#39;</span><span class="o">:</span> <span class="s1">&#39;pdf&#39;</span><span class="o">})</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
    PDF Version
<span class="nt">&lt;/a&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-html+php"><div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;router&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="s1">&#39;article_show&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="mi">123</span><span class="p">,</span> <span class="s1">&#39;_format&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;pdf&#39;</span><span class="p">))</span> <span class="cp">?&gt;</span><span class="s">&quot;</span><span class="nt">&gt;</span>
    PDF Version
<span class="nt">&lt;/a&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="consideracoes-finais">
<h2>Considerações finais<a class="headerlink" href="#consideracoes-finais" title="Permalink to this headline">¶</a></h2>
<p>O engine de template em Symfony é uma ferramenta poderosa que pode ser usada cada momento
que você precisa para gerar conteúdo de apresentação em HTML, XML ou qualquer outro formato.
E apesar de tempaltes serem um jeito comum de gerar conteúdo em um controller,
o uso deles não são obrigatórios. O objeto <tt class="docutils literal"><span class="pre">Response</span></tt> object retornado por um controller
pode ser criado com ou sem o uso de um template:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// creates a Response object whose content is the rendered template</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;AcmeArticleBundle:Article:index.html.twig&#39;</span><span class="p">);</span>

<span class="c1">// creates a Response object whose content is simple text</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="s1">&#39;response content&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Engine de template do Symfony é muito flexível e dois editores de template
diferentes estão disponíveis por padrão: os tradicionais templates do <em>PHP</em> e os
polidos e poderosos templates do <em>Twig</em> . Ambos suportam uma hierarquia de template e
vêm empacotados com um conjunto rico de funções helper capazes de realizar
as tarefas mais comuns.</p>
<p>No geral, o tópico de template poderia ser pensado como uma ferramenta poderosa
que está à sua disposição. Em alguns casos, você pode não precisar modificar um template,
e em Symfony2, isso é absolutamente legal.</p>
</div>
<div class="section" id="aprenda-mais-do-cookbook">
<h2>Aprenda mais do Cookbook<a class="headerlink" href="#aprenda-mais-do-cookbook" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><tt class="xref doc docutils literal"><span class="pre">/cookbook/templating/PHP</span></tt></li>
<li><a class="reference internal" href="../cookbook/controller/error_pages.html"><em>Como personalizar as páginas de erro</em></a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Criando e usando Templates</a><ul>
<li><a class="reference internal" href="#templates">Templates</a><ul>
<li><a class="reference internal" href="#cache-do-template-twig">Cache do Template Twig</a></li>
</ul>
</li>
<li><a class="reference internal" href="#heranca-e-layouts-de-template">Herança e Layouts de Template</a></li>
<li><a class="reference internal" href="#nomeacao-de-template-e-localizacoes">Nomeação de Template e Localizações</a><ul>
<li><a class="reference internal" href="#sufixo-de-template">Sufixo de Template</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tags-e-helpers">Tags e Helpers</a><ul>
<li><a class="reference internal" href="#incluir-outras-templates">Incluir outras Templates</a></li>
<li><a class="reference internal" href="#incorporacao-de-controllers">Incorporação de Controllers</a></li>
<li><a class="reference internal" href="#conteudo-assincrono-com-hinclude-js">Conteúdo Assíncrono com hinclude.js</a></li>
<li><a class="reference internal" href="#vinculacao-as-paginas">Vinculação às Páginas</a></li>
<li><a class="reference internal" href="#vinculando-os-assets">Vinculando os Assets</a></li>
</ul>
</li>
<li><a class="reference internal" href="#incluindo-folhas-de-estilo-e-javascript-no-twig">Incluindo Folhas de Estilo e Javascript no Twig</a></li>
<li><a class="reference internal" href="#configurando-e-usando-o-servico-templating">Configurando e usando o Serviço <tt class="docutils literal"><span class="pre">templating</span></tt></a></li>
<li><a class="reference internal" href="#sobrepondo-templates-de-pacote">Sobrepondo Templates de Pacote</a><ul>
<li><a class="reference internal" href="#sobrepondo-templates-centrais">Sobrepondo Templates Centrais</a></li>
</ul>
</li>
<li><a class="reference internal" href="#heranca-de-tres-niveis">Herança de Três Níveis</a></li>
<li><a class="reference internal" href="#saida-para-escape">Saída para escape</a><ul>
<li><a class="reference internal" href="#saida-para-escape-em-twig">Saída para escape em Twig</a></li>
<li><a class="reference internal" href="#saida-para-escape-em-php">Saída para escape em PHP</a></li>
</ul>
</li>
<li><a class="reference internal" href="#debugging">Debugging</a></li>
<li><a class="reference internal" href="#verificacao-de-sintaxe">Verificação de Sintaxe</a></li>
<li><a class="reference internal" href="#formatos-de-template">Formatos de Template</a></li>
<li><a class="reference internal" href="#consideracoes-finais">Considerações finais</a></li>
<li><a class="reference internal" href="#aprenda-mais-do-cookbook">Aprenda mais do Cookbook</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="routing.html"
                        title="previous chapter">Roteamento</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="doctrine.html"
                        title="next chapter">Bancos de Dados e Doctrine</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/book/templating.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="doctrine.html" title="Bancos de Dados e Doctrine"
             >next</a> |</li>
        <li class="right" >
          <a href="routing.html" title="Roteamento"
             >previous</a> |</li>
        <li><a href="../index.html">Symfony2.4Docs 2.4 documentation</a> &raquo;</li>
          <li><a href="index.html" >Livro</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Symfony Team + Symfony pt_BR Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>