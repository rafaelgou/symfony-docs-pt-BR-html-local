

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Controlador &mdash; Symfony2Docs 2.0.x documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.x',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Symfony2Docs 2.0.x documentation" href="../index.html" />
    <link rel="up" title="Livro" href="index.html" />
    <link rel="next" title="Roteamento" href="routing.html" />
    <link rel="prev" title="Instalando e Configurando o Symfony" href="installation.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="routing.html" title="Roteamento"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Instalando e Configurando o Symfony"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Symfony2Docs 2.0.x documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Livro</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="controlador">
<span id="index-0"></span><h1>Controlador<a class="headerlink" href="#controlador" title="Permalink to this headline">¶</a></h1>
<p>Um controlador é uma função PHP que você cria e que pega informações da
requisição HTTP para criar e retornar uma resposta HTTP (como um objeto
<tt class="docutils literal"><span class="pre">Response</span></tt> do Symfony2). A resposta pode ser uma página HTML, um documento
XML, um array JSON serializado, uma imagem, um redirecionamento, um erro 404
ou qualquer coisa que você imaginar. O controlador contém toda e qualquer lógica
arbritária que <em>sua aplicação</em> precisa para renderizar o conteúdo de uma
página.</p>
<p>Para ver quão simples é isso, vamos ver um controlador do Symfony2 em ação.
O seguinte controlador deve renderizar uma página que mostra apenas
<tt class="docutils literal"><span class="pre">Hello</span> <span class="pre">world!</span></tt>:</p>
<blockquote>
<div><p>use SymfonyComponentHttpFoundationResponse;</p>
<p>public function helloAction()
{</p>
<blockquote>
<div>return new Response(&#8216;Hello world!&#8217;);</div></blockquote>
<p>}</p>
</div></blockquote>
<p>O objetivo de um controlador é sempre o mesmo: criar e retornar um objeto
<tt class="docutils literal"><span class="pre">Response</span></tt>. Ao longo do caminho, ele pode ler informações da requisição,
carregar um recurso do banco de dados, mandar um e-mail ou gravar informações
na sessão do usuário. Mas em todos os casos, o controlador acabará retornando
o objeto <tt class="docutils literal"><span class="pre">Response</span></tt> que será mandado de volta para o cliente.</p>
<p>Não há nenhuma mágica e nenhum outro requisito para se preocupar! Aqui temos
alguns exemplos comuns:</p>
<ul class="simple">
<li>O <em>Controlador A</em> prepara um objeto <tt class="docutils literal"><span class="pre">Response</span></tt> representando o conteúdo
da página inicial do site.</li>
<li>O <em>Controlador B</em> lê o parâmetro <tt class="docutils literal"><span class="pre">slug</span></tt> da requisição para carregar uma
entrada do blog no banco de dados e cria um um objeto <tt class="docutils literal"><span class="pre">Response</span></tt> mostrando
o blog. Se o <tt class="docutils literal"><span class="pre">slug</span></tt> não for encontrado no banco de dados, ele cria e
retorna um objeto <tt class="docutils literal"><span class="pre">Response</span></tt> com um código de status 404.</li>
<li>O <em>Controlador C</em> trata a o envio de um formulário de contato. Ele lê a
informação do formulário a partir da requisição, salva a informação de
contato no banco de dados e envia por e-mail a informação de contato
para o webmaster. Finalmente, ele cria um objeto <tt class="docutils literal"><span class="pre">Response</span></tt> que
redireciona o navegador do cliente para a página &#8220;thank you&#8221; do formulário
de contato.</li>
</ul>
<div class="section" id="o-ciclo-de-vida-da-requisicao-controlador-e-resposta">
<span id="index-1"></span><h2>O Ciclo de Vida da Requisição, Controlador e Resposta<a class="headerlink" href="#o-ciclo-de-vida-da-requisicao-controlador-e-resposta" title="Permalink to this headline">¶</a></h2>
<p>Toda requisição tratada por um projeto com Symfony 2 passa pelo mesmo ciclo de
vida simples. O framework cuida das tarefas repetitivas e por fim executa um
controlador onde reside o código personalizado da sua aplicação:</p>
<ol class="arabic simple">
<li>Toda requisição é tratada por um único arquivo front controlador (por exemplo,
<tt class="docutils literal"><span class="pre">app.php</span></tt> ou <tt class="docutils literal"><span class="pre">app_dev.php</span></tt>) que inicializa a aplicação;</li>
<li>O <tt class="docutils literal"><span class="pre">Router</span></tt> lê a informação da requisição (por exemplo, a URI), encontra uma rota
que casa com aquela informação e lê o parâmetro <tt class="docutils literal"><span class="pre">_controller</span></tt> da rota;</li>
<li>O controlador que casou com a rota é executado e o código dentro do
controlador cria e retorna um objeto <tt class="docutils literal"><span class="pre">Response</span></tt>;</li>
<li>Os cabeçalhos HTTP e o conteúdo do objeto <tt class="docutils literal"><span class="pre">Response</span></tt> são enviados de
volta para o cliente.</li>
</ol>
<p>Criar uma página é tão fácil quanto criar um controlador (#3) e fazer uma rota
que mapeie uma URL para aquele controlador (#2).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Embora tenha um nome similar, um &#8220;front controller&#8221; é diferente dos
&#8220;controladores&#8221; dos quais vamos falar nesse capítulo. Um front controller é
um pequeno arquivo PHP que fica no seu diretório web e através do qual
todas as requisições são direcionadas. Uma aplicação típica terá um front
controller de produção (por exemplo, <tt class="docutils literal"><span class="pre">app.php</span></tt>) e um front controller de
desenvolvimento (por exemplo, <tt class="docutils literal"><span class="pre">app_dev.php</span></tt>). Provavelmente você nunca precisará
editar, visualizar ou se preocupar com os front controllers da sua
aplicação.</p>
</div>
</div>
<div class="section" id="um-controlador-simples">
<span id="index-2"></span><h2>Um Controlador Simples<a class="headerlink" href="#um-controlador-simples" title="Permalink to this headline">¶</a></h2>
<p>Embora um controlador possa ser qualquer código PHP que possa ser chamado (uma
função, um método em um objeto ou uma <tt class="docutils literal"><span class="pre">Closure</span></tt>), no Symfony2 um controlador
geralmente é um único método dentro de um objeto controlador. Os controladores
também são chamados de <em>ações</em>:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">// src/Acme/HelloBundle/Controller/HelloController.php</span>

<span class="k">namespace</span> <span class="nx">Acme\HelloBundle\Controller</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">HelloController</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="s1">&#39;&lt;html&gt;&lt;body&gt;Hello &#39;</span><span class="o">.</span><span class="nv">$name</span><span class="o">.</span><span class="s1">&#39;!&lt;/body&gt;&lt;/html&gt;&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Note que o <em>controlador</em> é o método <tt class="docutils literal"><span class="pre">indexAction</span></tt>, que fica dentro de
uma <em>classe controladora</em> (<tt class="docutils literal"><span class="pre">HelloController</span></tt>). Não se confunda com a
nomenclatura: uma <em>classe controladora</em> é apenas um forma conveniente de
agrupar vários controladores/ações juntos. Geralmente a classe controladora
irá agrupar vários controladores/ações (por exemplo, <tt class="docutils literal"><span class="pre">updateAction</span></tt>,
<tt class="docutils literal"><span class="pre">deleteAction</span></tt> etc).</p>
</div>
<p>Esse controlador é bem simples, mas vamos explicá-lo:</p>
<ul class="simple">
<li><em>linha 3</em>: O Symfony2 se beneficia da funcionalidade de namespace do PHP 5.3
colocando a classe controladora inteira dentro de um namespace. A palavra chave
<tt class="docutils literal"><span class="pre">use</span></tt> importa a classe <tt class="docutils literal"><span class="pre">Response</span></tt> que nosso controlador tem que retornar.</li>
<li><em>linha 6</em>: O nome da classe é a concatenação de um nome para a classe
controlador (ou seja, <tt class="docutils literal"><span class="pre">Hello</span></tt>) com a palavra <tt class="docutils literal"><span class="pre">Controller</span></tt>. Essa é uma
convenção que fornece consistência aos controladores e permite que eles sejam
referenciados usando apenas a primeira parte do nome (ou seja, <tt class="docutils literal"><span class="pre">Hello</span></tt>) na
configuração de roteamento.</li>
<li><em>linha 8</em>: Toda ação em uma classe controladora é sufixada com <tt class="docutils literal"><span class="pre">Action</span></tt> e
é referenciada na configuração de roteamento pelo nome da ação (<tt class="docutils literal"><span class="pre">index</span></tt>).
Na próxima seção, você criará uma rota que mapeia uma URI para essa action.
Você aprenderá como os marcadores de posição das rotas (<tt class="docutils literal"><span class="pre">{name}</span></tt>) tornam-se
argumentos no método da action (<tt class="docutils literal"><span class="pre">$name</span></tt>).</li>
<li><em>linha 10</em>: O controlador cria e retorna um objeto <tt class="docutils literal"><span class="pre">Response</span></tt>.</li>
</ul>
</div>
<div class="section" id="mapeando-uma-url-para-um-controlador">
<span id="index-3"></span><h2>Mapeando uma URL para um Controlador<a class="headerlink" href="#mapeando-uma-url-para-um-controlador" title="Permalink to this headline">¶</a></h2>
<p>O novo controlador retorna uma página HTML simples. Para ver realmente essa
página no seu navegador você precisa criar uma rota que mapeia um padrão
específico de URL para o controlador:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/routing.yml</span>
<span class="l-Scalar-Plain">hello</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>      <span class="l-Scalar-Plain">/hello/{name}</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span>     <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeHelloBundle</span><span class="p-Indicator">:</span><span class="nv">Hello</span><span class="p-Indicator">:</span><span class="nv">index</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/routing.xml --&gt;</span>
<span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;hello&quot;</span> <span class="na">pattern=</span><span class="s">&quot;/hello/{name}&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_controller&quot;</span><span class="nt">&gt;</span>AcmeHelloBundle:Hello:index<span class="nt">&lt;/default&gt;</span>
<span class="nt">&lt;/route&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// app/config/routing.php</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span><span class="s1">&#39;/hello/{name}&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AcmeHelloBundle:Hello:index&#39;</span><span class="p">,</span>
<span class="p">)));</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Agora, acessar <tt class="docutils literal"><span class="pre">/hello/ryan</span></tt> executa o controlador
<tt class="docutils literal"><span class="pre">HelloController::indexAction()</span></tt> e passa <tt class="docutils literal"><span class="pre">ryan</span></tt> para a variável <tt class="docutils literal"><span class="pre">$name</span></tt>.
A criação de uma &#8220;página&#8221; significa simplesmente criar um método controlador e
associar uma rota.</p>
<p>Note a sintaxe usada para referenciar o controlador:
<tt class="docutils literal"><span class="pre">AcmeHelloBundle:Hello:index</span></tt>. O Symfony2 usa uma notação flexível de string
para referenciar diferentes controladores. Essa é a sintaxe mais comum e diz ao
Symfony2 para buscar por uma classe controladora chamada <tt class="docutils literal"><span class="pre">helloController</span></tt>
dentro de um bundle chamado <tt class="docutils literal"><span class="pre">AcmeHelloBundle</span></tt>. Então o método
<tt class="docutils literal"><span class="pre">indexAction()</span></tt> é executado.</p>
<p>Para mais detalhes sobre o formato de string usado para referenciar diferentes
controladores, veja <a class="reference internal" href="routing.html#controller-string-syntax"><em>Padrão de nomeação do Controller</em></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Esse exemplo coloca a configuração de roteamento diretamente no diretório
<tt class="docutils literal"><span class="pre">app/config/</span></tt>. Uma forma melhor de organizar suas rotas é colocar cada
uma das rotas no bundle a qual elas pertencem. Para mais informações, veja
<a class="reference internal" href="routing.html#routing-include-external-resources"><em>Incluindo Recursos Externos de Roteamento</em></a>.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Você pode aprender muito mais sobre o sistema de roteamento no
<a class="reference internal" href="routing.html"><em>capítulo Roteamento</em></a>.</p>
</div>
<div class="section" id="parametros-de-rota-como-argumentos-do-controlador">
<span id="route-parameters-controller-arguments"></span><span id="index-4"></span><h3>Parâmetros de Rota como Argumentos do Controlador<a class="headerlink" href="#parametros-de-rota-como-argumentos-do-controlador" title="Permalink to this headline">¶</a></h3>
<p>Você já sabe que o parâmetro <tt class="docutils literal"><span class="pre">_controller</span></tt> em <tt class="docutils literal"><span class="pre">AcmeHelloBundle:Hello:index</span></tt>
se refere ao método <tt class="docutils literal"><span class="pre">HelloController::indexAction()</span></tt> que está dentro do
bundle <tt class="docutils literal"><span class="pre">AcmeHelloBundle</span></tt>. O que é mais interessante são os argumentos que
são passados para o método:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// src/Acme/HelloBundle/Controller/HelloController.php</span>

<span class="k">namespace</span> <span class="nx">Acme\HelloBundle\Controller</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\Controller</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">HelloController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>O controlador tem um único argumento, <tt class="docutils literal"><span class="pre">$name</span></tt>, que corresponde ao parâmetro
<tt class="docutils literal"><span class="pre">{name}</span></tt> da rota casada (<tt class="docutils literal"><span class="pre">ryan</span></tt> no nosso exemplo). Na verdade quando
executa seu controlador, o Symfony2 casa cada um dos argumentos do controlador
com um parâmetro da rota casada. Veja o seguinte exemplo:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/routing.yml</span>
<span class="l-Scalar-Plain">hello</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>      <span class="l-Scalar-Plain">/hello/{first_name}/{last_name}</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span>     <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeHelloBundle</span><span class="p-Indicator">:</span><span class="nv">Hello</span><span class="p-Indicator">:</span><span class="nv">index</span><span class="p-Indicator">,</span> <span class="nv">color</span><span class="p-Indicator">:</span> <span class="nv">green</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/routing.xml --&gt;</span>
<span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;hello&quot;</span> <span class="na">pattern=</span><span class="s">&quot;/hello/{first_name}/{last_name}&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_controller&quot;</span><span class="nt">&gt;</span>AcmeHelloBundle:Hello:index<span class="nt">&lt;/default&gt;</span>
    <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;color&quot;</span><span class="nt">&gt;</span>green<span class="nt">&lt;/default&gt;</span>
<span class="nt">&lt;/route&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// app/config/routing.php</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span><span class="s1">&#39;/hello/{first_name}/{last_name}&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AcmeHelloBundle:Hello:index&#39;</span><span class="p">,</span>
    <span class="s1">&#39;color&#39;</span>       <span class="o">=&gt;</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span>
<span class="p">)));</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>O controlador dessa rota pode receber vários argumentos:</p>
<blockquote>
<div><p>public function indexAction($first_name, $last_name, $color)
{</p>
<blockquote>
<div>// ...</div></blockquote>
<p>}</p>
</div></blockquote>
<p>Observe que tanto as variáveis de marcadores de posição (<tt class="docutils literal"><span class="pre">{first_name}</span></tt>,
<tt class="docutils literal"><span class="pre">{last_name}</span></tt>) quanto a váriavel padrão <tt class="docutils literal"><span class="pre">color</span></tt> estão disponíveis como
argumentos no controlador. Quando uma rota é casada, as variáveis marcadoras
de posição são mescladas com as variáveis <tt class="docutils literal"><span class="pre">default</span></tt> criando um array
que fica disponível para o seu controlador.</p>
<p>O mapeamento de parâmetros de rota com argumentos do controlador é fácil e
flexível. Tenha em mente as seguintes orientações enquanto estiver
desenvolvendo.</p>
<ul>
<li><p class="first"><strong>A ordem dos argumentos do controlador não importa</strong></p>
<blockquote>
<div><p>O Symfony é capaz de casar os nomes dos parâmetros da rota com os nomes
das variáveis na assinatura do método do controlador. Em outras palavras,
ele sabe que o parâmetro <tt class="docutils literal"><span class="pre">{last_name}</span></tt> casa com o argumento
<tt class="docutils literal"><span class="pre">$last_name</span></tt>. Os argumentos do controlador podem ser totalmente
reordenados e continuam funcionando perfeitamente:</p>
<blockquote>
<div><p>public function indexAction($last_name, $color, $first_name)
{</p>
<blockquote>
<div><p>// ..</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>Todo argumento obrigatório do controlador tem que corresponder a um parâmetro de roteamento</strong></p>
<blockquote>
<div><p>O seguinte deveria lançar uma <tt class="docutils literal"><span class="pre">RuntimeException</span></tt> porque não existe nenhum
parâmetro <tt class="docutils literal"><span class="pre">foo</span></tt> definido na rota:</p>
<blockquote>
<div><p>public function indexAction($first_name, $last_name, $color, $foo)
{</p>
<blockquote>
<div><p>// ..</p>
</div></blockquote>
<p>}</p>
<p>Deixando o argumento opcional, no entanto, tudo corre bem. O
seguinte exemplo não lança uma exceção:</p>
<p>public function indexAction($first_name, $last_name, $color, $foo = &#8216;bar&#8217;)
{</p>
<blockquote>
<div><p>// ..</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>Nem todos os parâmetros de roteamento precisam ser argumentos no seu controlador</strong></p>
<blockquote>
<div><p>Se, por exemplo, <tt class="docutils literal"><span class="pre">last_name</span></tt> não for importante para o seu controlador,
você pode omitir inteiramente ele:</p>
<blockquote>
<div><p>public function indexAction($first_name, $color)
{</p>
<blockquote>
<div><p>// ..</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
</div></blockquote>
</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Cada uma das rotas tem um parâmetro <tt class="docutils literal"><span class="pre">_route</span></tt> especial, que é igual ao
nome da rota que foi casada (por exemplo, <tt class="docutils literal"><span class="pre">hello</span></tt>). Embora não seja útil
geralmente, ele também fica disponível como um argumento do controlador.</p>
</div>
</div>
<div class="section" id="o-request-como-um-argumento-do-controlador">
<span id="book-controller-request-argument"></span><h3>O <tt class="docutils literal"><span class="pre">Request</span></tt> como um Argumento do Controlador<a class="headerlink" href="#o-request-como-um-argumento-do-controlador" title="Permalink to this headline">¶</a></h3>
<p>Por conveniência, você também pode fazer com que o Symfony passe o objeto
<tt class="docutils literal"><span class="pre">Request</span></tt> como um argumento para seu controlador. Isso é conveniente
especialmente quando você estiver trabalhando com formulários, por exemplo:</p>
<blockquote>
<div><p>use SymfonyComponentHttpFoundationRequest;</p>
<p>public function updateAction(Request $request)
{</p>
<blockquote>
<div><p>$form = $this-&gt;createForm(...);</p>
<p>$form-&gt;bindRequest($request);
// ...</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
</div>
</div>
<div class="section" id="a-classe-base-do-controlador">
<span id="index-5"></span><h2>A Classe Base do Controlador<a class="headerlink" href="#a-classe-base-do-controlador" title="Permalink to this headline">¶</a></h2>
<p>Por conveniência, o Symfony2 vem com uma classe <tt class="docutils literal"><span class="pre">Controller</span></tt> base que ajuda
com algumas das tarefas mais comuns dos controladores e fornece às suas classes
controladoras acesso à qualquer recurso que elas possam precisar. Estendendo essa
classe <tt class="docutils literal"><span class="pre">Controller</span></tt>, você se beneficia com vários métodos helper.</p>
<p>Adicione a instrução <tt class="docutils literal"><span class="pre">use</span></tt> no topo da sua classe <tt class="docutils literal"><span class="pre">Controller</span></tt> e então
modifique o <tt class="docutils literal"><span class="pre">HelloController</span></tt> para estendê-lo:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/Acme/HelloBundle/Controller/HelloController.php</span>

<span class="k">namespace</span> <span class="nx">Acme\HelloBundle\Controller</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\Controller</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">HelloController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="s1">&#39;&lt;html&gt;&lt;body&gt;Hello &#39;</span><span class="o">.</span><span class="nv">$name</span><span class="o">.</span><span class="s1">&#39;!&lt;/body&gt;&lt;/html&gt;&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Isso não muda realmente nada o jeito que seu controlador trabalha. Na próxima
seção você aprenderá sobre os métodos helper que a classe controladora base
disponibiliza. Esses métodos são apenas atalhos para usar funcionalidades do
núcleo do Symfony2 que estão disponíveis para você usando ou não a classe base
<tt class="docutils literal"><span class="pre">Controller</span></tt>. Uma boa maneira de ver a funcionalidade do núcleo em ação
é olhar a própria classe
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Bundle/FrameworkBundle/Controller/Controller.html" title="Symfony\Bundle\FrameworkBundle\Controller\Controller"><span class="pre">Controller</span></a></tt>.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Estender a classe base é <em>opcional</em> no Symfony; ela contém atalhos úteis
mas nada que seja mandatório. Você também pode estender
<tt class="docutils literal"><span class="pre">Symfony\Component\DependencyInjection\ContainerAware</span></tt>. O objeto
contêiner de serviços então será acessível por meio da propriedade
<tt class="docutils literal"><span class="pre">container</span></tt>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Você também pode definir seus <tt class="xref doc docutils literal"><span class="pre">Controllers</span> <span class="pre">como</span> <span class="pre">Serviços</span></tt>.</p>
</div>
</div>
<div class="section" id="tarefas-comuns-dos-controladores">
<span id="index-6"></span><h2>Tarefas Comuns dos Controladores<a class="headerlink" href="#tarefas-comuns-dos-controladores" title="Permalink to this headline">¶</a></h2>
<p>Embora virtualmente um controlador possa fazer qualquer coisa, a maioria dos
controladores irão realizar as mesmas tarefas básicas repetidas vezes. Essas
tarefas, como redirecionamentos, direcionamentos, renderização de templates e
acesso a serviços nucleares são muitos fáceis de gerenciar no Symfony2.</p>
<div class="section" id="redirecionando">
<span id="index-7"></span><h3>Redirecionando<a class="headerlink" href="#redirecionando" title="Permalink to this headline">¶</a></h3>
<p>Se você quiser redirecionar o usuário para outra página, use o método
<tt class="docutils literal"><span class="pre">redirect()</span></tt>:</p>
<div class="highlight-python"><pre>public function indexAction()
{
    return $this-&gt;redirect($this-&gt;generateUrl('homepage'));
}</pre>
</div>
<p>O método <tt class="docutils literal"><span class="pre">generateUrl()</span></tt> é apenas uma função helper que gera a URL de uma
determinada rota. Para mais informações, veja o capítulo
<a class="reference internal" href="routing.html"><em>Roteamento</em></a>.</p>
<p>Por padrão, o método <tt class="docutils literal"><span class="pre">redirect()</span></tt> efetua um redirecionamento 302
(temporário). Para realizar um redirecionamento 301 (permanente), modifique o
segundo argumento:</p>
<div class="highlight-python"><pre>public function indexAction()
{
    return $this-&gt;redirect($this-&gt;generateUrl('homepage'), 301);
}</pre>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>O método <tt class="docutils literal"><span class="pre">redirect()</span></tt> é simplesmente um atalho que cria um objeto
<tt class="docutils literal"><span class="pre">Response</span></tt> especializado em redirecionar o usuário. Ele é equivalente a:</p>
<div class="last highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\RedirectResponse</span><span class="p">;</span>

<span class="k">return</span> <span class="k">new</span> <span class="nx">RedirectResponse</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">generateUrl</span><span class="p">(</span><span class="s1">&#39;homepage&#39;</span><span class="p">));</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="direcionando">
<span id="index-8"></span><h3>Direcionando<a class="headerlink" href="#direcionando" title="Permalink to this headline">¶</a></h3>
<p>Você também pode facilmente direcionar internamente para outro controlador com o
método <tt class="docutils literal"><span class="pre">forward()</span></tt>. Em vez de redirecionar o navegador do usuário, ele faz
uma sub-requisição interna e chama o controlador especificado. O método
<tt class="docutils literal"><span class="pre">forward()</span></tt> retorna o objeto <tt class="docutils literal"><span class="pre">Response</span></tt> que é retornado pelo controlador:</p>
<div class="highlight-python"><pre>public function indexAction($name)
{
    $response = $this-&gt;forward('AcmeHelloBundle:Hello:fancy', array(
        'name'  =&gt; $name,
        'color' =&gt; 'green'
    ));

    // pode modificar a resposta ou retorná-la diretamente

    return $response;
}</pre>
</div>
<p>Note que o método <cite>forward()</cite> usa a mesma representação em string do
controlador que foi usada na configuração de roteamento. Nesse caso, a classe
controlador alvo será <tt class="docutils literal"><span class="pre">HelloController</span></tt> dentro de <tt class="docutils literal"><span class="pre">AcmeHelloBundle</span></tt>.
O array passado para o método se torna os argumentos no controlador
resultante. Essa mesma interface é usada quando se embutem controladores em
templates (veja <a class="reference internal" href="templating.html#templating-embedding-controller"><em>Incorpora??o de Controllers</em></a>). O método controlador
alvo deve se parecer com o seguinte:</p>
<div class="highlight-python"><pre>public function fancyAction($name, $color)
{
    // ... cria e retorna um objeto Response
}</pre>
</div>
<p>E da mesma forma, quando criamos um controlador para uma rota, a ordem dos
argumentos para <tt class="docutils literal"><span class="pre">fancyAction</span></tt> não importa. O Symfony2 combina os nomes
das chaves dos índices (por exemplo, <tt class="docutils literal"><span class="pre">name</span></tt>) com os nomes dos argumentos do
método (por exemplo, <tt class="docutils literal"><span class="pre">$name</span></tt>). Se você mudar a ordem dos argumentos, o Symfony2
continuará passando os valores corretos para cada variável.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>Assim como em outros métodos do <tt class="docutils literal"><span class="pre">Controller</span></tt> base, o método <tt class="docutils literal"><span class="pre">forward</span></tt> é
apenas um atalho para uma funcionalidade nuclear do Symfony2. Um
direcionamento pode ser realizado diretamente por meio do serviço
<tt class="docutils literal"><span class="pre">http_kernel</span></tt>. Um direcionamento retorna um objeto <tt class="docutils literal"><span class="pre">Response</span></tt>:</p>
<div class="last highlight-python"><pre>$httpKernel = $this-&gt;container-&gt;get('http_kernel');
$response = $httpKernel-&gt;forward('AcmeHelloBundle:Hello:fancy', array(
    'name'  =&gt; $name,
    'color' =&gt; 'green',
));</pre>
</div>
</div>
</div>
<div class="section" id="renderizando-templates">
<span id="controller-rendering-templates"></span><span id="index-9"></span><h3>Renderizando Templates<a class="headerlink" href="#renderizando-templates" title="Permalink to this headline">¶</a></h3>
<p>Apesar de não ser um requisito, a maioria dos controladores irá, no fim das contas,
renderizar um template que é responsável por gerar o HTML (ou outro formato)
para o controlador. O método <tt class="docutils literal"><span class="pre">renderView()</span></tt> renderiza um template e retorna
seu conteúdo. O conteúdo do template pode ser usado para criar um objeto
<tt class="docutils literal"><span class="pre">Response</span></tt>:</p>
<div class="highlight-python"><pre>$content = $this-&gt;renderView('AcmeHelloBundle:Hello:index.html.twig', array('name' =&gt; $name));

return new Response($content);</pre>
</div>
<p>Isso pode ser feito até em um único passo usando o método <tt class="docutils literal"><span class="pre">render()</span></tt>, que
retorna um objeto <tt class="docutils literal"><span class="pre">Response</span></tt> com o conteúdo do template:</p>
<div class="highlight-python"><pre>return $this-&gt;render('AcmeHelloBundle:Hello:index.html.twig', array('name' =&gt; $name));</pre>
</div>
<p>Em ambos os casos, o template <tt class="docutils literal"><span class="pre">Resources/views/Hello/index.html.twig</span></tt> dentro
do <tt class="docutils literal"><span class="pre">AcmeHelloBundle</span></tt> será renderizado.</p>
<p>O sistema de template do Symfony é explicado com mais detalhes no capítulo
<a class="reference internal" href="templating.html"><em>Templating</em></a>.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>O método <tt class="docutils literal"><span class="pre">renderView</span></tt> é um atalho para usar diretamente o serviço
<tt class="docutils literal"><span class="pre">templating</span></tt>. O serviço <tt class="docutils literal"><span class="pre">templating</span></tt> também pode ser usado
diretamente:</p>
<div class="last highlight-python"><pre>$templating = $this-&gt;get('templating');
$content = $templating-&gt;render('AcmeHelloBundle:Hello:index.html.twig', array('name' =&gt; $name));</pre>
</div>
</div>
</div>
<div class="section" id="acessando-outros-servicos">
<span id="index-10"></span><h3>Acessando outros Serviços<a class="headerlink" href="#acessando-outros-servicos" title="Permalink to this headline">¶</a></h3>
<p>Quando se estende a classe controladora base, você pode acessar qualquer um dos
serviços Symfony2 através do método <tt class="docutils literal"><span class="pre">get()</span></tt>. Aqui estão alguns dos serviços
mais comuns que você pode precisar:</p>
<div class="highlight-python"><pre>$request = $this-&gt;getRequest();

$templating = $this-&gt;get('templating');

$router = $this-&gt;get('router');

$mailer = $this-&gt;get('mailer');</pre>
</div>
<p>Existem outros inúmeros serviços disponíveis e você é encorajado a definir os
seus próprios. Para listar todos os serviços disponíveis, use o comando do
console <tt class="docutils literal"><span class="pre">container:debug</span></tt>:</p>
<div class="highlight-bash"><div class="highlight"><pre>php app/console container:debug
</pre></div>
</div>
<p>Para mais informações, veja o capítulo <a class="reference internal" href="service_container.html"><em>Container de Serviço</em></a>.</p>
</div>
</div>
<div class="section" id="gerenciando-erros-e-paginas-404">
<span id="index-11"></span><h2>Gerenciando Erros e Páginas 404<a class="headerlink" href="#gerenciando-erros-e-paginas-404" title="Permalink to this headline">¶</a></h2>
<p>Quando algo não for encontrado, você deve usar de forma correta o protocolo
HTTP e retornar uma resposta 404. Para isso, você lançará um tipo especial de
exceção. Se estiver estendendo a classe controlador base, faça o seguinte:</p>
<div class="highlight-python"><pre>public function indexAction()
{
    $product = // retrieve the object from database
    if (!$product) {
        throw $this-&gt;createNotFoundException('The product does not exist');
    }

    return $this-&gt;render(...);
}</pre>
</div>
<p>O método <tt class="docutils literal"><span class="pre">createNotFoundException()</span></tt> cria um objeto especial
<tt class="docutils literal"><span class="pre">NotFoundHttpException</span></tt>, que no fim dispara uma resposta HTTP 404 de dentro
do Symfony.</p>
<p>É lógico que você é livre para lançar qualquer classe <tt class="docutils literal"><span class="pre">Exception</span></tt> no seu
controlador - o Symfony irá retornar automaticamente uma resposta HTTP código
500.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">throw</span> <span class="k">new</span> <span class="nx">\Exception</span><span class="p">(</span><span class="s1">&#39;Something went wrong!&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Em todo caso, uma página de erro estilizada é mostrada para o usuário final e
uma página de erro com informações de debug completa é mostrada para o
desenvolvedor (no caso de visualizar a página no modo debug). Ambas as páginas
podem ser personalizadas. Para detalhes, leia a receita
&#8220;<tt class="xref doc docutils literal"><span class="pre">/cookbook/controller/error_pages</span></tt>&#8221; no cookbook.</p>
</div>
<div class="section" id="gerenciando-a-sessao">
<span id="index-12"></span><h2>Gerenciando a Sessão<a class="headerlink" href="#gerenciando-a-sessao" title="Permalink to this headline">¶</a></h2>
<p>O Symfony2 fornece um objeto de sessão muito bom que você pode usar para
guardar informações sobre o usuário (seja ele uma pessoa real usando um
navegador, um robô ou um web service) entre requisições. Por padrão, o
Symfony2 guarda os atributos em um cookie usando as sessões nativas do PHP.</p>
<p>O armazenamento e a recuperação de informações da sessão são feitos
facilmente de qualquer controlador:</p>
<div class="highlight-python"><pre>$session = $this-&gt;getRequest()-&gt;getSession();

// store an attribute for reuse during a later user request
$session-&gt;set('foo', 'bar');

// in another controller for another request
$foo = $session-&gt;get('foo');

// set the user locale
$session-&gt;setLocale('fr');</pre>
</div>
<p>Esses atributos permanecerão no usuário até o fim da sessão.</p>
<div class="section" id="mensagens-flash">
<span id="index-13"></span><h3>Mensagens Flash<a class="headerlink" href="#mensagens-flash" title="Permalink to this headline">¶</a></h3>
<p>Você também guardar pequenas mensagens que serão armazenadas na sessão do
usuário apenas por uma requisição. Isso é útil no processamento de formulários:
você pode redirecionar o usuário e mostrar uma mensagem especial na requisição
<em>seguinte</em>. Esses tipos de mensagens são chamadas de mensagens &#8220;flash&#8221;.</p>
<p>Por exemplo, imagine que você esteja processando a submissão de um formulário:</p>
<div class="highlight-python"><pre>public function updateAction()
{
    $form = $this-&gt;createForm(...);

    $form-&gt;bindRequest($this-&gt;getRequest());
    if ($form-&gt;isValid()) {
        // do some sort of processing

        $this-&gt;get('session')-&gt;setFlash('notice', 'Your changes were saved!');

        return $this-&gt;redirect($this-&gt;generateUrl(...));
    }

    return $this-&gt;render(...);
}</pre>
</div>
<p>Depois do processamento da requisição, o controlador define uma mensagem flash
<cite>notice</cite> e então faz o redirecionamento. O nome (<tt class="docutils literal"><span class="pre">notice</span></tt>) não é
importante - é apenas o que você usa para identificar o tipo da mensagem.</p>
<p>No template da próxima action, o código a seguir poderia ser usado para
renderizar a mensagem <tt class="docutils literal"><span class="pre">notice</span></tt>:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">if</span> <span class="nv">app.session.hasFlash</span><span class="o">(</span><span class="s1">&#39;notice&#39;</span><span class="o">)</span> <span class="cp">%}</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;flash-notice&quot;</span><span class="nt">&gt;</span>
        <span class="cp">{{</span> <span class="nv">app.session.flash</span><span class="o">(</span><span class="s1">&#39;notice&#39;</span><span class="o">)</span> <span class="cp">}}</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;session&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">hasFlash</span><span class="p">(</span><span class="s1">&#39;notice&#39;</span><span class="p">))</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;div class=&quot;flash-notice&quot;&gt;</span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;session&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">getFlash</span><span class="p">(</span><span class="s1">&#39;notice&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;/div&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Por definição, as mensagens flash são feitas para existirem por exatamente uma
requisição (elas &#8220;se vão num instante&#8221; - &#8220;gone in a flash&#8221;). Elas foram
projetadas para serem usadas entre redirecionamentos exatamente como você fez
nesse exemplo.</p>
</div>
</div>
<div class="section" id="o-objeto-response">
<span id="index-14"></span><h2>O Objeto Response<a class="headerlink" href="#o-objeto-response" title="Permalink to this headline">¶</a></h2>
<p>O único requisito de um controlador é retornar um objeto <tt class="docutils literal"><span class="pre">Response</span></tt>. A classe
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Response.html" title="Symfony\Component\HttpFoundation\Response"><span class="pre">Response</span></a></tt> é uma abstração PHP em
volta da resposta HTTP - a mensagem em texto cheia de cabeçalhos HTTP e
conteúdo que é mandado de volta para o cliente:</p>
<div class="highlight-python"><pre>// create a simple Response with a 200 status code (the default)
$response = new Response('Hello '.$name, 200);

// create a JSON-response with a 200 status code
$response = new Response(json_encode(array('name' =&gt; $name)));
$response-&gt;headers-&gt;set('Content-Type', 'application/json');</pre>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">A propriedade <tt class="docutils literal"><span class="pre">headers</span></tt> é a classe
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/HeaderBag.html" title="Symfony\Component\HttpFoundation\HeaderBag"><span class="pre">HeaderBag</span></a></tt> com vários métodos
úteis para ler e modificar os cabeçalhos do <tt class="docutils literal"><span class="pre">Response</span></tt>. Os nomes dos
cabeçalhos são normalizados de forma que usar <tt class="docutils literal"><span class="pre">Content-Type</span></tt> seja
equivalente a <tt class="docutils literal"><span class="pre">content-type</span></tt> ou mesmo <tt class="docutils literal"><span class="pre">content_type</span></tt>.</p>
</div>
</div>
<div class="section" id="o-objeto-request">
<span id="index-15"></span><h2>O Objeto Request<a class="headerlink" href="#o-objeto-request" title="Permalink to this headline">¶</a></h2>
<p>Além dos valores nos marcadores de roteamento, o controlador também tem acesso
ao objeto <tt class="docutils literal"><span class="pre">Request</span></tt> quando está estendendo a classe <tt class="docutils literal"><span class="pre">Controller</span></tt> base:</p>
<div class="highlight-python"><pre>$request = $this-&gt;getRequest();

$request-&gt;isXmlHttpRequest(); // is it an Ajax request?

$request-&gt;getPreferredLanguage(array('en', 'fr'));

$request-&gt;query-&gt;get('page'); // get a $_GET parameter

$request-&gt;request-&gt;get('page'); // get a $_POST parameter</pre>
</div>
<p>Assim como com o objeto <tt class="docutils literal"><span class="pre">Response</span></tt>, os cabeçalhos da requisição são guardados
em um objeto <tt class="docutils literal"><span class="pre">HeaderBag</span></tt> e são facilmente acessados.</p>
</div>
<div class="section" id="consideracoes-finais">
<h2>Considerações Finais<a class="headerlink" href="#consideracoes-finais" title="Permalink to this headline">¶</a></h2>
<p>Sempre que criar uma página, no final você precisará escrever algum código que
contenha a lógica dessa página. No Symfony, isso é chamado de controlador,
e ele é uma função PHP que faz tudo que for necessário para no fim retornar
o objeto <tt class="docutils literal"><span class="pre">Response</span></tt> final que será retornado ao usuário.</p>
<p>Para facilitar a vida, você pode escolher estender uma classe <tt class="docutils literal"><span class="pre">Controller</span></tt>
base, que contém métodos que são atalhos para muitas tarefas comuns dos
controladores. Por exemplo, uma vez que você não queira colocar código HTML
no seu controlador, você pode usar o método <tt class="docutils literal"><span class="pre">render()</span></tt> para renderizar e
retornar o conteúdo de um template.</p>
<p>Em outros capítulos, você verá como o controlador pode ser usado para persistir
e buscar objetos em um banco de dados, processar submissões de formulários,
gerenciar cache e muito mais.</p>
</div>
<div class="section" id="saiba-mais-no-cookbook">
<h2>Saiba mais no Cookbook<a class="headerlink" href="#saiba-mais-no-cookbook" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><tt class="xref doc docutils literal"><span class="pre">/cookbook/controller/error_pages</span></tt></li>
<li><tt class="xref doc docutils literal"><span class="pre">/cookbook/controller/service</span></tt></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Controlador</a><ul>
<li><a class="reference internal" href="#o-ciclo-de-vida-da-requisicao-controlador-e-resposta">O Ciclo de Vida da Requisição, Controlador e Resposta</a></li>
<li><a class="reference internal" href="#um-controlador-simples">Um Controlador Simples</a></li>
<li><a class="reference internal" href="#mapeando-uma-url-para-um-controlador">Mapeando uma URL para um Controlador</a><ul>
<li><a class="reference internal" href="#parametros-de-rota-como-argumentos-do-controlador">Parâmetros de Rota como Argumentos do Controlador</a></li>
<li><a class="reference internal" href="#o-request-como-um-argumento-do-controlador">O <tt class="docutils literal"><span class="pre">Request</span></tt> como um Argumento do Controlador</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a-classe-base-do-controlador">A Classe Base do Controlador</a></li>
<li><a class="reference internal" href="#tarefas-comuns-dos-controladores">Tarefas Comuns dos Controladores</a><ul>
<li><a class="reference internal" href="#redirecionando">Redirecionando</a></li>
<li><a class="reference internal" href="#direcionando">Direcionando</a></li>
<li><a class="reference internal" href="#renderizando-templates">Renderizando Templates</a></li>
<li><a class="reference internal" href="#acessando-outros-servicos">Acessando outros Serviços</a></li>
</ul>
</li>
<li><a class="reference internal" href="#gerenciando-erros-e-paginas-404">Gerenciando Erros e Páginas 404</a></li>
<li><a class="reference internal" href="#gerenciando-a-sessao">Gerenciando a Sessão</a><ul>
<li><a class="reference internal" href="#mensagens-flash">Mensagens Flash</a></li>
</ul>
</li>
<li><a class="reference internal" href="#o-objeto-response">O Objeto Response</a></li>
<li><a class="reference internal" href="#o-objeto-request">O Objeto Request</a></li>
<li><a class="reference internal" href="#consideracoes-finais">Considerações Finais</a></li>
<li><a class="reference internal" href="#saiba-mais-no-cookbook">Saiba mais no Cookbook</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="installation.html"
                        title="previous chapter">Instalando e Configurando o Symfony</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="routing.html"
                        title="next chapter">Roteamento</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/book/controller.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="routing.html" title="Roteamento"
             >next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Instalando e Configurando o Symfony"
             >previous</a> |</li>
        <li><a href="../index.html">Symfony2Docs 2.0.x documentation</a> &raquo;</li>
          <li><a href="index.html" >Livro</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Symfony Team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>