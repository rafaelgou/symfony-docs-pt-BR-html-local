

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Criando e usando Templates &mdash; Symfony2Docs 2.0.x documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.x',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Symfony2Docs 2.0.x documentation" href="../index.html" />
    <link rel="up" title="Livro" href="index.html" />
    <link rel="next" title="Bancos de Dados e Doctrine (“O Model”)" href="doctrine.html" />
    <link rel="prev" title="Roteamento" href="routing.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="doctrine.html" title="Bancos de Dados e Doctrine (“O Model”)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="routing.html" title="Roteamento"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Symfony2Docs 2.0.x documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Livro</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="criando-e-usando-templates">
<span id="index-0"></span><h1>Criando e usando Templates<a class="headerlink" href="#criando-e-usando-templates" title="Permalink to this headline">¶</a></h1>
<p>Como voc? sabe o <a class="reference internal" href="controller.html"><em>controller</em></a> ? respons?vel por
controlar cada requisi??o que venha de uma aplica??o Symfony2. Na realidade,
o controller delega muito do trabalho pesado para outros lugares ent?o aquele
c?digo pode ser testado e reusado. Quando um controller precisa gerar HTML,
CSS e qualquer outro conte?do, ele entrega o trabalho para o engine de template.
Nesse cap?tulo, voc? ir? aprendder como escrever templates poderosas que podem ser
usada para retornar conte?do para o usu?rio, preencher corpo de e-mail, e mais. Voc?
ir? aprender atalhos, maneiras espertas de extender templates e como reusar c?digo
de template.</p>
<div class="section" id="templates">
<span id="index-1"></span><h2>Templates<a class="headerlink" href="#templates" title="Permalink to this headline">¶</a></h2>
<p>Um template ? simplesmente um arquivo de texto que pode gerar qualquer formato baseado em texto
(HTML, XML, CSV, LaTeX ...). O tipo mais familiar de template ? um
template em <em>PHP</em> - um arquivo de texto analisado pelo PHP que cont?m uma mistura de texto e c?digo PHP:</p>
<div class="highlight-python"><pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Welcome to Symfony!&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;&lt;?php echo $page_title ?&gt;&lt;/h1&gt;

        &lt;ul id="navigation"&gt;
            &lt;?php foreach ($navigation as $item): ?&gt;
                &lt;li&gt;
                    &lt;a href="&lt;?php echo $item-&gt;getHref() ?&gt;"&gt;
                        &lt;?php echo $item-&gt;getCaption() ?&gt;
                    &lt;/a&gt;
                &lt;/li&gt;
            &lt;?php endforeach; ?&gt;
        &lt;/ul&gt;
    &lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p id="index-2">Mas Symfony2 empacota at? mesmo uma linguagem muito poderosa de template chamada <a class="reference external" href="http://twig.sensiolabs.org">Twig</a>.
Twig permit a voc? escrever templates consisos e leg?veis que s?o mais amig?veis
para web designers e, e de uma certa forma, mais poderosos que templates de PHP:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;title&gt;</span>Welcome to Symfony!<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;h1&gt;</span><span class="cp">{{</span> <span class="nv">page_title</span> <span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>

        <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;navigation&quot;</span><span class="nt">&gt;</span>
            <span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="k">in</span> <span class="nv">navigation</span> <span class="cp">%}</span>
                <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">item.href</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">item.caption</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
            <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
        <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>Twig degine dois tipos de sintaxe especiais:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">{{</span> <span class="pre">...</span> <span class="pre">}}</span></tt>: &#8220;Diga algo&#8221;: exibe uma vari?vel ou o resultado de uma
express?o para o template;</li>
<li><tt class="docutils literal"><span class="pre">{%</span> <span class="pre">...</span> <span class="pre">%}</span></tt>: &#8220;Fa?a algo&#8221;: uma <strong>tag</strong> que controla a l?gica do
template; ela ? usada para executar certas senten?as como for-loops por exemplo.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">H? uma terceira sintaxe usada para criar coment?rios <tt class="docutils literal"><span class="pre">{#</span> <span class="pre">this</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">comment</span> <span class="pre">#}</span></tt>.
Essa sintaxe pode ser usada atrav?s de m?ltiplas linhas, parecidas com a sintaxe
equivalente em PHP <tt class="docutils literal"><span class="pre">/*</span> <span class="pre">comment</span> <span class="pre">*/</span></tt>.</p>
</div>
<p>Twig tamb?m cont?m <strong>filtros</strong>, que modificam conte?do antes de serem interpretados.
O seguinte filtro transforma a vari?vel <tt class="docutils literal"><span class="pre">title</span></tt> toda em letra mai?scula antes de interpret?-la:</p>
<div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="nv">title</span> <span class="o">|</span> <span class="nf">upper</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
<p>Twig vem com uma longa lista de <a class="reference external" href="http://twig.sensiolabs.org/doc/tags/index.html">tags</a> e <a href="#id3"><span class="problematic" id="id4">`filtros`_</span></a> que est?o dispon?veis
por padr?o. Voc? pode at? mesmo <a href="#id5"><span class="problematic" id="id6">`adicionar suas pr?prias extens?es`_</span></a> para o Twig quando precisar.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Registrar uma extens?o Twig ? t?o f?cil quanto criar um novo servi?o e atribuir tag
nele com <tt class="docutils literal"><span class="pre">twig.extension</span></tt> <a class="reference internal" href="../reference/dic_tags.html#reference-dic-tags-twig-extension"><em>tag</em></a>.</p>
</div>
<p>Como voc? ver? atrav?s da documenta??o, Twig tamb?m suporta fun??es
e nova fun??es podem ser facilmente adicionadas. Por exemplo. a seguinte fun??o usa
uma tag padr?o <tt class="docutils literal"><span class="pre">for</span></tt>  e a fun??o <tt class="docutils literal"><span class="pre">cycle</span></tt> para ent?o imprimir dez tags div, alternando
entre classes <tt class="docutils literal"><span class="pre">odd</span></tt> e <tt class="docutils literal"><span class="pre">even</span></tt>:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">for</span> <span class="nv">i</span> <span class="k">in</span> <span class="m">0.</span><span class="nv">.10</span> <span class="cp">%}</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">cycle</span><span class="o">([</span><span class="s1">&#39;odd&#39;</span><span class="o">,</span> <span class="s1">&#39;even&#39;</span><span class="o">],</span> <span class="nv">i</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- some HTML here --&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Durante este cap?tulo, exemplos de template ser?o mostrados tanto em Twig como PHP.</p>
<div class="sidebar">
<p class="first sidebar-title">Por que Twig?</p>
<p>Templates Twig s?o feitas para serem simples e n?o ir?o processar tags PHP. Isto
? pelo design: o sistema de template do Twig ? feito para expressar apresenta??o,
n?o l?gica de programa. Quanto mais voc? usa Twig, mais voc? ir? apreciar e beneficiar
desta distin??o. E claro, voc? ser? amado por web designers de todos os lugares.</p>
<p>Twig pode tamb?m fazer coisas que PHP n?o pode, como por exemplo heran?a verdadeira de template
(Templates do Twig compilam classes PHP que herdam uma da outra),
controle de espa?o em branco, caixa de areia, e a inclus?o de fun??es personalizadas
e filtros que somente afetam templates. Twig cont?m pequenos recursos
que fazem escrita de templates mais f?cil e mais concisa. Considere o seguinte
exemplo, que combina um loop com uma senten?a l?gia <tt class="docutils literal"><span class="pre">if</span></tt>:</p>
<div class="last highlight-html+jinja"><div class="highlight"><pre><span class="nt">&lt;ul&gt;</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">user</span> <span class="k">in</span> <span class="nv">users</span> <span class="cp">%}</span>
        <span class="nt">&lt;li&gt;</span><span class="cp">{{</span> <span class="nv">user.username</span> <span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
    <span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
        <span class="nt">&lt;li&gt;</span>No users found<span class="nt">&lt;/li&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="cache-do-template-twig">
<span id="index-3"></span><h3>Cache do Template Twig<a class="headerlink" href="#cache-do-template-twig" title="Permalink to this headline">¶</a></h3>
<p>Twig ? r?pido. Cada template Twig ? compilado para uma classe nativa PHP
que ? processada na execu??o. As classes compiladas s?o localizadas no
diret?rio <tt class="docutils literal"><span class="pre">app/cache/{environment}/twig</span></tt> (onde <tt class="docutils literal"><span class="pre">{environment}</span></tt> ? o
ambiente, como <tt class="docutils literal"><span class="pre">dev</span></tt> ou <tt class="docutils literal"><span class="pre">prod</span></tt>), e em alguns casos pode ser ?til durante
a depura??o. Veja <em class="xref std std-ref">environments-summary</em> para mais informa??es de
ambientes.</p>
<p>Quando o modo <tt class="docutils literal"><span class="pre">debug</span></tt> ? abilitado (comum no ambiente <tt class="docutils literal"><span class="pre">dev</span></tt>), um template
Twig ser? automaticamente recompilado quando mudan?as s?o feitas nele. Isso
signitica que durante o desenvolvimento voc? pode alegremente fazer mudan?as para um template Twig
e inst?ntaneamente ver as mudan?as sem precisar se preocupar sobre limpar qualquer
cache.</p>
<p>Quando o modo <tt class="docutils literal"><span class="pre">debug</span></tt> ? desabilitado (comum no ambiente <tt class="docutils literal"><span class="pre">prod</span></tt>), entretanto,
voc? deve limpar o cache do diret?rio Twig para que ent?o os templates Twig
se regenerem. Lembre de fazer isso quando distribuir sua aplica??o.</p>
</div>
</div>
<div class="section" id="heran-a-e-layouts-de-template">
<span id="index-4"></span><h2>Heran?a e Layouts de Template<a class="headerlink" href="#heran-a-e-layouts-de-template" title="Permalink to this headline">¶</a></h2>
<p>Mais frequentemente que n?o, templates compartilham elementos comuns em um projeto, como o
header, footer, sidebar ou outros. Em Symfony2,  n?s gostamos de pensar sobre esse
problema de forma diferente: um template pode ser decorado por outro. Isso funciona
exatemente da mesma forma como classes PHP: heran?a de template permite voc? construir
um &#8220;layout&#8221; de template base que contenha todos os elementos comuns de seu site
definidos como <strong>blocos</strong> (pense em &#8220;classe PHP com m?todos base&#8221;). Um template filho
pode extender o layout base e sobrepor os blocos (pense &#8220;subclasse PHP
que sobreponha certos m?todos de sua classe pai&#8221;).</p>
<p>Primeiro, construa um arquivo de layout de base:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# app/Resources/views/base.html.twig #}</span>
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;Content-Type&quot;</span> <span class="na">content=</span><span class="s">&quot;text/html; charset=utf-8&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;title&gt;</span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span>Test Application<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;sidebar&quot;</span><span class="nt">&gt;</span>
            <span class="cp">{%</span> <span class="k">block</span> <span class="nv">sidebar</span> <span class="cp">%}</span>
            <span class="nt">&lt;ul&gt;</span>
                <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;/&quot;</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
                <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;/blog&quot;</span><span class="nt">&gt;</span>Blog<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
            <span class="nt">&lt;/ul&gt;</span>
            <span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
        <span class="nt">&lt;/div&gt;</span>

        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;content&quot;</span><span class="nt">&gt;</span>
            <span class="cp">{%</span> <span class="k">block</span> <span class="nv">body</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;!--</span> <span class="nx">app</span><span class="o">/</span><span class="nx">Resources</span><span class="o">/</span><span class="nx">views</span><span class="o">/</span><span class="nx">base</span><span class="o">.</span><span class="nx">html</span><span class="o">.</span><span class="nx">php</span> <span class="o">--&gt;</span>
<span class="o">&lt;!</span><span class="nx">DOCTYPE</span> <span class="nx">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">html</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">head</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">meta</span> <span class="nx">http</span><span class="o">-</span><span class="nx">equiv</span><span class="o">=</span><span class="s2">&quot;Content-Type&quot;</span> <span class="nx">content</span><span class="o">=</span><span class="s2">&quot;text/html; charset=utf-8&quot;</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="nx">title</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;slots&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;Test Application&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x">&lt;/title&gt;</span>
<span class="x">    &lt;/head&gt;</span>
<span class="x">    &lt;body&gt;</span>
<span class="x">        &lt;div id=&quot;sidebar&quot;&gt;</span>
<span class="x">            </span><span class="cp">&lt;?php</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;slots&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">has</span><span class="p">(</span><span class="s1">&#39;sidebar&#39;</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">                </span><span class="cp">&lt;?php</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;slots&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">(</span><span class="s1">&#39;sidebar&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">            </span><span class="cp">&lt;?php</span> <span class="k">else</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">                &lt;ul&gt;</span>
<span class="x">                    &lt;li&gt;&lt;a href=&quot;/&quot;&gt;Home&lt;/a&gt;&lt;/li&gt;</span>
<span class="x">                    &lt;li&gt;&lt;a href=&quot;/blog&quot;&gt;Blog&lt;/a&gt;&lt;/li&gt;</span>
<span class="x">                &lt;/ul&gt;</span>
<span class="x">            </span><span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">        &lt;/div&gt;</span>

<span class="x">        &lt;div id=&quot;content&quot;&gt;</span>
<span class="x">            </span><span class="cp">&lt;?php</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;slots&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">    &lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Apesar da discuss?o sobre heran?a de template ser em termos do Twig,
a filosofia ? a mesma entre templates Twig e PHP.</p>
</div>
<p>Este template define o esqueleto do documento base HTML de um p?gina simples
de duas colunas. Neste exemplo, tr?s ?reas <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">block</span> <span class="pre">%}</span></tt> s?o definidas (<tt class="docutils literal"><span class="pre">title</span></tt>,
<tt class="docutils literal"><span class="pre">sidebar</span></tt> e <tt class="docutils literal"><span class="pre">body</span></tt>). Cada bloco pode ser sobreposto por um template filho
ou largado com sua implementa??o padr?o. Esse template poderia tamb?m ser processado
diretamente. Neste caso os blocos <tt class="docutils literal"><span class="pre">title</span></tt>, <tt class="docutils literal"><span class="pre">sidebar</span></tt> e <tt class="docutils literal"><span class="pre">body</span></tt> blocks deveriam
simplesmente reter os valores padr?o neste template.</p>
<p>Um template filho poderia ser como este:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# src/Acme/BlogBundle/Resources/views/Blog/index.html.twig #}</span>
<span class="cp">{%</span> <span class="k">extends</span> <span class="s1">&#39;::base.html.twig&#39;</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span>My cool blog posts<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">body</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">entry</span> <span class="k">in</span> <span class="nv">blog_entries</span> <span class="cp">%}</span>
        <span class="nt">&lt;h2&gt;</span><span class="cp">{{</span> <span class="nv">entry.title</span> <span class="cp">}}</span><span class="nt">&lt;/h2&gt;</span>
        <span class="nt">&lt;p&gt;</span><span class="cp">{{</span> <span class="nv">entry.body</span> <span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;!--</span> <span class="nx">src</span><span class="o">/</span><span class="nx">Acme</span><span class="o">/</span><span class="nx">BlogBundle</span><span class="o">/</span><span class="nx">Resources</span><span class="o">/</span><span class="nx">views</span><span class="o">/</span><span class="nx">Blog</span><span class="o">/</span><span class="nx">index</span><span class="o">.</span><span class="nx">html</span><span class="o">.</span><span class="nx">php</span> <span class="o">--&gt;</span>
<span class="o">&lt;?</span><span class="nx">php</span> <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">extend</span><span class="p">(</span><span class="s1">&#39;::base.html.php&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>

<span class="cp">&lt;?php</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;slots&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;My cool blog posts&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>

<span class="cp">&lt;?php</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;slots&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">start</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$blog_entries</span> <span class="k">as</span> <span class="nv">$entry</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">        &lt;h2&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$entry</span><span class="o">-&gt;</span><span class="na">getTitle</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x">&lt;/h2&gt;</span>
<span class="x">        &lt;p&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$entry</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x">&lt;/p&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="cp">&lt;?php</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;slots&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">stop</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">O template pai ? idenficado por uma sintaxe especial de string
(<tt class="docutils literal"><span class="pre">::base.html.twig</span></tt>) que indica que o template reside no diret?rio
<tt class="docutils literal"><span class="pre">app/Resources/views</span></tt> do projeto. Essa conven??o de nomeamento ?
explicada inteiramente em <a class="reference internal" href="#template-naming-locations"><em>Nomea??o de Template e Localiza??es</em></a>.</p>
</div>
<p>A chave para heran?a template ? a tag  <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">extends</span> <span class="pre">%}</span></tt>. Ela avisa
o engine de template para primeiro avaliar o template base, que configura
o layout e define v?rios blocos. O template filho ? ent?o processado,
ao ponto que os blocos  <tt class="docutils literal"><span class="pre">title</span></tt> e <tt class="docutils literal"><span class="pre">body</span></tt> do template pai sejam substitu?dos
por aqueles do filho. Dependendo do valor de <tt class="docutils literal"><span class="pre">blog_entries</span></tt>, a
sa?da poderia parecer com isso:</p>
<div class="highlight-python"><pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8" /&gt;
        &lt;title&gt;My cool blog posts&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div id="sidebar"&gt;
            &lt;ul&gt;
                &lt;li&gt;&lt;a href="/"&gt;Home&lt;/a&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href="/blog"&gt;Blog&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt;
        &lt;/div&gt;

        &lt;div id="content"&gt;
            &lt;h2&gt;My first post&lt;/h2&gt;
            &lt;p&gt;The body of the first post.&lt;/p&gt;

            &lt;h2&gt;Another post&lt;/h2&gt;
            &lt;p&gt;The body of the second post.&lt;/p&gt;
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p>Perceba que como o template filho n?o definiu um bloco <tt class="docutils literal"><span class="pre">sidebar</span></tt>, o
valor do template pai ? usado no lugar. Conte?do dentro de uma tag  <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">block</span> <span class="pre">%}</span></tt>
em um template pai ? sempre usado por padr?o.</p>
<p>Voc? pode usar muitos n?veis de heran?a quanto quiser. Na pr?xima sess?o,
um modelo comum de heran?a de tr?s n?veis ser? explicado assim como os templates
s?o organizados dentro de um projeto Symfony2.</p>
<p>Quando trabalhar com heran?a de template, aqui est?o algumas dicas para guardar na cabe?a:</p>
<ul>
<li><p class="first">Se voc? usa <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">extends</span> <span class="pre">%}</span></tt> em um template, ele deve ser a primeira tag
naquele template.</p>
</li>
<li><p class="first">Quanto mais tags <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">block</span> <span class="pre">%}</span></tt> voc? tiver no template base, melhor.
Lembre, templates filhos n?o precisam definir todos os blocos do pai, ent?o
criar tantos blocos em seus templates base quanto voc? quiser e dar a cada um
padr?o sensato. Quanto mais blocos seus templates base tiverem, mais flex?vel
seu layout ser?.</p>
</li>
<li><p class="first">Se voc? achar voc? mesmo duplicando conte?do em um determinado n?mero de templates, isto provavelmente
significa que voc? deveria mover aquele conte?do para um <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">block</span> <span class="pre">%}</span></tt> no template pai.
Em alguns casos, uma solu??o melhor pode ser mover o conte?do para um novo template
e <tt class="docutils literal"><span class="pre">incluir</span></tt> ele (veja <a class="reference internal" href="#including-templates"><em>Incluir outras Templates</em></a>).</p>
</li>
<li><p class="first">Se voc? precisa obter o conte?do de um bloco do template pai, voc?
pode usar a fun??o <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">parent()</span> <span class="pre">}}</span></tt>. Isso ? ?til se voc? quiser adicionar
ao conte?do de um bloco pai ao inv?s de sobrepor ele:</p>
<div class="highlight-python"><pre>.. code-block:: html+jinja

    {% block sidebar %}
        &lt;h3&gt;Table of Contents&lt;/h3&gt;
        ...
        {{ parent() }}
    {% endblock %}</pre>
</div>
</li>
</ul>
</div>
<div class="section" id="nomea-o-de-template-e-localiza-es">
<span id="template-naming-locations"></span><span id="index-5"></span><h2>Nomea??o de Template e Localiza??es<a class="headerlink" href="#nomea-o-de-template-e-localiza-es" title="Permalink to this headline">¶</a></h2>
<p>Por padr?o, templates podem residir em duas localiza??es diferentes:</p>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">app/Resources/views/</span></tt>: O diret?rio de aplica??o de <tt class="docutils literal"><span class="pre">views</span></tt> pode abrigar
templates bases para toda a aplica??o(ex: os layout de sua aplica??o) assim como
os tempates que sobrep?em templates de pacote (veja <a class="reference internal" href="#overriding-bundle-templates"><em>Sobrepondo Templates de Pacote</em></a>);</p>
<p>application-wide base templates (i.e. your application&#8217;s layouts) as well as
templates that override bundle templates (see
<a class="reference internal" href="#overriding-bundle-templates"><em>Sobrepondo Templates de Pacote</em></a>);</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">path/to/bundle/Resources/views/</span></tt>: Cada pacote abriga as templates dele no diret?rio
<tt class="docutils literal"><span class="pre">Resources/views</span></tt> (e sub-diret?rios). A maioria dos templates ir? residir dentro de
um pacote.</p>
</li>
</ul>
<p>Symfony2 usa a sintaxe de string <strong>bundle</strong>:<strong>controller</strong>:<strong>template</strong> para
templates. Isso permite v?rios tipos diferente de template, cada um residindo
em uma localiza??o especifica:</p>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">AcmeBlogBundle:Blog:index.html.twig</span></tt>: Esta sintaxe ? usada para especificar um
template para uma p?gina espec?fica. As tr?s partes do string, cada uma separada
por dois pontos, (<tt class="docutils literal"><span class="pre">:</span></tt>), signitca o seguinte:</p>
<blockquote>
<div><ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">AcmeBlogBundle</span></tt>: (<em>bundle</em>) o template reside entro de
<tt class="docutils literal"><span class="pre">AcmeBlogBundle</span></tt> (e.g. <tt class="docutils literal"><span class="pre">src/Acme/BlogBundle</span></tt>);</p>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">Blog</span></tt>: (<em>controller</em>) indica que o template reside dentro do</dt>
<dd><p class="first last">sub-diret?rio <tt class="docutils literal"><span class="pre">Blog</span></tt> de <tt class="docutils literal"><span class="pre">Resources/views</span></tt>;</p>
</dd>
</dl>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">index.html.twig</span></tt>: (<em>template</em>) o verdadeiro nome do arquivo ?
<tt class="docutils literal"><span class="pre">index.html.twig</span></tt>.</p>
</li>
</ul>
</div></blockquote>
<p>Assumindo que o <tt class="docutils literal"><span class="pre">AcmeBlogBundle</span></tt> reside em <tt class="docutils literal"><span class="pre">src/Acme/BlogBundle</span></tt>, o
atalho final para o layout seria <tt class="docutils literal"><span class="pre">src/Acme/BlogBundle/Resources/views/Blog/index.html.twig</span></tt>.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">AcmeBlogBundle::layout.html.twig</span></tt>: Essa sintaxe refere ao template base que
? espec?fica para <tt class="docutils literal"><span class="pre">AcmeBlogBundle</span></tt>. Since the middle, &#8220;controller&#8221;,
portion is missing (e.g. <tt class="docutils literal"><span class="pre">Blog</span></tt>), the template lives at
<tt class="docutils literal"><span class="pre">Resources/views/layout.html.twig</span></tt> inside <tt class="docutils literal"><span class="pre">AcmeBlogBundle</span></tt>.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">::base.html.twig</span></tt>: Esta sintaxe refere a uma template base para toda a aplica??o ou
layout. Perceba que a string come?a com dois sinais de dois pontos (<tt class="docutils literal"><span class="pre">::</span></tt>), significando
que ambas as partes <em>bundle</em>  <em>controller</em> est?o faltando. Isto significa
que o template n?o ? localizado em qualquer pacote, mas sim na raiz do
diret?rio <tt class="docutils literal"><span class="pre">app/Resources/views/</span></tt>.</p>
</li>
</ul>
<p>Na se??o <a class="reference internal" href="#overriding-bundle-templates"><em>Sobrepondo Templates de Pacote</em></a>, voc? ir? descobrir como cada
template reside dentro do <tt class="docutils literal"><span class="pre">AcmeBlogBundle</span></tt>, por exemplo, pode ser sobreposto
ao colocar um template de mesmo nome no diret?rio
<tt class="docutils literal"><span class="pre">app/Resources/AcmeBlogBundle/views/</span></tt>. Isso d? o poder de sobrepor templates de qualquer pacote pago.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Esperan?osamente, a sintaxe de nomea??o de template parece familiar - ? a mesma conven??o
para nomea??o usada para referir para <a class="reference internal" href="routing.html#controller-string-syntax"><em>Padrão de nomeação do Controller</em></a>.</p>
</div>
<div class="section" id="sufixo-de-template">
<h3>Sufixo de Template<a class="headerlink" href="#sufixo-de-template" title="Permalink to this headline">¶</a></h3>
<p>O formato <strong>bundle</strong>:<strong>controller</strong>:<strong>template</strong> de cada template especifica
<em>onde</em> o arquivo de template est? localizado. Cada nome de template tamb?m tem duas express?es
que especificam o <em>formato</em> e <em>engine</em> para aquela template.</p>
<ul class="simple">
<li><strong>AcmeBlogBundle:Blog:index.html.twig</strong> - formato HTML, engine Twig</li>
<li><strong>AcmeBlogBundle:Blog:index.html.php</strong> - formato HTML, engine PHP</li>
<li><strong>AcmeBlogBundle:Blog:index.css.twig</strong> - formato CSS, engine Twig</li>
</ul>
<p>Por padr?o, qualquer template Symfony2 ou pode ser escrito em Twig ou em PHP, e
a ?ltima  parte da extens?o (ex: <tt class="docutils literal"><span class="pre">.twig</span></tt> ou <tt class="docutils literal"><span class="pre">.php</span></tt>) especifica qual
dessas duas <em>engines</em> deveria ser usada. A primeira parte da extens?o,
(ex: <tt class="docutils literal"><span class="pre">.html</span></tt>, <tt class="docutils literal"><span class="pre">.css</span></tt>, etc) ? o formato final que o template ir?
gerar. Ao contr?rio de engine, que determina como Symfony2 analisa o template,
isso ? simplesmente uma t?tica organizacional em caso do mesmo recurso precisar
ser transformado como HTML(<tt class="docutils literal"><span class="pre">index.html.twig</span></tt>), XML (<tt class="docutils literal"><span class="pre">index.xml.twig</span></tt>),
ou qualquer outro formato. Para mais informa??ess, leia a se??o <a class="reference internal" href="#template-formats"><em>Formatos de Template</em></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As &#8220;engines&#8221; dispon?veis podem ser configurados e at? mesmo ter novas engines adicionadas.
Veja <a class="reference internal" href="#template-configuration"><em>Configura??o de Template</em></a> para mais detalhes.</p>
</div>
</div>
</div>
<div class="section" id="tags-e-helpers">
<span id="index-6"></span><h2>Tags e Helpers<a class="headerlink" href="#tags-e-helpers" title="Permalink to this headline">¶</a></h2>
<p>Voc? j? entende as bases do templates, como eles s?o chamados e como usar
heran?a de template. As partes mais dif?ceis est?o realmente atr?s de voc?. Nesta
se??o, voc? ir? aprender sobre um grande grande grupo de ferramentas dispon?veis para ajudar
a desempenhar as tarefas de template mais comuns como incluir outras templates,
vincular p?ginas e incluir imagens.</p>
<p>Symfony2 vem acompanhado com v?rias tags Twig especializadas e fun??es que
facilitam o trabalho do designer de template. Em PHP, o sistema de template providencia
um sistema extenso de <em>helper</em> que providencia funcionalidades ?teis no contexto
de template.</p>
<p>N?s realmente vimos umas poucas tags Twig constru?das (<tt class="docutils literal"><span class="pre">{%</span> <span class="pre">block</span> <span class="pre">%}</span></tt> e <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">extends</span> <span class="pre">%}</span></tt>)
como exemplo de um helper PHP (<tt class="docutils literal"><span class="pre">$view['slots']</span></tt>). Vamos aprender um
pouco mais.</p>
<div class="section" id="incluir-outras-templates">
<span id="including-templates"></span><span id="index-7"></span><h3>Incluir outras Templates<a class="headerlink" href="#incluir-outras-templates" title="Permalink to this headline">¶</a></h3>
<p>Voc? ir? frequntemente querer incluir a mesma template ou fragmento de c?digo em v?rias
p?ginas diferentes. Por exemplo, em uma aplica??o com &#8220;artigos de not?cias&#8221;, a exibi??o
do artigo no c?digo do template poderia ser usada numa p?gina de detalhes do artigo,
num a p?gina exibindo os artigos mais populares, ou em uma lista dos ?ltimos
artigos.</p>
<p>Quando voc? precisa reutilizar um peda?o de um c?digo PHP, voc? tipicamente move o c?digo
para uma nova classe ou fun??o PHP. O mesmo ? verdade para template. Ao mover o
c?digo do template reutilizado em um template pr?prio, ele pode ser inclu?do em qualquer outro
template. Primeiro, crie o template que voc? precisar? reutilizar.</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# src/Acme/ArticleBundle/Resources/views/Article/articleDetails.html.twig #}</span>
<span class="nt">&lt;h2&gt;</span><span class="cp">{{</span> <span class="nv">article.title</span> <span class="cp">}}</span><span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;h3</span> <span class="na">class=</span><span class="s">&quot;byline&quot;</span><span class="nt">&gt;</span>by <span class="cp">{{</span> <span class="nv">article.authorName</span> <span class="cp">}}</span><span class="nt">&lt;/h3&gt;</span>

<span class="nt">&lt;p&gt;</span>
  <span class="cp">{{</span> <span class="nv">article.body</span> <span class="cp">}}</span>
<span class="nt">&lt;/p&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;!--</span> <span class="nx">src</span><span class="o">/</span><span class="nx">Acme</span><span class="o">/</span><span class="nx">ArticleBundle</span><span class="o">/</span><span class="nx">Resources</span><span class="o">/</span><span class="nx">views</span><span class="o">/</span><span class="nx">Article</span><span class="o">/</span><span class="nx">articleDetails</span><span class="o">.</span><span class="nx">html</span><span class="o">.</span><span class="nx">php</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nv">$article</span><span class="o">-&gt;</span><span class="na">getTitle</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x">&lt;/h2&gt;</span>
<span class="x">&lt;h3 class=&quot;byline&quot;&gt;by </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$article</span><span class="o">-&gt;</span><span class="na">getAuthorName</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x">&lt;/h3&gt;</span>

<span class="x">&lt;p&gt;</span>
<span class="x">  </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$article</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;/p&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Incluir este template de qualquer outro template ? f?cil:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# src/Acme/ArticleBundle/Resources/Article/list.html.twig #}</span>
<span class="cp">{%</span> <span class="k">extends</span> <span class="s1">&#39;AcmeArticleBundle::layout.html.twig&#39;</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">body</span> <span class="cp">%}</span>
    <span class="nt">&lt;h1&gt;</span>Recent Articles<span class="nt">&lt;h1&gt;</span>

    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">article</span> <span class="k">in</span> <span class="nv">articles</span> <span class="cp">%}</span>
        <span class="cp">{%</span> <span class="k">include</span> <span class="s1">&#39;AcmeArticleBundle:Article:articleDetails.html.twig&#39;</span> <span class="k">with</span> <span class="o">{</span><span class="s1">&#39;article&#39;</span><span class="o">:</span> <span class="nv">article</span><span class="o">}</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;!--</span> <span class="nx">src</span><span class="o">/</span><span class="nx">Acme</span><span class="o">/</span><span class="nx">ArticleBundle</span><span class="o">/</span><span class="nx">Resources</span><span class="o">/</span><span class="nx">Article</span><span class="o">/</span><span class="k">list</span><span class="o">.</span><span class="nx">html</span><span class="o">.</span><span class="nx">php</span> <span class="o">--&gt;</span>
<span class="o">&lt;?</span><span class="nx">php</span> <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">extend</span><span class="p">(</span><span class="s1">&#39;AcmeArticleBundle::layout.html.php&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>

<span class="cp">&lt;?php</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;slots&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">start</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;h1&gt;Recent Articles&lt;/h1&gt;</span>

<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$articles</span> <span class="k">as</span> <span class="nv">$article</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;AcmeArticleBundle:Article:articleDetails.html.php&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;article&#39;</span> <span class="o">=&gt;</span> <span class="nv">$article</span><span class="p">))</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="cp">&lt;?php</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;slots&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">stop</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>O template ? inclu?do usando a tag <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">include</span> <span class="pre">%}</span></tt>. Perceba que o
nome do template segue a mesma conven??o t?pica. O template <tt class="docutils literal"><span class="pre">articleDetails.html.twig</span></tt>
usa uma vari?vel <tt class="docutils literal"><span class="pre">article</span></tt>. Isso ? passado por um template <tt class="docutils literal"><span class="pre">list.html.twig</span></tt>
usando o comando <tt class="docutils literal"><span class="pre">with</span></tt>.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">A sintaxe <tt class="docutils literal"><span class="pre">{'article':</span> <span class="pre">article}</span></tt> ? a sintaxe Twig padr?o para hash
maps (ex:  um array com chaves nomeadas). Se n?s precisarmos pass?-lo em elementos
m?ltiplos, ele poderia ser algo como: <tt class="docutils literal"><span class="pre">{'foo':</span> <span class="pre">foo,</span> <span class="pre">'bar':</span> <span class="pre">bar}</span></tt>.</p>
</div>
</div>
<div class="section" id="incorpora-o-de-controllers">
<span id="templating-embedding-controller"></span><span id="index-8"></span><h3>Incorpora??o de Controllers<a class="headerlink" href="#incorpora-o-de-controllers" title="Permalink to this headline">¶</a></h3>
<p>Em alguns casos, voc? precisa fazer mais do que incluir um template simples. Suponha
que voc? tenha uma barra lateral no seu layout que contenha os tr?s artigos mais recentes.
Recuperar os tr?s artigos podem incluir consultar a base de dados ou desempenhar
outra l?gica pesada que n?o pode ser a partir de um template.</p>
<p>A solu??o ? simplesmnte incorporar o resultado de um controller inteiro para
seu template. Primeiro, crie o controller que retorne um certo n?mero de artigos
recentes :</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/Acme/ArticleBundle/Controller/ArticleController.php</span>

<span class="k">class</span> <span class="nc">ArticleController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">recentArticlesAction</span><span class="p">(</span><span class="nv">$max</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// make a database call or other logic to get the &quot;$max&quot; most recent articles</span>
        <span class="nv">$articles</span> <span class="o">=</span> <span class="o">...</span><span class="p">;</span>

        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;AcmeArticleBundle:Article:recentList.html.twig&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;articles&#39;</span> <span class="o">=&gt;</span> <span class="nv">$articles</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A template <tt class="docutils literal"><span class="pre">recentList</span></tt> ? perfeitamente straightforward:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# src/Acme/ArticleBundle/Resources/views/Article/recentList.html.twig #}</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">article</span> <span class="k">in</span> <span class="nv">articles</span> <span class="cp">%}</span>
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/article/</span><span class="cp">{{</span> <span class="nv">article.slug</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
      <span class="cp">{{</span> <span class="nv">article.title</span> <span class="cp">}}</span>
  <span class="nt">&lt;/a&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;!--</span> <span class="nx">src</span><span class="o">/</span><span class="nx">Acme</span><span class="o">/</span><span class="nx">ArticleBundle</span><span class="o">/</span><span class="nx">Resources</span><span class="o">/</span><span class="nx">views</span><span class="o">/</span><span class="nx">Article</span><span class="o">/</span><span class="nx">recentList</span><span class="o">.</span><span class="nx">html</span><span class="o">.</span><span class="nx">php</span> <span class="o">--&gt;</span>
<span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$articles</span> <span class="k">as</span> <span class="nv">$article</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;a href=&quot;/article/</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$article</span><span class="o">-&gt;</span><span class="na">getSlug</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x">&quot;&gt;</span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$article</span><span class="o">-&gt;</span><span class="na">getTitle</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;/a&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Perceba que n?s fizemos uma gambiarra e fizemos um hardcode no artigo URL desse exemplo
(ex: <tt class="docutils literal"><span class="pre">/article/*slug*</span></tt>). Isso ? uma pr?tica ruim. Na pr?xima se??o,
voc? ir? aprender como fazer isso corretamente.</p>
</div>
<p>Para incluir um controller, voc? ir? precisar referir a ela usando a sintaxe de string
padr?o para controllers (isto ?, <strong>bundle</strong>:<strong>controller</strong>:<strong>action</strong>):</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# app/Resources/views/base.html.twig #}</span>
...

<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;sidebar&quot;</span><span class="nt">&gt;</span>
    <span class="cp">{%</span> <span class="k">render</span> <span class="s2">&quot;AcmeArticleBundle:Article:recentArticles&quot;</span> <span class="k">with</span> <span class="o">{</span><span class="s1">&#39;max&#39;</span><span class="o">:</span> <span class="m">3</span><span class="o">}</span> <span class="cp">%}</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;!--</span> <span class="nx">app</span><span class="o">/</span><span class="nx">Resources</span><span class="o">/</span><span class="nx">views</span><span class="o">/</span><span class="nx">base</span><span class="o">.</span><span class="nx">html</span><span class="o">.</span><span class="nx">php</span> <span class="o">--&gt;</span>
<span class="o">...</span>

<span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;sidebar&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;actions&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;AcmeArticleBundle:Article:recentArticles&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;max&#39;</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">))</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;/div&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Sempre quando voc? pensar que voc? precisa de uma vari?vel ou uma pe?a de informa??o que
voc? n?o tenha acesso em um template, considere transformar o controller.
Controllers s?o r?pidos para executar e promovem uma boa organiza??o e utiliza??o do c?digo.</p>
</div>
<div class="section" id="vincula-o-s-p-ginas">
<span id="index-9"></span><h3>Vincula??o ?s P?ginas<a class="headerlink" href="#vincula-o-s-p-ginas" title="Permalink to this headline">¶</a></h3>
<p>Criar links para outras p?gina em sua aplica??o ? uma das tarefas mais
comuns para um template. Ao inv?s de fazer um hardcode nas URLs nos templates, use a
fun??o do Twig <tt class="docutils literal"><span class="pre">path</span></tt> (ou o helper <tt class="docutils literal"><span class="pre">router</span></tt> no PHP) para gerar URLs baseadas na
configura??o de roteamento. Mais tarde, se voc? quiser modificar a URL de uma p?gina
particular, tudo que voc? precisar? fazer ? mudar as configura??es de roteamento; os
templates ir?o automatricamente gerar a nova URL.</p>
<p>Primeiro, vincule a p?gina &#8220;_welcome&#8221; , que ? acess?vel pela seguinte configura??o de
roteamento:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">_welcome</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">/</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeDemoBundle</span><span class="p-Indicator">:</span><span class="nv">Welcome</span><span class="p-Indicator">:</span><span class="nv">index</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;_welcome&quot;</span> <span class="na">pattern=</span><span class="s">&quot;/&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_controller&quot;</span><span class="nt">&gt;</span>AcmeDemoBundle:Welcome:index<span class="nt">&lt;/default&gt;</span>
<span class="nt">&lt;/route&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="nv">$collection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RouteCollection</span><span class="p">();</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;_welcome&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AcmeDemoBundle:Welcome:index&#39;</span><span class="p">,</span>
<span class="p">)));</span>

<span class="k">return</span> <span class="nv">$collection</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Para vincular ? p?gina, apenas use a fun??o Twig <tt class="docutils literal"><span class="pre">path</span></tt> e refira para a rota:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">path</span><span class="o">(</span><span class="s1">&#39;_welcome&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo </span><span class="si">$view[&#39;router&#39;]</span><span class="s2">-&gt;generate(&#39;_welcome&#39;) ?&gt;&quot;</span><span class="o">&gt;</span><span class="nx">Home</span><span class="o">&lt;/</span><span class="nx">a</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Como esperado, isso ir? gerar a URL <tt class="docutils literal"><span class="pre">/</span></tt>. Vamos ver como isso ir? funcionar com
uma rota mais complicada:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">article_show</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">/article/{slug}</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeArticleBundle</span><span class="p-Indicator">:</span><span class="nv">Article</span><span class="p-Indicator">:</span><span class="nv">show</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;article_show&quot;</span> <span class="na">pattern=</span><span class="s">&quot;/article/{slug}&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_controller&quot;</span><span class="nt">&gt;</span>AcmeArticleBundle:Article:show<span class="nt">&lt;/default&gt;</span>
<span class="nt">&lt;/route&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="nv">$collection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RouteCollection</span><span class="p">();</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;article_show&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span><span class="s1">&#39;/article/{slug}&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AcmeArticleBundle:Article:show&#39;</span><span class="p">,</span>
<span class="p">)));</span>

<span class="k">return</span> <span class="nv">$collection</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Neste caso, voc? precisa especificar tanto o nome da rota (<tt class="docutils literal"><span class="pre">article_show</span></tt>) como
um valor para o par?metro <tt class="docutils literal"><span class="pre">{slug}</span></tt>. Usando esta rota, vamos revisitar o
template <tt class="docutils literal"><span class="pre">recentList</span></tt> da sess?o anterior e vincular aos artigos
corretamente:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# src/Acme/ArticleBundle/Resources/views/Article/recentList.html.twig #}</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">article</span> <span class="k">in</span> <span class="nv">articles</span> <span class="cp">%}</span>
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">path</span><span class="o">(</span><span class="s1">&#39;article_show&#39;</span><span class="o">,</span> <span class="o">{</span> <span class="s1">&#39;slug&#39;</span><span class="o">:</span> <span class="nv">article.slug</span> <span class="o">})</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
      <span class="cp">{{</span> <span class="nv">article.title</span> <span class="cp">}}</span>
  <span class="nt">&lt;/a&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;!--</span> <span class="nx">src</span><span class="o">/</span><span class="nx">Acme</span><span class="o">/</span><span class="nx">ArticleBundle</span><span class="o">/</span><span class="nx">Resources</span><span class="o">/</span><span class="nx">views</span><span class="o">/</span><span class="nx">Article</span><span class="o">/</span><span class="nx">recentList</span><span class="o">.</span><span class="nx">html</span><span class="o">.</span><span class="nx">php</span> <span class="o">--&gt;</span>
<span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$articles</span> <span class="nx">in</span> <span class="nv">$article</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;a href=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;router&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="s1">&#39;article_show&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;slug&#39;</span> <span class="o">=&gt;</span> <span class="nv">$article</span><span class="o">-&gt;</span><span class="na">getSlug</span><span class="p">())</span> <span class="cp">?&gt;</span><span class="x">&quot;&gt;</span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$article</span><span class="o">-&gt;</span><span class="na">getTitle</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;/a&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>Voc? tamb?m pode gerar uma URL absoluta ao usar a fun??o <tt class="docutils literal"><span class="pre">url</span></tt> do Twig:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">url</span><span class="o">(</span><span class="s1">&#39;_welcome&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;</span>
</pre></div>
</div>
<p>O mesmo pode ser feito em templates PHP ao passar um terceiro argumento ao
m?todo <tt class="docutils literal"><span class="pre">generate()</span></tt>:</p>
<div class="last highlight-php"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo </span><span class="si">$view[&#39;router&#39;]</span><span class="s2">-&gt;generate(&#39;_welcome&#39;, array(), true) ?&gt;&quot;</span><span class="o">&gt;</span><span class="nx">Home</span><span class="o">&lt;/</span><span class="nx">a</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="vinculando-os-assets">
<span id="index-10"></span><h3>Vinculando os Assets<a class="headerlink" href="#vinculando-os-assets" title="Permalink to this headline">¶</a></h3>
<p>Templates podem frequentemente referir a imagens, Javascript, folhas de estilo e outros
recursos. Claro voc? poderia fazer um hardcode do atalho desses assets (ex: <tt class="docutils literal"><span class="pre">/images/logo.png</span></tt>),
mas Symfony2 providencia uma op??o mais din?mica via fun??o <tt class="docutils literal"><span class="pre">assets</span></tt> do Twig:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">asset</span><span class="o">(</span><span class="s1">&#39;images/logo.png&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">alt=</span><span class="s">&quot;Symfony!&quot;</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">asset</span><span class="o">(</span><span class="s1">&#39;css/blog.css&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">img</span> <span class="nx">src</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo </span><span class="si">$view[&#39;assets&#39;]</span><span class="s2">-&gt;getUrl(&#39;images/logo.png&#39;) ?&gt;&quot;</span> <span class="nx">alt</span><span class="o">=</span><span class="s2">&quot;Symfony!&quot;</span> <span class="o">/&gt;</span>

<span class="o">&lt;</span><span class="nb">link</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo </span><span class="si">$view[&#39;assets&#39;]</span><span class="s2">-&gt;getUrl(&#39;css/blog.css&#39;) ?&gt;&quot;</span> <span class="nx">rel</span><span class="o">=</span><span class="s2">&quot;stylesheet&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text/css&quot;</span> <span class="o">/&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>O principal prop?sito da fun??o <tt class="docutils literal"><span class="pre">asset</span></tt> ? tornar sua aplica??o mais port?til.
Se sua aplica??o reside na raiz do seu host (ex: <a class="reference external" href="http://example.com">http://example.com</a>),
ent?o os atalhos interpretados deveriam ser <tt class="docutils literal"><span class="pre">/images/logo.png</span></tt>. Mas se sua aplica??o
reside em um sub-diret?rio (ex: <a class="reference external" href="http://example.com/my_app">http://example.com/my_app</a>), cada caminho do asset
deveria interpretar com o diret?rio (e.g. <tt class="docutils literal"><span class="pre">/my_app/images/logo.png</span></tt>). A fun??o
<tt class="docutils literal"><span class="pre">asset</span></tt> toma conta disto ao determinar como sua aplica??o est?
sendo usada e gerando os atalhos de acordo com o correto.</p>
<p>Adicionalmente, se voc? usar fun??o asset, Symfony pode automaticamente
anexar uma string de consulta para asset, em detrimento de garantir que assets
est?ticos atualizados n?o ser?o armazenados quando distribu?dos. Por exemplo, <tt class="docutils literal"><span class="pre">/images/logo.png</span></tt> poderia
parecer como <tt class="docutils literal"><span class="pre">/images/logo.png?v2</span></tt>. Para mais informa??es, veja a op??o de configura??o
<em class="xref std std-ref">ref-framework-assets-version</em>.</p>
</div>
</div>
<div class="section" id="incluindo-folhas-de-estilo-e-javascript-no-twig">
<span id="index-11"></span><h2>Incluindo Folhas de Estilo e Javascript no Twig<a class="headerlink" href="#incluindo-folhas-de-estilo-e-javascript-no-twig" title="Permalink to this headline">¶</a></h2>
<p>Nenhum site seria completo sem incluir arquivos Javascript e folhas de estilo.
Em Symfony, a inclus?o desses assets ? elegantemente manipulada ao tirar
vantagem das heran?as de template do Symfony.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Esta se??o ir? ensinar voc? a filosofia por tr?s disto, incluindo folha de estilo
e asset Javascript em Symfony. Symfony tamb?m engloba outra biblioteca,
chamada Assetic, que segue essa filosofia mas tamb?m permite voc? fazer mais coisas
muito interessantes com esses assets. Para mais informa??es sobre
usar Assetic veja <tt class="xref doc docutils literal"><span class="pre">/cookbook/assetic/asset_management</span></tt>.</p>
</div>
<p>Comece adicionando dois blocos a seu template base que ir? abrigar seus assets:
uma chamada  <tt class="docutils literal"><span class="pre">stylesheets</span></tt> dentro da tag <tt class="docutils literal"><span class="pre">head</span></tt> e outra chamada <tt class="docutils literal"><span class="pre">javascripts</span></tt>
justamente acima do fechamento da tag <tt class="docutils literal"><span class="pre">body</span></tt>. Esses blocos ir?o conter todas as
folhas de estilo e Javascripts que voc? ir? precisar atrav?s do seu site:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# &#39;app/Resources/views/base.html.twig&#39; #}</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="c">{# ... #}</span>

        <span class="cp">{%</span> <span class="k">block</span> <span class="nv">stylesheets</span> <span class="cp">%}</span>
            <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">asset</span><span class="o">(</span><span class="s1">&#39;/css/main.css&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="nt">/&gt;</span>
        <span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="c">{# ... #}</span>

        <span class="cp">{%</span> <span class="k">block</span> <span class="nv">javascripts</span> <span class="cp">%}</span>
            <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">asset</span><span class="o">(</span><span class="s1">&#39;/js/main.js&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>Isso ? f?cil o bastante ! Mas e se voc? precisar incluir uma folha de estilo ou
Javascript de um template filho ? Por exemplo, suponha que voc? tenha uma p?gina
de contatos e voc? precise incluir uma folha de estilo <tt class="docutils literal"><span class="pre">contact.css</span></tt> <em>bem</em> naquela
p?gina. Dentro do template da p?gina de contatos, fa?a o seguinte:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# src/Acme/DemoBundle/Resources/views/Contact/contact.html.twig #}</span>
<span class="c">{# extends &#39;::base.html.twig&#39; #}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">stylesheets</span> <span class="cp">%}</span>
    <span class="cp">{{</span> <span class="nv">parent</span><span class="o">()</span> <span class="cp">}}</span>

    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">asset</span><span class="o">(</span><span class="s1">&#39;/css/contact.css&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="nt">/&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>

<span class="c">{# ... #}</span>
</pre></div>
</div>
<p>No template filho, voc? simplesmente sobrep?e o bloco <tt class="docutils literal"><span class="pre">stylesheets</span></tt> e
coloca sua nova tag de folha de estilo dentro daquele bloco. Claro, desde que voc? queira
adicionar ao conte?do do bloco pai (e realmente n?o ir? <a href="#id1"><span class="problematic" id="id2">*</span></a>substitu?-lo), voc?
deveria usar a fun??o <tt class="docutils literal"><span class="pre">parent()</span></tt> do Twig function para incluir tudo do bloco <tt class="docutils literal"><span class="pre">stylesheets</span></tt>
do template base.</p>
<p>Voc? pode tamb?m incluir assets localizados em seus arquivos de pacotes <tt class="docutils literal"><span class="pre">Resources/public</span></tt>.
Voc? precisar? executar o comando``php app/console assets:install target [&#8211;symlink]`` ,
que move (ou symlinks) arquivos dentro da localiza??o correta.
(target ? sempre por padr?o &#8220;web).</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">asset</span><span class="o">(</span><span class="s1">&#39;bundles/acmedemo/css/contact.css&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p>O resultado final ? uma p?gina que inclui ambas as folhas de estilo
<tt class="docutils literal"><span class="pre">main.css</span></tt> e <tt class="docutils literal"><span class="pre">contact.css</span></tt>.</p>
</div>
<div class="section" id="configurando-e-usando-o-servi-o-templating">
<span id="index-12"></span><h2>Configurando e usando o Servi?o <tt class="docutils literal"><span class="pre">templating</span></tt><a class="headerlink" href="#configurando-e-usando-o-servi-o-templating" title="Permalink to this headline">¶</a></h2>
<p>O cora??o do sistema de template em Symfony2 ? o template <tt class="docutils literal"><span class="pre">Engine</span></tt>.
Este objeto especial ? respons?vel por manipular templates e retornar
o conte?do deles. Quando voc? manipula um template em um controller, por exemplo,
voc? est? na verdade usando o servi?o do template engine. Por exemplo:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;AcmeArticleBundle:Article:index.html.twig&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>? equivalente a:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$engine</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">container</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;templating&#39;</span><span class="p">);</span>
<span class="nv">$content</span> <span class="o">=</span> <span class="nv">$engine</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;AcmeArticleBundle:Article:index.html.twig&#39;</span><span class="p">);</span>

<span class="k">return</span> <span class="nv">$response</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="nv">$content</span><span class="p">);</span>
</pre></div>
</div>
<p id="template-configuration">O engine de template (ou &#8220;servi?o&#8221;) ? pr?-configurada para trabalhar automaticamente
dentro de Symfony2. Ele pode, claro, ser configurado mais adiante no arquivo
de configura??o da aplica??o:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">framework</span><span class="p-Indicator">:</span>
    <span class="c1"># ...</span>
    <span class="l-Scalar-Plain">templating</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">engines</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="s">&#39;twig&#39;</span><span class="p-Indicator">]</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/config.xml --&gt;</span>
<span class="nt">&lt;framework:templating&gt;</span>
    <span class="nt">&lt;framework:engine</span> <span class="na">id=</span><span class="s">&quot;twig&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/framework:templating&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// app/config/config.php</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;framework&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="c1">// ...</span>
    <span class="s1">&#39;templating&#39;</span>      <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;engines&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;twig&#39;</span><span class="p">),</span>
    <span class="p">),</span>
<span class="p">));</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>V?rias op??es de configura??o est?o dispon?veis e est?o cobertos em
<tt class="xref doc docutils literal"><span class="pre">Configuration</span> <span class="pre">Appendix</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">O engine <tt class="docutils literal"><span class="pre">twig</span></tt> ? obrigat?rio para usar o webprofiler (bem como outros
pacotes de terceiros).</p>
</div>
</div>
<div class="section" id="sobrepondo-templates-de-pacote">
<span id="overriding-bundle-templates"></span><span id="index-13"></span><h2>Sobrepondo Templates de Pacote<a class="headerlink" href="#sobrepondo-templates-de-pacote" title="Permalink to this headline">¶</a></h2>
<p>A comunidade Symfony2 orgulha-se de si pr?pria em criar e manter pacotes
de alta qualidade (veja <a class="reference external" href="http://symfony2bundles.org">Symfony2Bundles.org</a>) para um grande n?mero de funcionalidades diferentes.
Uma vez que voc? use um pacote de terceiros, voc? ir? certamente precisar sobrepor e personalizar
um ou mais de seus templates.</p>
<p>Suponha que voc? incluiu o imagin?rio open-source <tt class="docutils literal"><span class="pre">AcmeBlogBundle</span></tt> em seu
projeto (ex: no diret?rio <tt class="docutils literal"><span class="pre">src/Acme/BlogBundle</span></tt>). E enquanto voc? estiver
realmente feliz com tudo, voc? quer sobrepor  a p?gina de &#8220;lista&#8221; do blog para
personalizar a marca??o especificamente para sua aplica??o. Ao se aprofundar no
controller <tt class="docutils literal"><span class="pre">Blog</span></tt> eo <tt class="docutils literal"><span class="pre">AcmeBlogBundle</span></tt>, voc? encontrar? o seguinte:</p>
<div class="highlight-python"><pre>public function indexAction()
{
    $blogs = // some logic to retrieve the blogs

    $this-&gt;render('AcmeBlogBundle:Blog:index.html.twig', array('blogs' =&gt; $blogs));
}</pre>
</div>
<p>Quando <tt class="docutils literal"><span class="pre">AcmeBlogBundle:Blog:index.html.twig</span></tt> ? manipulado, Symfony2 realmente
observa duas diferentes localiza??es para o template:</p>
<ol class="arabic simple">
<li><tt class="docutils literal"><span class="pre">app/Resources/AcmeBlogBundle/views/Blog/index.html.twig</span></tt></li>
<li><tt class="docutils literal"><span class="pre">src/Acme/BlogBundle/Resources/views/Blog/index.html.twig</span></tt></li>
</ol>
<p>Para sobrepor o template de pacote, s? copie o template <tt class="docutils literal"><span class="pre">index.html.twig</span></tt>
do pacote para  <tt class="docutils literal"><span class="pre">app/Resources/AcmeBlogBundle/views/Blog/index.html.twig</span></tt>
(o diret?rio <tt class="docutils literal"><span class="pre">app/Resources/AcmeBlogBundle</span></tt> n?o existir?o, ent?o voc? precisar?
cri?-lo). Voc? est? livre agora para personalizar o template.</p>
<p>Esta l?gica tamb?m se aplica a templates de pacote base. Suponha tamb?m que cada
template em  <tt class="docutils literal"><span class="pre">AcmeBlogBundle</span></tt> herda de um template base chamado
<tt class="docutils literal"><span class="pre">AcmeBlogBundle::layout.html.twig</span></tt>. Justo como antes, Symfony2 ir? observar os
seguintes dois lugares para o template:</p>
<ol class="arabic simple">
<li><tt class="docutils literal"><span class="pre">app/Resources/AcmeBlogBundle/views/layout.html.twig</span></tt></li>
<li><tt class="docutils literal"><span class="pre">src/Acme/BlogBundle/Resources/views/layout.html.twig</span></tt></li>
</ol>
<p>Uma vez novamente, para sobrepor o template, apenas copie ele para
<tt class="docutils literal"><span class="pre">app/Resources/AcmeBlogBundle/views/layout.html.twig</span></tt>. Voc? agora est? livre para
personalizar esta c?pia como voc? quiser.</p>
<p>Se voc? voltar um passo atr?s, ver? que Symfony2 sempre come?a a observar no
diret?rio <tt class="docutils literal"><span class="pre">app/Resources/{BUNDLE_NAME}/views/</span></tt> por um template. Se o
template n?o existe aqui, ele continua checando dentro do diret?rio
<tt class="docutils literal"><span class="pre">Resources/views</span></tt> do pr?prio pacote. Isso significa que todos os templates
do pacote podem ser sobrepostos ao coloc?-los no sub-diret?rio correto
<tt class="docutils literal"><span class="pre">app/Resources</span></tt>.</p>
<span class="target" id="templating-overriding-core-templates"></span><div class="section" id="sobrepondo-templates-centrais">
<span id="index-14"></span><h3>Sobrepondo Templates Centrais<a class="headerlink" href="#sobrepondo-templates-centrais" title="Permalink to this headline">¶</a></h3>
<p>Como o framework Symfony ? um pacote por si s?, templates centrais podem ser
sobrepostos da mesma forma. Por exemplo, o n?cleo <tt class="docutils literal"><span class="pre">TwigBundle</span></tt> cont?m
um n?meto de diferentes templates &#8220;exception&#8221; e &#8220;error&#8221; que podem ser sobrepostas
ao copiar cada uma do diret?rio <tt class="docutils literal"><span class="pre">Resources/views/Exception</span></tt> do <tt class="docutils literal"><span class="pre">TwigBundle</span></tt>
para, voc? adivinhou, o diret?rio
<tt class="docutils literal"><span class="pre">app/Resources/TwigBundle/views/Exception</span></tt> .</p>
</div>
</div>
<div class="section" id="heran-a-de-tr-s-n-veis">
<span id="index-15"></span><h2>Heran?a de Tr?s N?veis<a class="headerlink" href="#heran-a-de-tr-s-n-veis" title="Permalink to this headline">¶</a></h2>
<p>Um modo comum de usar heran?a ? usar uma aproxima??o em tr?s n?veis. Este
m?todo trabalha perfeitamente com tr?s tipos diferentes de templates que n?s
certamente cobrimos:</p>
<ul>
<li><p class="first">Criar um arquivo <tt class="docutils literal"><span class="pre">app/Resources/views/base.html.twig</span></tt> que cont?m o layout
principal para sua aplica??o (como nos exemplos anteriores). Internamente, este
template ? chamado <tt class="docutils literal"><span class="pre">::base.html.twig</span></tt>;</p>
</li>
<li><p class="first">Cria um template para cada &#8220;se??o&#8221; do seu site. Por exemplo, um <tt class="docutils literal"><span class="pre">AcmeBlogBundle</span></tt>,
teria um template chamado <tt class="docutils literal"><span class="pre">AcmeBlogBundle::layout.html.twig</span></tt> que cont?m somente
elementos espec?ficos para a sess?o no blog:</p>
<blockquote>
<div><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# src/Acme/BlogBundle/Resources/views/layout.html.twig #}</span>
<span class="cp">{%</span> <span class="k">extends</span> <span class="s1">&#39;::base.html.twig&#39;</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">body</span> <span class="cp">%}</span>
    <span class="nt">&lt;h1&gt;</span>Blog Application<span class="nt">&lt;/h1&gt;</span>

    <span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Criar templates individuais para cada p?gina e fazer cada um estender a template
de sess?o apropriada. Por exemplo, a p?gina &#8220;index&#8221; deveria ser chamada de algo
pr?ximo a <tt class="docutils literal"><span class="pre">AcmeBlogBundle:Blog:index.html.twig</span></tt> e listar os blogs de posts reais.</p>
<blockquote>
<div><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# src/Acme/BlogBundle/Resources/views/Blog/index.html.twig #}</span>
<span class="cp">{%</span> <span class="k">extends</span> <span class="s1">&#39;AcmeBlogBundle::layout.html.twig&#39;</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">entry</span> <span class="k">in</span> <span class="nv">blog_entries</span> <span class="cp">%}</span>
        <span class="nt">&lt;h2&gt;</span><span class="cp">{{</span> <span class="nv">entry.title</span> <span class="cp">}}</span><span class="nt">&lt;/h2&gt;</span>
        <span class="nt">&lt;p&gt;</span><span class="cp">{{</span> <span class="nv">entry.body</span> <span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<p>Perceba que este template estende a template de sess?o - (<tt class="docutils literal"><span class="pre">AcmeBlogBundle::layout.html.twig</span></tt>)
que por sua vez estende o layout de aplica??o base (<tt class="docutils literal"><span class="pre">::base.html.twig</span></tt>).
Isso ? o modelo comum de heran?a de tr?s n?veis.</p>
<p>Quando construir sua aplica??o, voc? pode escolher seguir esse m?todo ou simplesmente
tornar cada template de p?gina estender a template de aplica??o base diretamente
(ex: <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">extends</span> <span class="pre">'::base.html.twig'</span> <span class="pre">%}</span></tt>). O modelo de tr?s templates ?
o m?todo de melhor pr?tica usado por vendor bundles ent?o aquele template
base para um pacote pode ser facilmente sobreposto para propriamente estender seu
layout base de aplica??o.</p>
</div>
<div class="section" id="sa-da-para-escape">
<span id="index-16"></span><h2>Sa?da para escape<a class="headerlink" href="#sa-da-para-escape" title="Permalink to this headline">¶</a></h2>
<p>Quando gerar HTML de um template, sempre h? um risco que uma vari?vel de
template pode gerar HTML involut?rio ou codigo do lado cliente perigoso. O resultado
? que o conte?do din?mico poderia quebrar o HTML de uma p?gina de resultados ou
permitir um usu?rio maldoso realizar um ataque <a class="reference external" href="http://en.wikipedia.org/wiki/Cross-site_scripting">Cross Site Scripting</a> (XSS). Considere
esse exemplo cl?ssico:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-jinja"><div class="highlight"><pre><span class="x">Hello </span><span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="nx">Hello</span> <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nv">$name</span> <span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Imagine que o usu?rio entre o seguinte c?digo como o nome dele/dela:</p>
<div class="highlight-python"><pre>&lt;script&gt;alert('hello!')&lt;/script&gt;</pre>
</div>
<p>Sem qualquer outra sa?da de escape, o resultado da template ir? causar uma caixa de alerta
em JavaScript para saltar na tela:</p>
<div class="highlight-python"><pre>Hello &lt;script&gt;alert('hello!')&lt;/script&gt;</pre>
</div>
<p>E enquanto isso parece inofensivo, se um usu?rio pode chegar t?o longe, o
mesmo usu?rio deveria tamb?m ser capaz de escrever Javascript que realiza
a??es maliciosas dentro de uma ?rea segura de um usu?rio leg?timo e desconhecido.</p>
<p>A resposta para o problema ? sa?da para escape. Sem a sa?da para escape ativa,
o mesmo template ir? manipular inofensivamente, e literalmente imprimir a tag
<tt class="docutils literal"><span class="pre">script</span></tt> na tela:</p>
<div class="highlight-python"><pre>Hello &amp;lt;script&amp;gt;alert(&amp;#39;helloe&amp;#39;)&amp;lt;/script&amp;gt;</pre>
</div>
<p>Os sistemas de templating Twig e PHP aproximam-se do problema de formas diferentes.
Se voc? est? usando Twig, sa?da para escape ? ativado por padr?o e voc? est? protegido.
Em PHP, sa?da para escape n?o ? autom?tico, significando que voc? precisar? manualmente
fazer o escape quando necess?rio.</p>
<div class="section" id="sa-da-para-escape-em-twig">
<h3>Sa?da para escape em Twig<a class="headerlink" href="#sa-da-para-escape-em-twig" title="Permalink to this headline">¶</a></h3>
<p>Se voc? est? usando templates Twig, ent?o sa?da para escape ? ativado por padr?o. Isto
significa que voc? est? protegido externamente de consequencias acidentais por c?digo
submetido por usu?rio. Por padr?o, a sa?da para escape assume que o conte?do est?
sendo escapado pela sa?da HTML.</p>
<p>Em alguns casos, voc? precisar? desabilitar sa?da para escape quando voc? est? manipulando
uma vari?vel que ? confi?vel e cont?m marca??o que n?o poderia ter escape.
Suponha que usu?rios administrativos s?o capazes de escrever artigos que contenham
c?digo HTML. Por padr?o, Twig ir? escapar o corpo do artigo. Para faz?-lo normalamente,
adicione o filtro <tt class="docutils literal"><span class="pre">raw</span></tt>: <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">article.body</span> <span class="pre">|</span> <span class="pre">raw</span> <span class="pre">}}</span></tt>.</p>
<p>Voc? pode tamb?m desabilitar sa?da para escape dentro de uma ?rea <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">block</span> <span class="pre">%}</span></tt> ou
para um template inteiro. Para mais informa??es, veja <a class="reference external" href="http://twig.sensiolabs.org">Output Escaping</a> na
documenta??o do Twig.</p>
</div>
<div class="section" id="sa-da-para-escape-em-php">
<h3>Sa?da para escape em PHP<a class="headerlink" href="#sa-da-para-escape-em-php" title="Permalink to this headline">¶</a></h3>
<p>Sa?da para escape n?o ? autom?tica quando usamos templates PHP. Isso significa
que a menos que voc? escolha escapar uma vari?vel explicitamente, voc? n?o est?
protegido. Para usar sa?da para escape use o m?todo de view <tt class="docutils literal"><span class="pre">escape()</span></tt>:</p>
<div class="highlight-python"><pre>Hello &lt;?php echo $view-&gt;escape($name) ?&gt;</pre>
</div>
<p>Por padr?o, o m?todo <tt class="docutils literal"><span class="pre">escape()</span></tt> assume que a vari?vel est? sendo manipulada
dentro de um contexto HTML (e assim a vari?vel escapa e est? segura para o HTML).
O segundo argumento deixa voc? mudar o contexto. Por exemplo, para gerar algo
em uma string Javascript, use o contexto <tt class="docutils literal"><span class="pre">js</span></tt> :</p>
<div class="highlight-js"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">myMsg</span> <span class="o">=</span> <span class="s1">&#39;Hello &lt;?php echo $view-&gt;escape($name, &#39;</span><span class="nx">js</span><span class="s1">&#39;) ?&gt;&#39;</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="formatos-de-template">
<span id="template-formats"></span><span id="index-17"></span><h2>Formatos de Template<a class="headerlink" href="#formatos-de-template" title="Permalink to this headline">¶</a></h2>
<p>Templates s?o uma forma gen?rica de modificar conte?do em <em>qualquer</em> formato. E enquanto
em muitos casos voc? ir? usar templates para modificar conte?do HTML, um template pode
t?o f?cil como certo gerar JavaScript, CSS, XML ou qualquer outro formato que voc? possa sonhar.</p>
<p>Por exemplo, o mesmo &#8220;recurso&#8221; ? sempre modificado em diversos formatos diferentes.
Para modificar uma p?gina inicial de um artigo XML, simplesmente inclua o formato no
nome do template:</p>
<ul class="simple">
<li><em>nome do template XML</em>: <tt class="docutils literal"><span class="pre">AcmeArticleBundle:Article:index.xml.twig</span></tt></li>
<li><em>nome do arquivo do template XML</em>: <tt class="docutils literal"><span class="pre">index.xml.twig</span></tt></li>
</ul>
<p>Na realidade, isso ? nada mais que uma conven??o de nomea??o e o template
n?o ? realmente modificado de forma diferente ao baseado no formato dele.</p>
<p>Em muitos casos, voc? pode querer permitir um controller unit?rio para modificar
m?ltiplos formatos diferentes baseado no &#8220;formato de requisi??o&#8221;. Por aquela raz?o,
um padr?o comum ? fazer o seguinte:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$format</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getRequest</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getRequestFormat</span><span class="p">();</span>

    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;AcmeBlogBundle:Blog:index.&#39;</span><span class="o">.</span><span class="nv">$format</span><span class="o">.</span><span class="s1">&#39;.twig&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>O <tt class="docutils literal"><span class="pre">getRequestFormat</span></tt> no objeto <tt class="docutils literal"><span class="pre">Request</span></tt> padroniza para <tt class="docutils literal"><span class="pre">html</span></tt>,
mas pode retornar qualquer outro formato baseado no formato solicitado pelo usu?rio.
O formato solicitado ? frequentemente mais gerenciado pelo roteamento, onde uma rota
pode ser configurada para que <tt class="docutils literal"><span class="pre">/contact</span></tt>  configure o formato requisitado <tt class="docutils literal"><span class="pre">html</span></tt> enquanto
<tt class="docutils literal"><span class="pre">/contact.xml</span></tt> configure o formato para <tt class="docutils literal"><span class="pre">xml</span></tt>. Para mais informa??es, veja
<a class="reference internal" href="routing.html#advanced-routing-example"><em>Advanced Example in the Routing chapter</em></a>.</p>
<p>Para criar links que incluam o par?metro de formato, inclua uma chave <tt class="docutils literal"><span class="pre">_format</span></tt>
no detalhe do par?metro:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">path</span><span class="o">(</span><span class="s1">&#39;article_show&#39;</span><span class="o">,</span> <span class="o">{</span><span class="s1">&#39;id&#39;</span><span class="o">:</span> <span class="m">123</span><span class="o">,</span> <span class="s1">&#39;_format&#39;</span><span class="o">:</span> <span class="s1">&#39;pdf&#39;</span><span class="o">})</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
    PDF Version
<span class="nt">&lt;/a&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-html+php"><div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;router&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="s1">&#39;article_show&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="mi">123</span><span class="p">,</span> <span class="s1">&#39;_format&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;pdf&#39;</span><span class="p">))</span> <span class="cp">?&gt;</span><span class="s">&quot;</span><span class="nt">&gt;</span>
    PDF Version
<span class="nt">&lt;/a&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="considera-es-finais">
<h2>Considera??es finais<a class="headerlink" href="#considera-es-finais" title="Permalink to this headline">¶</a></h2>
<p>O engine de template em Symfony ? uma ferramenta poderosa que pode ser usada cada momento
que voc? precisa para gerar conte?do de apresenta??o em HTML, XML ou qualquer outro formato.
E apesar de tempaltes serem um jeito comum de gerar conte?do em um controller,
o uso deles n?o s?o obrigat?rios. O objeto <tt class="docutils literal"><span class="pre">Response</span></tt> object retornado por um controller
pode ser criado com ou sem o uso de um template:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// creates a Response object whose content is the rendered template</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;AcmeArticleBundle:Article:index.html.twig&#39;</span><span class="p">);</span>

<span class="c1">// creates a Response object whose content is simple text</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="s1">&#39;response content&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Engine de template do Symfony ? muito flex?vel e dois editores de template
diferentes est?o dispon?veis por padr?o: os tradicionais templates do <em>PHP</em> e os
polidos e poderosos templates do <em>Twig</em> . Ambos suportam uma hierarquia de template e
v?m empacotados com um conjunto rico de fun??es helper capazes de realizar
as tarefas mais comuns.</p>
<p>No geral, o t?pico de template poderia ser pensado como uma ferramenta poderosa
que est? ? sua disposi??o. Em alguns casos, voc? pode n?o precisar modificar um template,
e em Symfony2, isso ? absolutamente legal.</p>
</div>
<div class="section" id="aprenda-mais-do-cookbook">
<h2>Aprenda mais do Cookbook<a class="headerlink" href="#aprenda-mais-do-cookbook" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><tt class="xref doc docutils literal"><span class="pre">/cookbook/templating/PHP</span></tt></li>
<li><tt class="xref doc docutils literal"><span class="pre">/cookbook/controller/error_pages</span></tt></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Criando e usando Templates</a><ul>
<li><a class="reference internal" href="#templates">Templates</a><ul>
<li><a class="reference internal" href="#cache-do-template-twig">Cache do Template Twig</a></li>
</ul>
</li>
<li><a class="reference internal" href="#heran-a-e-layouts-de-template">Heran?a e Layouts de Template</a></li>
<li><a class="reference internal" href="#nomea-o-de-template-e-localiza-es">Nomea??o de Template e Localiza??es</a><ul>
<li><a class="reference internal" href="#sufixo-de-template">Sufixo de Template</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tags-e-helpers">Tags e Helpers</a><ul>
<li><a class="reference internal" href="#incluir-outras-templates">Incluir outras Templates</a></li>
<li><a class="reference internal" href="#incorpora-o-de-controllers">Incorpora??o de Controllers</a></li>
<li><a class="reference internal" href="#vincula-o-s-p-ginas">Vincula??o ?s P?ginas</a></li>
<li><a class="reference internal" href="#vinculando-os-assets">Vinculando os Assets</a></li>
</ul>
</li>
<li><a class="reference internal" href="#incluindo-folhas-de-estilo-e-javascript-no-twig">Incluindo Folhas de Estilo e Javascript no Twig</a></li>
<li><a class="reference internal" href="#configurando-e-usando-o-servi-o-templating">Configurando e usando o Servi?o <tt class="docutils literal"><span class="pre">templating</span></tt></a></li>
<li><a class="reference internal" href="#sobrepondo-templates-de-pacote">Sobrepondo Templates de Pacote</a><ul>
<li><a class="reference internal" href="#sobrepondo-templates-centrais">Sobrepondo Templates Centrais</a></li>
</ul>
</li>
<li><a class="reference internal" href="#heran-a-de-tr-s-n-veis">Heran?a de Tr?s N?veis</a></li>
<li><a class="reference internal" href="#sa-da-para-escape">Sa?da para escape</a><ul>
<li><a class="reference internal" href="#sa-da-para-escape-em-twig">Sa?da para escape em Twig</a></li>
<li><a class="reference internal" href="#sa-da-para-escape-em-php">Sa?da para escape em PHP</a></li>
</ul>
</li>
<li><a class="reference internal" href="#formatos-de-template">Formatos de Template</a></li>
<li><a class="reference internal" href="#considera-es-finais">Considera??es finais</a></li>
<li><a class="reference internal" href="#aprenda-mais-do-cookbook">Aprenda mais do Cookbook</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="routing.html"
                        title="previous chapter">Roteamento</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="doctrine.html"
                        title="next chapter">Bancos de Dados e Doctrine (&#8220;O Model&#8221;)</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/book/templating.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="doctrine.html" title="Bancos de Dados e Doctrine (“O Model”)"
             >next</a> |</li>
        <li class="right" >
          <a href="routing.html" title="Roteamento"
             >previous</a> |</li>
        <li><a href="../index.html">Symfony2Docs 2.0.x documentation</a> &raquo;</li>
          <li><a href="index.html" >Livro</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Symfony Team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>