

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Roteamento &mdash; Symfony2Docs 2.0.x documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.x',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Symfony2Docs 2.0.x documentation" href="../index.html" />
    <link rel="up" title="Livro" href="index.html" />
    <link rel="next" title="Criando e usando Templates" href="templating.html" />
    <link rel="prev" title="Controlador" href="controller.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="templating.html" title="Criando e usando Templates"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="controller.html" title="Controlador"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Symfony2Docs 2.0.x documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Livro</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="roteamento">
<span id="index-0"></span><h1>Roteamento<a class="headerlink" href="#roteamento" title="Permalink to this headline">¶</a></h1>
<p>URLs bonitas são uma obrigação absoluta para qualquer aplicação web séria. Isto
significa deixar para trás URLs feias como <tt class="docutils literal"><span class="pre">index.php?article_id=57</span></tt> em favor
de algo como <tt class="docutils literal"><span class="pre">/read/intro-to-symfony</span></tt>.</p>
<p>Ter flexibilidade é ainda mais importante. E se você precisasse mudar a
URL de uma página de <tt class="docutils literal"><span class="pre">/blog</span></tt> para <tt class="docutils literal"><span class="pre">/news</span></tt>? Quantos links você precisaria para
investigá-los e atualizar para fazer a mudança ? Se você está usando o roteador do Symfony,
a mudança é simples.</p>
<p>O roteador do Symfony2 deixa você definir URLs criativas que você mapeia para diferentes
áreas de sua aplicação. No final deste capítulo, você será capaz de :
* Criar rotas complexas que mapeiam para os controllers
* Gerar URLs dentro de templates e controllers
* Carregar recursos de roteamento  de pacotes (ou algum lugar a mais)
* Depurar suas rotas</p>
<div class="section" id="roteamento-em-acao">
<span id="index-1"></span><h2>Roteamento em Ação<a class="headerlink" href="#roteamento-em-acao" title="Permalink to this headline">¶</a></h2>
<p>Um <em>rota</em> é um mapa de um padrão URL para um controller. Por exemplo, suponha
que você queira ajustar qualquer URL como <tt class="docutils literal"><span class="pre">/blog/my-post</span></tt> ou <tt class="docutils literal"><span class="pre">/blog/all-about-symfony</span></tt>
e enviá-la ao controller que pode olhar e mudar aquela entrada do blog.
A rota é simples:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/routing.yml</span>
<span class="l-Scalar-Plain">blog_show</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>   <span class="l-Scalar-Plain">/blog/{slug}</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span>  <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeBlogBundle</span><span class="p-Indicator">:</span><span class="nv">Blog</span><span class="p-Indicator">:</span><span class="nv">show</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/routing.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing http://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;blog_show&quot;</span> <span class="na">pattern=</span><span class="s">&quot;/blog/{slug}&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_controller&quot;</span><span class="nt">&gt;</span>AcmeBlogBundle:Blog:show<span class="nt">&lt;/default&gt;</span>
    <span class="nt">&lt;/route&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// app/config/routing.php</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\RouteCollection</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Route</span><span class="p">;</span>

<span class="nv">$collection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RouteCollection</span><span class="p">();</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;blog_show&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span><span class="s1">&#39;/blog/{slug}&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AcmeBlogBundle:Blog:show&#39;</span><span class="p">,</span>
<span class="p">)));</span>

<span class="k">return</span> <span class="nv">$collection</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>O padrão definido pela rota <tt class="docutils literal"><span class="pre">blog_show</span></tt> age como <tt class="docutils literal"><span class="pre">/blog/*</span></tt> onde
o coringa é dado pelo nome <tt class="docutils literal"><span class="pre">slug</span></tt>. Para a URL <tt class="docutils literal"><span class="pre">/blog/my-blog-post</span></tt>,
a variável <tt class="docutils literal"><span class="pre">slug</span></tt> obtém um valor de <tt class="docutils literal"><span class="pre">my-blog-post</span></tt>, que está disponível
para você usar em seu controller (continue lendo).</p>
<p>O parâmetro <tt class="docutils literal"><span class="pre">_controller</span></tt> é uma chave especial que avisa o Symfony qual controller
deveria ser executado quando uma URL corresponde a essa rota. A string <tt class="docutils literal"><span class="pre">_controller</span></tt>
é chamada <a class="reference internal" href="#controller-string-syntax"><em>logical name</em></a>. Ela segue um
padrão que aponta para uma classe e método PHP específico:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/Acme/BlogBundle/Controller/BlogController.php</span>

<span class="k">namespace</span> <span class="nx">Acme\BlogBundle\Controller</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\Controller</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">BlogController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">showAction</span><span class="p">(</span><span class="nv">$slug</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$blog</span> <span class="o">=</span> <span class="c1">// use the $slug varible to query the database</span>

        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;AcmeBlogBundle:Blog:show.html.twig&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;blog&#39;</span> <span class="o">=&gt;</span> <span class="nv">$blog</span><span class="p">,</span>
        <span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Parabéns ! Você agora criou sua primeira rota conectou ela a
um controller. Agora, quando você visitar <tt class="docutils literal"><span class="pre">/blog/my-post</span></tt>, o controller <tt class="docutils literal"><span class="pre">showAction</span></tt>
será executado e a variável <tt class="docutils literal"><span class="pre">$slug</span></tt> será igual a <tt class="docutils literal"><span class="pre">my-post</span></tt>.</p>
<p>Esse é o objetivo do roteador do Symfony2: mapear a URL de uma requisição para um
controller. Ao longo do caminho, você aprenderá todos os tipos de truques que tornam o mapeamento fácil,
mesmo das URLS mais complexas.</p>
</div>
<div class="section" id="roteamento-por-debaixo-do-capuz">
<span id="index-2"></span><h2>Roteamento: Por debaixo do capuz<a class="headerlink" href="#roteamento-por-debaixo-do-capuz" title="Permalink to this headline">¶</a></h2>
<p>Quando uma requisição é feita para sua aplicação, ela contém um endereço para
o &#8220;recurso&#8221; exato que o cliente está requisitando.Esse endereço é chamado de
URL, (ou URI), e poderia ser <tt class="docutils literal"><span class="pre">/contact</span></tt>, <tt class="docutils literal"><span class="pre">/blog/read-me</span></tt>, ou qualquer coisa
a mais. Considere a seguinte requisição de exemplo :</p>
<div class="highlight-text"><div class="highlight"><pre>GET /blog/my-blog-post
</pre></div>
</div>
<p>O objetido do sistema de roteamento do Symfony2 é analisar esta URL e determinar
qual controller deveria ser executado. O processo interior parece isso:</p>
<ol class="arabic simple">
<li>A requisação é controlada pelo front controller do Symfony2 front controller (ex: <tt class="docutils literal"><span class="pre">app.php</span></tt>);</li>
<li>O núcleo do Symfony2 (ex: Kernel) pergunta ao roteador para inspecionar a requisição;</li>
<li>O roteador ajusta a URL recebida para uma rota específica e retorna informação
sobre a rota, incluindo o controller que deveria ser executado;</li>
<li>O kernel do Symfony2 executa o controller, que retorna por último
um objeto <tt class="docutils literal"><span class="pre">Response</span></tt>.</li>
</ol>
<div class="figure align-center">
<img alt="Symfony2 request flow" src="../_images/request-flow.png" />
<p class="caption">A camada de roteamento é  uma ferramenta que traduza a URL recebida em um controller
específico para executar.</p>
</div>
</div>
<div class="section" id="criando-rotas">
<span id="index-3"></span><h2>Criando rotas<a class="headerlink" href="#criando-rotas" title="Permalink to this headline">¶</a></h2>
<p>Symfony carrega todas as rotas para sua aplicação de um arquivo de configuração
de roteamento. O arquivo é geralmente <tt class="docutils literal"><span class="pre">app/config/routing.yml</span></tt>, mas pode ser configurado
para ser qualquer coisa (incluindo um arquivo XML ou PHP) via arquivo de configuração
de aplicação:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">framework</span><span class="p-Indicator">:</span>
    <span class="c1"># ...</span>
    <span class="l-Scalar-Plain">router</span><span class="p-Indicator">:</span>        <span class="p-Indicator">{</span> <span class="nv">resource</span><span class="p-Indicator">:</span> <span class="s">&quot;%kernel.root_dir%/config/routing.yml&quot;</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><pre>&lt;!-- app/config/config.xml --&gt;
&lt;framework:config ...&gt;
    &lt;!-- ... --&gt;
    &lt;framework:router resource="%kernel.root_dir%/config/routing.xml" /&gt;
&lt;/framework:config&gt;</pre>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// app/config/config.php</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;framework&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="c1">// ...</span>
    <span class="s1">&#39;router&#39;</span>        <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;resource&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;%kernel.root_dir%/config/routing.php&#39;</span><span class="p">),</span>
<span class="p">));</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Mesmo que toda as rotas sejam carregadas de um arquivo só, é uma prática comum
incluir recursos de roteamento adicionais de dentro do arquivo.
Veja a seção:ref:<cite>routing-include-external-resources</cite> para mais informação.</p>
</div>
<div class="section" id="configuracao-de-rota-basica">
<h3>Configuração de rota básica<a class="headerlink" href="#configuracao-de-rota-basica" title="Permalink to this headline">¶</a></h3>
<p>Definir uma rota é fácil, e uma aplicação típica terá um monte de rotas.
A basic route consists of just two parts: the <tt class="docutils literal"><span class="pre">pattern</span></tt> to match and a
<tt class="docutils literal"><span class="pre">defaults</span></tt> array:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">_welcome</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>   <span class="l-Scalar-Plain">/</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span>  <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeDemoBundle</span><span class="p-Indicator">:</span><span class="nv">Main</span><span class="p-Indicator">:</span><span class="nv">homepage</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>

<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing http://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;_welcome&quot;</span> <span class="na">pattern=</span><span class="s">&quot;/&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_controller&quot;</span><span class="nt">&gt;</span>AcmeDemoBundle:Main:homepage<span class="nt">&lt;/default&gt;</span>
    <span class="nt">&lt;/route&gt;</span>

<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\Routing\RouteCollection</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Route</span><span class="p">;</span>

<span class="nv">$collection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RouteCollection</span><span class="p">();</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;_welcome&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AcmeDemoBundle:Main:homepage&#39;</span><span class="p">,</span>
<span class="p">)));</span>

<span class="k">return</span> <span class="nv">$collection</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>A rota combina a homepage (<tt class="docutils literal"><span class="pre">/</span></tt>) e mapeia ele para o controller
<tt class="docutils literal"><span class="pre">AcmeDemoBundle:Main:homepage</span></tt>. A string <tt class="docutils literal"><span class="pre">_controller</span></tt> é traduzida pelo Symfony2 em uma
função verdadeira do PHP e exectudada. Aquele processo irá ser explicado brevemente
na seção <a class="reference internal" href="#controller-string-syntax"><em>Padrão de nomeação do Controller</em></a>.</p>
</div>
<div class="section" id="roteando-com-espacos-reservados">
<span id="index-4"></span><h3>Roteando com Espaços reservados<a class="headerlink" href="#roteando-com-espacos-reservados" title="Permalink to this headline">¶</a></h3>
<p>Claro que o sistema de roteamento suporta rotas muito mais interessantes. Muitas
rotas irão conter uma ou mais chamadas de espaços reservados &#8220;coringa&#8221;:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">blog_show</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>   <span class="l-Scalar-Plain">/blog/{slug}</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span>  <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeBlogBundle</span><span class="p-Indicator">:</span><span class="nv">Blog</span><span class="p-Indicator">:</span><span class="nv">show</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>

<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing http://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;blog_show&quot;</span> <span class="na">pattern=</span><span class="s">&quot;/blog/{slug}&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_controller&quot;</span><span class="nt">&gt;</span>AcmeBlogBundle:Blog:show<span class="nt">&lt;/default&gt;</span>
    <span class="nt">&lt;/route&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\Routing\RouteCollection</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Route</span><span class="p">;</span>

<span class="nv">$collection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RouteCollection</span><span class="p">();</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;blog_show&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span><span class="s1">&#39;/blog/{slug}&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AcmeBlogBundle:Blog:show&#39;</span><span class="p">,</span>
<span class="p">)));</span>

<span class="k">return</span> <span class="nv">$collection</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>O padrão irá corresponder a qualquer coisa que pareça <tt class="docutils literal"><span class="pre">/blog/*</span></tt>. Melhor ainda,
o valor correspondendo ao espaço reservado <tt class="docutils literal"><span class="pre">{slug}</span></tt> estará disponível no seu controller.
Em outras palavras, se a URL é <tt class="docutils literal"><span class="pre">/blog/hello-world</span></tt>, uma variável
<tt class="docutils literal"><span class="pre">$slug</span></tt>, com o valor de <tt class="docutils literal"><span class="pre">hello-world</span></tt>, estará disponível no controller.
Isto pode ser usado, por exemplo, para carregar o post do blog correspondendo àquela string.</p>
<p>Este padrão <em>não</em> irá, entretanto, simplesmente ajustar <tt class="docutils literal"><span class="pre">/blog</span></tt>. Isso é porque,
por padrão, todos os espaços reservados são requeridos. Isto pode ser mudado ao adicionar um valor
de espaço reservado ao array <tt class="docutils literal"><span class="pre">defaults</span></tt>.</p>
</div>
<div class="section" id="espacos-reservados-requeridos-e-opcionais">
<h3>Espaços reservados Requeridos e Opcionais<a class="headerlink" href="#espacos-reservados-requeridos-e-opcionais" title="Permalink to this headline">¶</a></h3>
<p>Para tornar as coisas mais excitantes, adicione uma nova rota que mostre uma lista de todos
os posts do blog para essa aplicação de blog imaginária:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">blog</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>   <span class="l-Scalar-Plain">/blog</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span>  <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeBlogBundle</span><span class="p-Indicator">:</span><span class="nv">Blog</span><span class="p-Indicator">:</span><span class="nv">index</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>

<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing http://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;blog&quot;</span> <span class="na">pattern=</span><span class="s">&quot;/blog&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_controller&quot;</span><span class="nt">&gt;</span>AcmeBlogBundle:Blog:index<span class="nt">&lt;/default&gt;</span>
    <span class="nt">&lt;/route&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\Routing\RouteCollection</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Route</span><span class="p">;</span>

<span class="nv">$collection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RouteCollection</span><span class="p">();</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span><span class="s1">&#39;/blog&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AcmeBlogBundle:Blog:index&#39;</span><span class="p">,</span>
<span class="p">)));</span>

<span class="k">return</span> <span class="nv">$collection</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Até agora, essa rota é tão simples quanto possível - contém nenhum espaço reservado
e só irá corresponder à URL exata <tt class="docutils literal"><span class="pre">/blog</span></tt>. Mas e se você precisar dessa rota
para suportar paginação, onde <tt class="docutils literal"><span class="pre">/blog/2</span></tt> mostre a segunda página do entradas do
blog ? Atualize a rota para ter uma nova <tt class="docutils literal"><span class="pre">{page}</span></tt>  de espaço reservado:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">blog</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>   <span class="l-Scalar-Plain">/blog/{page}</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span>  <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeBlogBundle</span><span class="p-Indicator">:</span><span class="nv">Blog</span><span class="p-Indicator">:</span><span class="nv">index</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>

<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing http://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;blog&quot;</span> <span class="na">pattern=</span><span class="s">&quot;/blog/{page}&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_controller&quot;</span><span class="nt">&gt;</span>AcmeBlogBundle:Blog:index<span class="nt">&lt;/default&gt;</span>
    <span class="nt">&lt;/route&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\Routing\RouteCollection</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Route</span><span class="p">;</span>

<span class="nv">$collection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RouteCollection</span><span class="p">();</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span><span class="s1">&#39;/blog/{page}&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AcmeBlogBundle:Blog:index&#39;</span><span class="p">,</span>
<span class="p">)));</span>

<span class="k">return</span> <span class="nv">$collection</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Como o espaço reservado <tt class="docutils literal"><span class="pre">{slug}</span></tt> anterior, o valor correspondendo a <tt class="docutils literal"><span class="pre">{page}</span></tt>
estará disponível dentro do seu controller. Este valor pode ser usado para determinar qual
conjunto de posts do blog mostrar para determinada página.</p>
<p>Mas espere ! Como espaços reservados são requeridos por padrão, essa rota não irá
mais corresponder simplesmente a  <tt class="docutils literal"><span class="pre">/blog</span></tt>. Ao invés disso, para ver a página 1 do blog,
você precisaria usar a URL <tt class="docutils literal"><span class="pre">/blog/1</span></tt>! Como não há meios para uma aplicação web ricase
comportar, modifique a rota para fazer o parâmetro <tt class="docutils literal"><span class="pre">{page}</span></tt> opcional.
Isto é feito ao incluir na coleção <tt class="docutils literal"><span class="pre">defaults</span></tt>:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">blog</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>   <span class="l-Scalar-Plain">/blog/{page}</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span>  <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeBlogBundle</span><span class="p-Indicator">:</span><span class="nv">Blog</span><span class="p-Indicator">:</span><span class="nv">index</span><span class="p-Indicator">,</span> <span class="nv">page</span><span class="p-Indicator">:</span> <span class="nv">1</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>

<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing http://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;blog&quot;</span> <span class="na">pattern=</span><span class="s">&quot;/blog/{page}&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_controller&quot;</span><span class="nt">&gt;</span>AcmeBlogBundle:Blog:index<span class="nt">&lt;/default&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;page&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/default&gt;</span>
    <span class="nt">&lt;/route&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\Routing\RouteCollection</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Route</span><span class="p">;</span>

<span class="nv">$collection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RouteCollection</span><span class="p">();</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span><span class="s1">&#39;/blog/{page}&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AcmeBlogBundle:Blog:index&#39;</span><span class="p">,</span>
    <span class="s1">&#39;page&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">)));</span>

<span class="k">return</span> <span class="nv">$collection</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Ao adicionar <tt class="docutils literal"><span class="pre">page</span></tt> para a chave <tt class="docutils literal"><span class="pre">defaults</span></tt>, o espaço reservado <tt class="docutils literal"><span class="pre">{page}</span></tt> não é mais
requerido. A URL <tt class="docutils literal"><span class="pre">/blog</span></tt> irá corresponder a essa rota e o valor do
parâmetro <tt class="docutils literal"><span class="pre">page</span></tt> será fixado para <tt class="docutils literal"><span class="pre">1</span></tt>. A URL <tt class="docutils literal"><span class="pre">/blog/2</span></tt> irá também
corresponder, atribuindo ao parâmetro <tt class="docutils literal"><span class="pre">page</span></tt> o valor <tt class="docutils literal"><span class="pre">2</span></tt>. Perfeito.</p>
<table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="57%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>/blog</td>
<td>{page} = 1</td>
</tr>
<tr class="row-even"><td>/blog/1</td>
<td>{page} = 1</td>
</tr>
<tr class="row-odd"><td>/blog/2</td>
<td>{page} = 2</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="adicionando-requisitos">
<span id="index-5"></span><h3>Adicionando Requisitos<a class="headerlink" href="#adicionando-requisitos" title="Permalink to this headline">¶</a></h3>
<p>Dê uma rápida olhada nos roteamentos que foram criados até agora:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">blog</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>   <span class="l-Scalar-Plain">/blog/{page}</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span>  <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeBlogBundle</span><span class="p-Indicator">:</span><span class="nv">Blog</span><span class="p-Indicator">:</span><span class="nv">index</span><span class="p-Indicator">,</span> <span class="nv">page</span><span class="p-Indicator">:</span> <span class="nv">1</span> <span class="p-Indicator">}</span>

<span class="l-Scalar-Plain">blog_show</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>   <span class="l-Scalar-Plain">/blog/{slug}</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span>  <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeBlogBundle</span><span class="p-Indicator">:</span><span class="nv">Blog</span><span class="p-Indicator">:</span><span class="nv">show</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>

<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing http://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;blog&quot;</span> <span class="na">pattern=</span><span class="s">&quot;/blog/{page}&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_controller&quot;</span><span class="nt">&gt;</span>AcmeBlogBundle:Blog:index<span class="nt">&lt;/default&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;page&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/default&gt;</span>
    <span class="nt">&lt;/route&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;blog_show&quot;</span> <span class="na">pattern=</span><span class="s">&quot;/blog/{slug}&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_controller&quot;</span><span class="nt">&gt;</span>AcmeBlogBundle:Blog:show<span class="nt">&lt;/default&gt;</span>
    <span class="nt">&lt;/route&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\Routing\RouteCollection</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Route</span><span class="p">;</span>

<span class="nv">$collection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RouteCollection</span><span class="p">();</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span><span class="s1">&#39;/blog/{page}&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AcmeBlogBundle:Blog:index&#39;</span><span class="p">,</span>
    <span class="s1">&#39;page&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">)));</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;blog_show&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span><span class="s1">&#39;/blog/{show}&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AcmeBlogBundle:Blog:show&#39;</span><span class="p">,</span>
<span class="p">)));</span>

<span class="k">return</span> <span class="nv">$collection</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Você pode apontar o problema ? Perceba que ambas as rotas tem padrão que combinam
URL&#8217;s que pareçam <tt class="docutils literal"><span class="pre">/blog/*</span></tt>. O roteador do Symfony irá sempre escolher a
<strong>primeira</strong> rota correspondente que ele encontra. Em outras palavras, a rota <tt class="docutils literal"><span class="pre">blog_show</span></tt>
<em>nunca</em> será correspondida. Ao invés disso, uma URL como <tt class="docutils literal"><span class="pre">/blog/my-blog-post</span></tt> irá corresponder
à primeira rota (<tt class="docutils literal"><span class="pre">blog</span></tt>) e retorna um valor sem sentido de <tt class="docutils literal"><span class="pre">my-blog-post</span></tt>
ao parâmetro <tt class="docutils literal"><span class="pre">{page}</span></tt>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="14%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">route</th>
<th class="head">parameters</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>/blog/2</td>
<td>blog</td>
<td>{page} = 2</td>
</tr>
<tr class="row-odd"><td>/blog/my-blog-post</td>
<td>blog</td>
<td>{page} = my-blog-post</td>
</tr>
</tbody>
</table>
<p>A resposta para o problema é adicionar mais <em>requisitos</em> de rota. As rotas neste
exemplo funcionariam perfeitamente se o padrão <tt class="docutils literal"><span class="pre">/blog/{page}</span></tt> <em>somente</em> correspondesse
a URLs onde a porção <tt class="docutils literal"><span class="pre">{page}</span></tt> fosse um integer. Felizmente, requisitos de expressões
regulares podem facilmente ser adicionados para cada parâmetro. Por exemplo:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">blog</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>   <span class="l-Scalar-Plain">/blog/{page}</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span>  <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeBlogBundle</span><span class="p-Indicator">:</span><span class="nv">Blog</span><span class="p-Indicator">:</span><span class="nv">index</span><span class="p-Indicator">,</span> <span class="nv">page</span><span class="p-Indicator">:</span> <span class="nv">1</span> <span class="p-Indicator">}</span>
    <span class="l-Scalar-Plain">requirements</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">page</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">\d+</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>

<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing http://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;blog&quot;</span> <span class="na">pattern=</span><span class="s">&quot;/blog/{page}&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_controller&quot;</span><span class="nt">&gt;</span>AcmeBlogBundle:Blog:index<span class="nt">&lt;/default&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;page&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/default&gt;</span>
        <span class="nt">&lt;requirement</span> <span class="na">key=</span><span class="s">&quot;page&quot;</span><span class="nt">&gt;</span>\d+<span class="nt">&lt;/requirement&gt;</span>
    <span class="nt">&lt;/route&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\Routing\RouteCollection</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Route</span><span class="p">;</span>

<span class="nv">$collection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RouteCollection</span><span class="p">();</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span><span class="s1">&#39;/blog/{page}&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AcmeBlogBundle:Blog:index&#39;</span><span class="p">,</span>
    <span class="s1">&#39;page&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">),</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;page&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;\d+&#39;</span><span class="p">,</span>
<span class="p">)));</span>

<span class="k">return</span> <span class="nv">$collection</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>O requisito <tt class="docutils literal"><span class="pre">\d+</span></tt> é uma expressão regular que diz o valor do
parâmetro <tt class="docutils literal"><span class="pre">{page}</span></tt> deve ser um dígito (em outras palavras, um número). A rota``blog``
ainda irá correponder a uma URL como <tt class="docutils literal"><span class="pre">/blog/2</span></tt> (porque 2 é um número), mas não irá mair
corresponder a URL como <tt class="docutils literal"><span class="pre">/blog/my-blog-post</span></tt> (porque <tt class="docutils literal"><span class="pre">my-blog-post</span></tt>
<em>não</em> é um número).</p>
<p>Como resultado, uma URL como <tt class="docutils literal"><span class="pre">/blog/my-blog-post</span></tt> não irá corresponder apropriadamente
à rota <tt class="docutils literal"><span class="pre">blog_show</span></tt>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="37%" />
<col width="20%" />
<col width="43%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">rota</th>
<th class="head">parâmetros</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>/blog/2</td>
<td>blog</td>
<td>{page} = 2</td>
</tr>
<tr class="row-odd"><td>/blog/my-blog-post</td>
<td>blog_show</td>
<td>{slug} = my-blog-post</td>
</tr>
</tbody>
</table>
<div class="sidebar">
<p class="first sidebar-title">Rotas prematuras sempre Vencem</p>
<p class="last">Isso tudo significa que a ordem das rotas é muito importante.
Se a rota <tt class="docutils literal"><span class="pre">blog_show</span></tt> foi colocada acima da rota <tt class="docutils literal"><span class="pre">blog</span></tt>, a
URL <tt class="docutils literal"><span class="pre">/blog/2``corresponderia</span> <span class="pre">a</span> <span class="pre">``blog_show</span></tt> ao invés de <tt class="docutils literal"><span class="pre">blog</span></tt> já que
o parâmetro``{slug}`` de <tt class="docutils literal"><span class="pre">blog_show</span></tt> não tem requisitos. By using proper
ordering and clever requirements, you can accomplish just about anything.</p>
</div>
<p>Como os requisitos de parâmetros são expressões regulares, a complexidade
e flexibilidade de cada requisito é inteiramente de sua responsabilidade. Suponha que a página inicial
de sua aplicação está disponível em dois idiomas diferentes, baseada na
URL:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">homepage</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>   <span class="l-Scalar-Plain">/{culture}</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span>  <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeDemoBundle</span><span class="p-Indicator">:</span><span class="nv">Main</span><span class="p-Indicator">:</span><span class="nv">homepage</span><span class="p-Indicator">,</span> <span class="nv">culture</span><span class="p-Indicator">:</span> <span class="nv">en</span> <span class="p-Indicator">}</span>
    <span class="l-Scalar-Plain">requirements</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">culture</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">en|fr</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>

<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing http://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;homepage&quot;</span> <span class="na">pattern=</span><span class="s">&quot;/{culture}&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_controller&quot;</span><span class="nt">&gt;</span>AcmeDemoBundle:Main:homepage<span class="nt">&lt;/default&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;culture&quot;</span><span class="nt">&gt;</span>en<span class="nt">&lt;/default&gt;</span>
        <span class="nt">&lt;requirement</span> <span class="na">key=</span><span class="s">&quot;culture&quot;</span><span class="nt">&gt;</span>en|fr<span class="nt">&lt;/requirement&gt;</span>
    <span class="nt">&lt;/route&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\Routing\RouteCollection</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Route</span><span class="p">;</span>

<span class="nv">$collection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RouteCollection</span><span class="p">();</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;homepage&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span><span class="s1">&#39;/{culture}&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AcmeDemoBundle:Main:homepage&#39;</span><span class="p">,</span>
    <span class="s1">&#39;culture&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;en&#39;</span><span class="p">,</span>
<span class="p">),</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;culture&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;en|fr&#39;</span><span class="p">,</span>
<span class="p">)));</span>

<span class="k">return</span> <span class="nv">$collection</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Para requisições recebidas, a parte <tt class="docutils literal"><span class="pre">{culture}</span></tt> da URL é comparada
com a expressão regular <tt class="docutils literal"><span class="pre">(en|fr)</span></tt>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>/</td>
<td>{culture} = en</td>
</tr>
<tr class="row-even"><td>/en</td>
<td>{culture} = en</td>
</tr>
<tr class="row-odd"><td>/fr</td>
<td>{culture} = fr</td>
</tr>
<tr class="row-even"><td>/es</td>
<td><em>won&#8217;t match this route</em></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="adicionando-requisicao-de-metodo-http">
<span id="index-6"></span><h3>Adicionando Requisição de Método HTTP<a class="headerlink" href="#adicionando-requisicao-de-metodo-http" title="Permalink to this headline">¶</a></h3>
<p>Em adição à URL, você também pode ajustar o &#8220;método&#8221; da requisição recebida
(em outras palavras, GET, HEAD, POST, PUT, DELETE).Suponha que você tenha um formulário de contato
com dois controllers - um para exibir o formulário (em uma requisição GET) e uma
para processar o formulário quando ele é enviado (em uma requisição POST). Isto pode
ser acompanhando com a seguinte configuração de rota:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">contact</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">/contact</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeDemoBundle</span><span class="p-Indicator">:</span><span class="nv">Main</span><span class="p-Indicator">:</span><span class="nv">contact</span> <span class="p-Indicator">}</span>
    <span class="l-Scalar-Plain">requirements</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">_method</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">GET</span>

<span class="l-Scalar-Plain">contact_process</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">/contact</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeDemoBundle</span><span class="p-Indicator">:</span><span class="nv">Main</span><span class="p-Indicator">:</span><span class="nv">contactProcess</span> <span class="p-Indicator">}</span>
    <span class="l-Scalar-Plain">requirements</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">_method</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">POST</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>

<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing http://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;contact&quot;</span> <span class="na">pattern=</span><span class="s">&quot;/contact&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_controller&quot;</span><span class="nt">&gt;</span>AcmeDemoBundle:Main:contact<span class="nt">&lt;/default&gt;</span>
        <span class="nt">&lt;requirement</span> <span class="na">key=</span><span class="s">&quot;_method&quot;</span><span class="nt">&gt;</span>GET<span class="nt">&lt;/requirement&gt;</span>
    <span class="nt">&lt;/route&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;contact_process&quot;</span> <span class="na">pattern=</span><span class="s">&quot;/contact&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_controller&quot;</span><span class="nt">&gt;</span>AcmeDemoBundle:Main:contactProcess<span class="nt">&lt;/default&gt;</span>
        <span class="nt">&lt;requirement</span> <span class="na">key=</span><span class="s">&quot;_method&quot;</span><span class="nt">&gt;</span>POST<span class="nt">&lt;/requirement&gt;</span>
    <span class="nt">&lt;/route&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\Routing\RouteCollection</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Route</span><span class="p">;</span>

<span class="nv">$collection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RouteCollection</span><span class="p">();</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;contact&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span><span class="s1">&#39;/contact&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AcmeDemoBundle:Main:contact&#39;</span><span class="p">,</span>
<span class="p">),</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_method&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;GET&#39;</span><span class="p">,</span>
<span class="p">)));</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;contact_process&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span><span class="s1">&#39;/contact&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AcmeDemoBundle:Main:contactProcess&#39;</span><span class="p">,</span>
<span class="p">),</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_method&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span>
<span class="p">)));</span>

<span class="k">return</span> <span class="nv">$collection</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Apesar do fato que estas duas rotas tem padrões idênticos (<tt class="docutils literal"><span class="pre">/contact</span></tt>),
a primeira rota irá aceitar somente requisições GET e a segunda rota irá somente
aceitar requisiçõs POST.Isso significa que você pode exibir o formulário e enviar o
formulário pela mesma URL, enquanto usa controllers distintos para as duas ações.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If no <tt class="docutils literal"><span class="pre">_method</span></tt> requirement is specified, the route will match on
<em>all</em> methods.</p>
</div>
<p>Como os outros requisitos, o requisito <tt class="docutils literal"><span class="pre">_method</span></tt> é analisado como uma expressão
regular. Para aceitar requisições <tt class="docutils literal"><span class="pre">GET</span></tt> <em>ou</em> <tt class="docutils literal"><span class="pre">POST</span></tt>, você pode usar <tt class="docutils literal"><span class="pre">GET|POST</span></tt>.</p>
</div>
<div class="section" id="exemplo-avancado-de-roteamento">
<span id="advanced-routing-example"></span><span id="index-7"></span><h3>Exemplo avançado de roteamento<a class="headerlink" href="#exemplo-avancado-de-roteamento" title="Permalink to this headline">¶</a></h3>
<p>Até esse ponto, você tem tudo que você precisa para criar uma poderosa estrutura
de roteamento em Symfony. O exemplo seguinte mostra quão flexível o
sistema de roteamento pode ser:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">article_show</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">/articles/{culture}/{year}/{title}.{_format}</span>
  <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeDemoBundle</span><span class="p-Indicator">:</span><span class="nv">Article</span><span class="p-Indicator">:</span><span class="nv">show</span><span class="p-Indicator">,</span> <span class="nv">_format</span><span class="p-Indicator">:</span> <span class="nv">html</span> <span class="p-Indicator">}</span>
  <span class="l-Scalar-Plain">requirements</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">culture</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">en|fr</span>
      <span class="l-Scalar-Plain">_format</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">html|rss</span>
      <span class="l-Scalar-Plain">year</span><span class="p-Indicator">:</span>     <span class="l-Scalar-Plain">\d+</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>

<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing http://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;article_show&quot;</span> <span class="na">pattern=</span><span class="s">&quot;/articles/{culture}/{year}/{title}.{_format}&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_controller&quot;</span><span class="nt">&gt;</span>AcmeDemoBundle:Article:show<span class="nt">&lt;/default&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_format&quot;</span><span class="nt">&gt;</span>html<span class="nt">&lt;/default&gt;</span>
        <span class="nt">&lt;requirement</span> <span class="na">key=</span><span class="s">&quot;culture&quot;</span><span class="nt">&gt;</span>en|fr<span class="nt">&lt;/requirement&gt;</span>
        <span class="nt">&lt;requirement</span> <span class="na">key=</span><span class="s">&quot;_format&quot;</span><span class="nt">&gt;</span>html|rss<span class="nt">&lt;/requirement&gt;</span>
        <span class="nt">&lt;requirement</span> <span class="na">key=</span><span class="s">&quot;year&quot;</span><span class="nt">&gt;</span>\d+<span class="nt">&lt;/requirement&gt;</span>
    <span class="nt">&lt;/route&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\Routing\RouteCollection</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Route</span><span class="p">;</span>

<span class="nv">$collection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RouteCollection</span><span class="p">();</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;homepage&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span><span class="s1">&#39;/articles/{culture}/{year}/{title}.{_format}&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AcmeDemoBundle:Article:show&#39;</span><span class="p">,</span>
    <span class="s1">&#39;_format&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;html&#39;</span><span class="p">,</span>
<span class="p">),</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;culture&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;en|fr&#39;</span><span class="p">,</span>
    <span class="s1">&#39;_format&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;html|rss&#39;</span><span class="p">,</span>
    <span class="s1">&#39;year&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;\d+&#39;</span><span class="p">,</span>
<span class="p">)));</span>

<span class="k">return</span> <span class="nv">$collection</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Como você viu, essa rota só irá funcionar se a parte <tt class="docutils literal"><span class="pre">{culture}</span></tt> da
URL ou é <tt class="docutils literal"><span class="pre">en</span></tt> ou <tt class="docutils literal"><span class="pre">fr</span></tt> e se <tt class="docutils literal"><span class="pre">{year}</span></tt> é um número. Esta rota também
mostra como você pode usar um período entre espaços reservados ao invés de
uma barra. URLs que correspondam a esta rota poderia parecer como:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">/articles/en/2010/my-post</span></tt></li>
<li><tt class="docutils literal"><span class="pre">/articles/fr/2010/my-post.rss</span></tt></li>
</ul>
</div></blockquote>
<div class="sidebar" id="book-routing-format-param">
<p class="first sidebar-title">O Parâmetro de Roteamento Especial <tt class="docutils literal"><span class="pre">_format</span></tt></p>
<p class="last">Esse exemplo também resslta o parâmetro de roteamento especial <tt class="docutils literal"><span class="pre">_format</span></tt>.
Quando usa esse parâmetro, o valor correspondido se torna o &#8220;formato requisitado&#8221;
do ojeto <tt class="docutils literal"><span class="pre">Request</span></tt>. Ultimamente, o formato requisitado é usado para certas
coisas como as configurar o <tt class="docutils literal"><span class="pre">Content-Type</span></tt> da resposta (ex: um formato de requisição
<tt class="docutils literal"><span class="pre">json</span></tt> traduz em um <tt class="docutils literal"><span class="pre">Content-Type</span></tt> de <tt class="docutils literal"><span class="pre">application/json</span></tt>).
Ele também pode ser usado no controller para alterar um template diferente para
cada valor de <tt class="docutils literal"><span class="pre">_format</span></tt>. O parâmetro <tt class="docutils literal"><span class="pre">_format</span></tt> é um modo muito poderoso
para alterar o mesmo conteúdo em formatos diferentes.</p>
</div>
</div>
<div class="section" id="parametros-de-roteamento-especiais">
<h3>Parâmetros de Roteamento Especiais<a class="headerlink" href="#parametros-de-roteamento-especiais" title="Permalink to this headline">¶</a></h3>
<p>Como você viu, cada parâmetro de roteamento ou valor padrão está eventualmente disponível
como um argumento no método do controller. Adicionalmente, existem três parâmetros
que são especiais: cada um adiciona uma parte única de funcionalidade dentro da sua aplicação:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">_controller</span></tt>: Como você viu, este parâmetro é usado para determinar qual
controller é executado quando a rota é correspondida;</li>
<li><tt class="docutils literal"><span class="pre">_format</span></tt>: Usado para fixar o formato de requisição (<a class="reference internal" href="#book-routing-format-param"><em>read more</em></a>);</li>
<li><tt class="docutils literal"><span class="pre">_locale</span></tt>: Usado para fixar a localidade na sessão (<a class="reference internal" href="translation.html#book-translation-locale-url"><em>read more</em></a>);</li>
</ul>
</div>
</div>
<div class="section" id="padrao-de-nomeacao-do-controller">
<span id="controller-string-syntax"></span><span id="index-8"></span><h2>Padrão de nomeação do Controller<a class="headerlink" href="#padrao-de-nomeacao-do-controller" title="Permalink to this headline">¶</a></h2>
<p>Cada rota deve ter um parâmetro <tt class="docutils literal"><span class="pre">_controller</span></tt>, que ordena qual
controller deveria ser executado quando uma rota é correspondida. Esse parâmetro
usa um padrão de string simples chamado <em>logical controller name</em>, que
o Symfony mapeia para uma classe e método PHP específico. O padrão tem três partes,
cada uma separada por dois pontos:</p>
<blockquote>
<div><strong>bundle</strong>:<strong>controller</strong>:<strong>action</strong></div></blockquote>
<p>Por exemplo, um valor <tt class="docutils literal"><span class="pre">_controller</span></tt> de <tt class="docutils literal"><span class="pre">AcmeBlogBundle:Blog:show</span></tt> significa:</p>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="40%" />
<col width="29%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Pacote</th>
<th class="head">Classe do Controller</th>
<th class="head">Nome do Método</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>AcmeBlogBundle</td>
<td>BlogController</td>
<td>showAction</td>
</tr>
</tbody>
</table>
<p>O controller poderia parecer assim:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/Acme/BlogBundle/Controller/BlogController.php</span>

<span class="k">namespace</span> <span class="nx">Acme\BlogBundle\Controller</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\Controller</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">BlogController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">showAction</span><span class="p">(</span><span class="nv">$slug</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Perceba que Symfony adiciona a string <tt class="docutils literal"><span class="pre">Controller</span></tt> para o nome da classe (<tt class="docutils literal"><span class="pre">Blog</span></tt>
=&gt; <tt class="docutils literal"><span class="pre">BlogController</span></tt>) e <tt class="docutils literal"><span class="pre">Action</span></tt> para o nome do método (<tt class="docutils literal"><span class="pre">show</span></tt> =&gt; <tt class="docutils literal"><span class="pre">showAction</span></tt>).</p>
<p>Você também poderia referir a esse controler usando os nomes totalmente qualificados de
classe e método:<tt class="docutils literal"><span class="pre">Acme\BlogBundle\Controller\BlogController::showAction</span></tt>.
Mas se você seguir alguma convenções simples, o nome lógico é mais conciso
e permite mais flexibilidade.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Em complemento ao utilizar o nome lógico ou o nome de classe totalmente qualificado,
Symfony suporta um terceiro modo de referir a um controller. Esse método
usa somente um separador de dois pontos (ex: <tt class="docutils literal"><span class="pre">service_name:indexAction</span></tt>) e
referir um controller como um serviço (veja <tt class="xref doc docutils literal"><span class="pre">/cookbook/controller/service</span></tt>).</p>
</div>
</div>
<div class="section" id="parametros-de-rota-e-argumentos-de-controller">
<h2>Parâmetros de Rota e Argumentos de Controller<a class="headerlink" href="#parametros-de-rota-e-argumentos-de-controller" title="Permalink to this headline">¶</a></h2>
<p>Os parâmetros de rota (ex: <tt class="docutils literal"><span class="pre">{slug}</span></tt>) são especialmente importantes porque
cada um é disponibilizado como um argumento para o método do controller:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">showAction</span><span class="p">(</span><span class="nv">$slug</span><span class="p">)</span>
<span class="p">{</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Na realidade, a coleção inteira <tt class="docutils literal"><span class="pre">defaults</span></tt> é mesclada com um valor de parâmetro
para formar um único array. Cada chave daquele array está disponível como um
argumento no controller.</p>
<p>Em outras palavras, para cada argumento do método do seu controller, Symfony procura
por um parâmetro de rota daquele nome e atribui o valor para aquele argumento.
No exemplo avançado acima, qualquer combinação (em qualquer ordem) das seguintes
variáveis poderia ser usada como argumentos para o método <tt class="docutils literal"><span class="pre">showAction()</span></tt>:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">$culture</span></tt></li>
<li><tt class="docutils literal"><span class="pre">$year</span></tt></li>
<li><tt class="docutils literal"><span class="pre">$title</span></tt></li>
<li><tt class="docutils literal"><span class="pre">$_format</span></tt></li>
<li><tt class="docutils literal"><span class="pre">$_controller</span></tt></li>
</ul>
<p>Como os espaços resercados e a coleção <tt class="docutils literal"><span class="pre">defaults</span></tt> são mesclados juntos, mesmo
a variável <tt class="docutils literal"><span class="pre">$_controller</span></tt> está disponível. Para uma discussão mais detalhada,
veja <a class="reference internal" href="controller.html#route-parameters-controller-arguments"><em>Parâmetros de Rota como Argumentos do Controlador</em></a>.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Você também pode usar uma variável especial <tt class="docutils literal"><span class="pre">$_route</span></tt>, que é fixada para
o nome da rota que foi correspondida.</p>
</div>
</div>
<div class="section" id="incluindo-recursos-externos-de-roteamento">
<span id="routing-include-external-resources"></span><span id="index-9"></span><h2>Incluindo Recursos Externos de Roteamento<a class="headerlink" href="#incluindo-recursos-externos-de-roteamento" title="Permalink to this headline">¶</a></h2>
<p>Todas as rotas são carregadas por um arquivo de configuração individual - geralmente <tt class="docutils literal"><span class="pre">app/config/routing.yml</span></tt>
(veja <a class="reference internal" href="#criando-rotas">Criando Rotas</a> acima). É comum, entretanto, que você queria carregar recursos
de outros lugares, como um arquivo de roteamento que resida dentro de um pacote. Isso
pode ser feito mediante &#8220;importação&#8221; daquele arquivo:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/routing.yml</span>
<span class="l-Scalar-Plain">acme_hello</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">resource</span><span class="p-Indicator">:</span> <span class="s">&quot;@AcmeHelloBundle/Resources/config/routing.yml&quot;</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/routing.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>

<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing http://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;import</span> <span class="na">resource=</span><span class="s">&quot;@AcmeHelloBundle/Resources/config/routing.xml&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// app/config/routing.php</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\RouteCollection</span><span class="p">;</span>

<span class="nv">$collection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RouteCollection</span><span class="p">();</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">addCollection</span><span class="p">(</span><span class="nv">$loader</span><span class="o">-&gt;</span><span class="na">import</span><span class="p">(</span><span class="s2">&quot;@AcmeHelloBundle/Resources/config/routing.php&quot;</span><span class="p">));</span>

<span class="k">return</span> <span class="nv">$collection</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Quando importar recursos do YAML, a chave (ex: <tt class="docutils literal"><span class="pre">acme_hello</span></tt>) é insignificante.
Somente esteja certo que é única, então nenhuma outra linha a sobrescreverá.</p>
</div>
<p>A chave <tt class="docutils literal"><span class="pre">resource</span></tt> carrega o recurso de determinado roteamento. Neste exemplo
o recurso é um atalho inteiro para o arquivo, onde a sintaxe do atalho <tt class="docutils literal"><span class="pre">&#64;AcmeHelloBundle</span></tt>
resolve o atalho daquele pacote. O arquivo importado poderia parecer algo como isso:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre> <span class="c1"># src/Acme/HelloBundle/Resources/config/routing.yml</span>
<span class="l-Scalar-Plain">acme_hello</span><span class="p-Indicator">:</span>
     <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">/hello/{name}</span>
     <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeHelloBundle</span><span class="p-Indicator">:</span><span class="nv">Hello</span><span class="p-Indicator">:</span><span class="nv">index</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- src/Acme/HelloBundle/Resources/config/routing.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>

<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing http://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;acme_hello&quot;</span> <span class="na">pattern=</span><span class="s">&quot;/hello/{name}&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_controller&quot;</span><span class="nt">&gt;</span>AcmeHelloBundle:Hello:index<span class="nt">&lt;/default&gt;</span>
    <span class="nt">&lt;/route&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/Acme/HelloBundle/Resources/config/routing.php</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\RouteCollection</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Route</span><span class="p">;</span>

<span class="nv">$collection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RouteCollection</span><span class="p">();</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;acme_hello&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span><span class="s1">&#39;/hello/{name}&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AcmeHelloBundle:Hello:index&#39;</span><span class="p">,</span>
<span class="p">)));</span>

<span class="k">return</span> <span class="nv">$collection</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>As rotas daquele arquivo são analisadas e carregadas da mesma forma que o arquivo
principal de roteamento.</p>
<div class="section" id="prefixando-rotas-importadas">
<h3>Prefixando Rotas Importadas<a class="headerlink" href="#prefixando-rotas-importadas" title="Permalink to this headline">¶</a></h3>
<p>Você também pode escolher providenciar um &#8220;prefixo&#8221; para as rotas importadas. Por exemplo
suponha que você queira que a rota <tt class="docutils literal"><span class="pre">acme_hello</span></tt> tnha um padrão final de <tt class="docutils literal"><span class="pre">/admin/hello/{name}</span></tt>
ao invés de simplesmente <tt class="docutils literal"><span class="pre">/hello/{name}</span></tt>:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/routing.yml</span>
<span class="l-Scalar-Plain">acme_hello</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">resource</span><span class="p-Indicator">:</span> <span class="s">&quot;@AcmeHelloBundle/Resources/config/routing.yml&quot;</span>
    <span class="l-Scalar-Plain">prefix</span><span class="p-Indicator">:</span>   <span class="l-Scalar-Plain">/admin</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/routing.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>

<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing http://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;import</span> <span class="na">resource=</span><span class="s">&quot;@AcmeHelloBundle/Resources/config/routing.xml&quot;</span> <span class="na">prefix=</span><span class="s">&quot;/admin&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// app/config/routing.php</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\RouteCollection</span><span class="p">;</span>

<span class="nv">$collection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RouteCollection</span><span class="p">();</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">addCollection</span><span class="p">(</span><span class="nv">$loader</span><span class="o">-&gt;</span><span class="na">import</span><span class="p">(</span><span class="s2">&quot;@AcmeHelloBundle/Resources/config/routing.php&quot;</span><span class="p">),</span> <span class="s1">&#39;/admin&#39;</span><span class="p">);</span>

<span class="k">return</span> <span class="nv">$collection</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>A string <tt class="docutils literal"><span class="pre">/admin</span></tt> irá agora ser prefixada ao padrão de cada rota
carregada do novo recurso de roteamento.</p>
</div>
</div>
<div class="section" id="visualizando-e-depurando-rotas">
<span id="index-10"></span><h2>Visualizando e Depurando Rotas<a class="headerlink" href="#visualizando-e-depurando-rotas" title="Permalink to this headline">¶</a></h2>
<p>Enquanto adiciona e personalizar rotas, é útil ser capaz de visualizar
e obter informação detalhada sobre suas rotas. Um grande modo para ver cada rota
em sua aplicação é pelo comando de console <tt class="docutils literal"><span class="pre">router:debug</span></tt>. Execute
o seguinte comando a partir da raiz de seu projeto.</p>
<div class="highlight-bash"><div class="highlight"><pre>php app/console router:debug
</pre></div>
</div>
<p>O comando irá imprimir uma lista útil de <em>todas</em> as rotas configuradas em
sua aplicação:</p>
<div class="highlight-text"><div class="highlight"><pre>homepage              ANY       /
contact               GET       /contact
contact_process       POST      /contact
article_show          ANY       /articles/{culture}/{year}/{title}.{_format}
blog                  ANY       /blog/{page}
blog_show             ANY       /blog/{slug}
</pre></div>
</div>
<p>Você também pode obter informação muito específica em uma rota individual ao incluir
o nome da rota após o comando:</p>
<div class="highlight-bash"><div class="highlight"><pre>php app/console router:debug article_show
</pre></div>
</div>
</div>
<div class="section" id="gerando-urls">
<span id="index-11"></span><h2>Gerando URLs<a class="headerlink" href="#gerando-urls" title="Permalink to this headline">¶</a></h2>
<p>O sistema de roteamento deveria também ser usado para gerar URLs. Na realidade, roteamento
é um sistema bi-direcional: mapeando a URL para um controller+parâmetros e
parâmetros+rota de voltar para a URL. Os métodos
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/Routing/Router.html#method_match" title="Symfony\Component\Routing\Router::match()"><span class="pre">match()</span></a></tt> e
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/Routing/Router.html#method_generate" title="Symfony\Component\Routing\Router::generate()"><span class="pre">generate()</span></a></tt> formam esse sistema
bi-directional. Considere a rota <tt class="docutils literal"><span class="pre">blog_show</span></tt> de um exemplo anterior:</p>
<div class="highlight-python"><pre>$params = $router-&gt;match('/blog/my-blog-post');
// array('slug' =&gt; 'my-blog-post', '_controller' =&gt; 'AcmeBlogBundle:Blog:show')

$uri = $router-&gt;generate('blog_show', array('slug' =&gt; 'my-blog-post'));
// /blog/my-blog-post</pre>
</div>
<p>Para gerar a URL, você precisa especificar o nome da rota (ex: <tt class="docutils literal"><span class="pre">blog_show</span></tt>)
e quaisquer coringas(ex: <tt class="docutils literal"><span class="pre">slug</span> <span class="pre">=</span> <span class="pre">my-blog-post</span></tt>) usado no padrão para
aquela rota. Com essa informação, qualquer URL pode ser facilmente gerada:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MainController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">showAction</span><span class="p">(</span><span class="nv">$slug</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="c1">// ...</span>

      <span class="nv">$url</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;router&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="s1">&#39;blog_show&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;slug&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;my-blog-post&#39;</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Em uma sessão futura, você irá aprender como gerar URLs a partir de templates.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>Se o frontend de sua aplicação usa requisições AJAX, você poderia querer
ser capaz de ferar URLs em JavaScript baseados na sua configuração de roteamento.
Ao usar <a class="reference external" href="https://github.com/FriendsOfSymfony/FOSJsRoutingBundle">FOSJsRoutingBundle</a>, você poderia fazer exatamente isso:</p>
<div class="highlight-javascript"><pre>var url = Routing.generate('blog_show', { "slug": 'my-blog-post});</pre>
</div>
<p class="last">Para mais informações, veja a documentação para aquele pacote.</p>
</div>
<div class="section" id="gerando-urls-absolutas">
<span id="index-12"></span><h3>Gerando URLs Absolutas<a class="headerlink" href="#gerando-urls-absolutas" title="Permalink to this headline">¶</a></h3>
<p>Por padrão, o roteador irá gerar URLs relativas (ex: <tt class="docutils literal"><span class="pre">/blog</span></tt>). Para gerar
uma URL absoluta, simplesmente passe <tt class="docutils literal"><span class="pre">true</span></tt> ao terceiro argumento do
método <tt class="docutils literal"><span class="pre">generate()</span></tt>:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$router</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="s1">&#39;blog_show&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;slug&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;my-blog-post&#39;</span><span class="p">),</span> <span class="k">true</span><span class="p">);</span>
<span class="c1">// http://www.example.com/blog/my-blog-post</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>O host que é usado quando gera uma URL absoluta é o host
do objeto <tt class="docutils literal"><span class="pre">Request</span></tt> atual. Isso é detectado automaticamente baseado
na informação do servidor abastecida pelo PHP. Quando gerar URLs absolutas para
rodar scripts a partir da linha de comando, você precisará fixar manualmente o
host no objeto <tt class="docutils literal"><span class="pre">Request</span></tt>:</p>
<div class="last highlight-php"><div class="highlight"><pre><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">headers</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;HOST&#39;</span><span class="p">,</span> <span class="s1">&#39;www.example.com&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="gerando-urls-com-strings-de-consulta">
<span id="index-13"></span><h3>Gerando URLs com Strings de Consulta<a class="headerlink" href="#gerando-urls-com-strings-de-consulta" title="Permalink to this headline">¶</a></h3>
<p>O método <tt class="docutils literal"><span class="pre">generate</span></tt> pega um array de valores coringa para gerar a URI.
Mas se você passar valores extras, eles serão adicionados ao URI como uma string de consulta:</p>
<div class="highlight-python"><pre>$router-&gt;generate('blog', array('page' =&gt; 2, 'category' =&gt; 'Symfony'));
// /blog/2?category=Symfony</pre>
</div>
</div>
<div class="section" id="gerando-urls-de-um-template">
<h3>Gerando URLs de um template<a class="headerlink" href="#gerando-urls-de-um-template" title="Permalink to this headline">¶</a></h3>
<p>O lugar mais comum para gerar uma URL é pelo template, ao fazer vinculação
entre páginas na sua aplicação.Isso é feito da mesma forma que antes, mas
usando uma função helper de template:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">path</span><span class="o">(</span><span class="s1">&#39;blog_show&#39;</span><span class="o">,</span> <span class="o">{</span> <span class="s1">&#39;slug&#39;</span><span class="o">:</span> <span class="s1">&#39;my-blog-post&#39;</span> <span class="o">})</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
  Read this blog post.
<span class="nt">&lt;/a&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo </span><span class="si">$view[&#39;router&#39;]</span><span class="s2">-&gt;generate(&#39;blog_show&#39;, array(&#39;slug&#39; =&gt; &#39;my-blog-post&#39;)) ?&gt;&quot;</span><span class="o">&gt;</span>
    <span class="nx">Read</span> <span class="k">this</span> <span class="nx">blog</span> <span class="nx">post</span><span class="o">.</span>
<span class="o">&lt;/</span><span class="nx">a</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>URLs absolutas também podem ser geradas.</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">url</span><span class="o">(</span><span class="s1">&#39;blog_show&#39;</span><span class="o">,</span> <span class="o">{</span> <span class="s1">&#39;slug&#39;</span><span class="o">:</span> <span class="s1">&#39;my-blog-post&#39;</span> <span class="o">})</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
  Read this blog post.
<span class="nt">&lt;/a&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo </span><span class="si">$view[&#39;router&#39;]</span><span class="s2">-&gt;generate(&#39;blog_show&#39;, array(&#39;slug&#39; =&gt; &#39;my-blog-post&#39;), true) ?&gt;&quot;</span><span class="o">&gt;</span>
    <span class="nx">Read</span> <span class="k">this</span> <span class="nx">blog</span> <span class="nx">post</span><span class="o">.</span>
<span class="o">&lt;/</span><span class="nx">a</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="sumario">
<h2>Sumário<a class="headerlink" href="#sumario" title="Permalink to this headline">¶</a></h2>
<p>Roteamento é um sistema para mapear a URL de requisiçõs recebidas para a função
do controller que deveria ser chamada para processar a requisição. Em ambas permite
a você especificar URLs bonitas e manter a funcionalidade de sua aplicação
desacoplada daquelas URLs. Roteamento é um mecanismo de duas vias, significando que
também deveria ser usada para gerar URLs.</p>
</div>
<div class="section" id="aprenda-mais-do-cookbook">
<h2>Aprenda mais do Cookbook<a class="headerlink" href="#aprenda-mais-do-cookbook" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="../cookbook/routing/scheme.html"><em>Como forçar as rotas a usar sempre HTTPS ou HTTP</em></a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Roteamento</a><ul>
<li><a class="reference internal" href="#roteamento-em-acao">Roteamento em Ação</a></li>
<li><a class="reference internal" href="#roteamento-por-debaixo-do-capuz">Roteamento: Por debaixo do capuz</a></li>
<li><a class="reference internal" href="#criando-rotas">Criando rotas</a><ul>
<li><a class="reference internal" href="#configuracao-de-rota-basica">Configuração de rota básica</a></li>
<li><a class="reference internal" href="#roteando-com-espacos-reservados">Roteando com Espaços reservados</a></li>
<li><a class="reference internal" href="#espacos-reservados-requeridos-e-opcionais">Espaços reservados Requeridos e Opcionais</a></li>
<li><a class="reference internal" href="#adicionando-requisitos">Adicionando Requisitos</a></li>
<li><a class="reference internal" href="#adicionando-requisicao-de-metodo-http">Adicionando Requisição de Método HTTP</a></li>
<li><a class="reference internal" href="#exemplo-avancado-de-roteamento">Exemplo avançado de roteamento</a></li>
<li><a class="reference internal" href="#parametros-de-roteamento-especiais">Parâmetros de Roteamento Especiais</a></li>
</ul>
</li>
<li><a class="reference internal" href="#padrao-de-nomeacao-do-controller">Padrão de nomeação do Controller</a></li>
<li><a class="reference internal" href="#parametros-de-rota-e-argumentos-de-controller">Parâmetros de Rota e Argumentos de Controller</a></li>
<li><a class="reference internal" href="#incluindo-recursos-externos-de-roteamento">Incluindo Recursos Externos de Roteamento</a><ul>
<li><a class="reference internal" href="#prefixando-rotas-importadas">Prefixando Rotas Importadas</a></li>
</ul>
</li>
<li><a class="reference internal" href="#visualizando-e-depurando-rotas">Visualizando e Depurando Rotas</a></li>
<li><a class="reference internal" href="#gerando-urls">Gerando URLs</a><ul>
<li><a class="reference internal" href="#gerando-urls-absolutas">Gerando URLs Absolutas</a></li>
<li><a class="reference internal" href="#gerando-urls-com-strings-de-consulta">Gerando URLs com Strings de Consulta</a></li>
<li><a class="reference internal" href="#gerando-urls-de-um-template">Gerando URLs de um template</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sumario">Sumário</a></li>
<li><a class="reference internal" href="#aprenda-mais-do-cookbook">Aprenda mais do Cookbook</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="controller.html"
                        title="previous chapter">Controlador</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="templating.html"
                        title="next chapter">Criando e usando Templates</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/book/routing.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="templating.html" title="Criando e usando Templates"
             >next</a> |</li>
        <li class="right" >
          <a href="controller.html" title="Controlador"
             >previous</a> |</li>
        <li><a href="../index.html">Symfony2Docs 2.0.x documentation</a> &raquo;</li>
          <li><a href="index.html" >Livro</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Symfony Team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>